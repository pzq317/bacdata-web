{"version":3,"sources":["data/category.csv","data/linechartdata.csv","TimeLine.js","TradeBtn.js","WorldMap.js","Ranking.js","SparkLines.js","Value.js","d3.sankey.js","PieChart.js","BarChart.js","Sankey.js","LineChart.js","Title.js","CountryBtn.js","SideBar.js","App.js","serviceWorker.js","index.js","data/world_trade_value.csv"],"names":["module","exports","__webpack_require__","p","TimeLine","_this","this","react_default","a","createElement","value","props","year","id","onChange","e","onClick","target","Component","trade","WorldMap","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","data","json","drawChart","bind","assertThisInitialized","upDate","nextProps","console","log","window","addEventListener","upDateTitle","d3","html","csv","d","Country","Year","Trade","Value","then","_this2","setState","margin","width","style","slice","height","svg1","append","attr","scaleData","filter","colorScale","domain","keys","populationById","forEach","features","x","properties","sovereignt","i","toString","name","projection","fitSize","path","country","selectAll","enter","div","on","convert","pageX","pageY","g","unit","Math","min","transition","duration","text","_this3","svg","remove","labelValue","abs","Number","round","filteredData","sort","b","circle","exit","SparkLines","drawSparkLine","temp","_this4","_this5","xScale","range","yScale","line","y","curve","datum","_this6","delay","animation","Sankey","sankey","nodeWidth","nodePadding","size","nodes","links","computeLinkDepths","ascendingSourceDepth","source","ascendingTargetDepth","node","sourceLinks","targetLinks","sy","ty","link","dy","center","_","arguments","length","layout","iterations","push","max","nextNodes","remainingNodes","dx","indexOf","moveSinksRight","kx","computeNodeBreadths","nodesByBreadth","key","sortKeys","entries","map","values","ky","initializeNodeDepth","resolveCollisions","alpha","relaxRightToLeft","relaxLeftToRight","weightedSource","breadth","weightedTarget","reverse","y0","n","ascendingDepth","computeNodeDepths","relayout","curvature","x0","x1","xi","x2","x3","y1","Pie","count","category","setData","Promise","resolve","categoryData","Reporter","Partner","Product","radius","padAngle","outerRadius","innerRadius","svg2","t1","t2","totalUS","totalCN","dataUS","dataCN","colorImport","colorExport","color","pie","arcTween","_current","t","select","arc1","arc2","attrTween","each","Bar","product","stateSelect","nextState","drawLegend","flags","l","cateData","total","bar_g","descNum","yAxisScale","xAxisScale","paddingInner","paddingOuter","yAxis","xAxis","bandwidth","bar_gg","ca","cb","comparison","_this7","type","className","SankeyGraph","countries","piechartshow","top","right","bottom","left","includes","createSankeyJson","sankeydata","formatNumber","freqCounter","rect","setCountry","format","countryStatus","linkExtent","frequencyScale","particleSize","freq","particleColor","elapsed","time","particles","offset","random","context","getContext","clearRect","fillStyle","lineWidth","currentTime","currentPercent","getTotalLength","currentPos","getPointAtLength","beginPath","arc","PI","fill","particleEdgeCanvasPath","index","c","chinaIndex","usIndex","PieChart_Pie","Title","href","CountryBtn","SideBar","toTop","goTo","TimeLine_TimeLine","yearStatus","TradeBtn_TimeLine","tradeStatus","CountryBtn_CountryBtn","App","goToTop","goToAnchor","SideBar_SideBar","Title_Title","WorldMap_WorldMap","Ranking_WorldMap","SparkLines_SparkLines","Value_Value","Sankey_SankeyGraph","BarChart_Bar","Boolean","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.204d983d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/category.baf775fb.csv\";","module.exports = __webpack_public_path__ + \"static/media/linechartdata.6c1cd75e.csv\";","import React, { Component } from 'react';\n\n\nexport default class TimeLine extends Component{\n\n\n\trender(){\n\t\treturn(\n\t\t\t<select value={this.props.year} id='year-selector' onChange={(e)=>this.props.onClick(e.target.value)}>\n\t\t  \t\t<option value='2006' >2006</option>\n\t\t\t\t<option value='2007' >2007</option>\n\t\t\t\t<option value='2008' >2008</option>\n\t\t\t\t<option value='2009' >2009</option>\n\t\t\t\t<option value='2010' >2010</option>\n\t\t\t\t<option value='2011' >2011</option>\n\t\t\t\t<option value='2012' >2012</option>\n\t\t\t\t<option value='2013' >2013</option>\n\t\t\t\t<option value='2014' >2014</option>\n\t\t\t\t<option value='2015' >2015</option>\n\t\t\t\t<option value='2016' >2016</option>\n\t\t\t</select>\n\t\t)\n\t}\n\n}","import React, { Component } from 'react';\n\n\nexport default class TimeLine extends Component{\n\n\trender(){\n\t\treturn(\n\t\t\t\n\t\t\t<select id='trade-selector' value={this.props.trade} onChange={(e)=>this.props.onClick(e.target.value)}>\n\t\t  \t\t<option value='Import' id='import'>Import</option>\n\t\t  \t\t<option value='Export' id='export'>Export</option>\n\t\t\t</select>\n\t\t\t\n\n\t\t)\n\t}\n\n}","import React, { Component } from 'react';\nimport * as d3 from 'd3'\nimport TimeLine from './TimeLine'\nimport TradeBtn from './TradeBtn'\nimport json from './data/world.json'\nimport csv from './data/world_trade_value.csv'\n\nexport default class WorldMap extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdata: {},\n\t\t\tjson:{}\n\t\t}\n\t\tthis.drawChart = this.drawChart.bind(this);\n\t\tthis.upDate = this.upDate.bind(this);\n\t}\n\n\tshouldComponentUpdate(nextProps) {\n\t\tif (this.props.trade !== nextProps.trade || this.props.year !== nextProps.year) {\n\t\t\treturn true;\n\t\t}\n\t\telse {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tconsole.log(this.props.year)\n\t\tthis.drawChart();\n\t\twindow.addEventListener('resize', this.upDate)\n\t}\n\tcomponentDidUpdate() {\n\t\t//console.log(this.drawChart)\n\t\tthis.upDate();\n\t\tthis.upDateTitle();\n\t}\n\tupDateTitle(){\n\t\td3.select('#year').html(this.props.year)\n\t\td3.select('#trade').html( ' '+this.props.trade)\n\n\n\t}\n\n\tdrawChart() {\n\n\t\td3.csv(csv, function (d) {\n\t\t\treturn {\n\t\t\t\tCountry: d.Country,\n\t\t\t\tYear: +d.Year,\n\t\t\t\tTrade: d.Trade,\n\t\t\t\tValue: +d.Value\n\n\t\t\t}\n\t\t}.bind(this)).then(function (data) {\n\t\t\tthis.setState({\n\t\t\t\tdata: data\n\t\t\t})\n\n\t\t\tvar margin = { top: 20, left: 0, bottom: 0, right: 0 },\n\t\t\t\twidth = +d3.select('#worldmap').style('width').slice(0, -2) - margin.left - margin.right,\n            \theight = +d3.select('#worldmap').style('height').slice(0, -2) - margin.top - margin.bottom;\n        \n\t\t\t//var h = +d3.select('#linechart').style('height').slice(0, -2)\n\t\t\t//var width = 620 - margin.left - margin.right;\n\t\t\t//var height = 450 - margin.top - margin.bottom;\n\n\n\t\t\tvar svg1 = d3.select(\"#worldmap\").append(\"svg\")\n\t\t\t\t.attr(\"width\", width + margin.left + margin.right)\n\t\t\t\t.attr(\"height\", height + margin.top + margin.bottom)\n\t\t\t\t.attr('id','worldmap-svg')\n\t\t\t\t.append('g')\n\t\t\t\t.attr('id', 'worldmap-g')\n\t\t\t\t.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n\n\t\t\tvar scaleData = data.filter(d => d.Trade == this.props.trade && d.Year == this.props.year);\n\n\t\t\t// var colorScale = d3.scaleSequential(d3.interpolateBlues)\n\t\t\t// .domain([d3.min(scaleData, function (d) { return d[Object.keys(d)[3]] }), d3.max(scaleData, function (d) { return d[Object.keys(d)[3]] })])\n\n\t\t\tvar colorScale = d3.scaleSequential(d3.interpolateYlGnBu)\n\t\t\t\t.domain([d3.min(scaleData, function (d) { return d[Object.keys(d)[3]] }), d3.max(scaleData, function (d) { return d[Object.keys(d)[3]] })])\n\n\t\t\tvar populationById = {};\n\t\t\tconsole.log(populationById)\n\t\t\tdata.forEach(function (d) {\n\t\t\t\t//populationById[d.Country] = d.Value\n\t\t\t\tpopulationById[d.Year + '_' + d.Country + '_' + d.Trade] = d.Value\n\t\t\t\t// year_value[d.Year] = d.Value\n\t\t\t\t// trade_year[d.Trade] = year_value\n\t\t\t})\n\t\t\tconsole.log(populationById)\n\t\t\tjson.features = json.features.filter(x => x.properties.sovereignt !== 'Antarctica')\n\n\t\t\tconsole.log(json)\n\n\t\t\tjson.features.forEach(function (d) {\n\t\t\t\tvar trade = 'Import'\n\t\t\t\tfor (var i = 2006; i < 2017; i++) {\n\t\t\t\t\tlet year = i.toString()\n\t\t\t\t\td.properties[year + '_' + trade] = populationById[year + '_' + d.properties.name + '_' + trade]\n\t\t\t\t}\n\n\t\t\t\ttrade = 'Export'\n\t\t\t\tfor (var i = 2006; i < 2017; i++) {\n\t\t\t\t\tlet year = i.toString()\n\t\t\t\t\td.properties[year + '_' + trade] = populationById[year + '_' + d.properties.name + '_' + trade]\n\t\t\t\t}\n\t\t\t\t//d.properties.value = populationById[d.properties.name]\n\n\t\t\t})\n\n\t\t\tthis.setState({\n\t\t\t\tjson:json\n\t\t\t})\n\t\t\tconsole.log(json)\n\n\t\t\tvar projection = d3.geoMercator()\n\t\t\t\t.fitSize([width, height], json); //fit svg size!\n\n\t\t\tvar path = d3.geoPath()\n\t\t\t\t.projection(projection);\n\n\t\t\tvar country = svg1.selectAll(\"path\")\n\t\t\t\t.data(json.features) //data join with features\n\t\t\t\t.enter()\n\n\t\t\tvar div = d3.select(\"body\").append(\"div\")\n\t\t\t\t.attr(\"class\", \"tooltip\")\n\t\t\t\t.style(\"opacity\", 0);\n\n\t\t\tcountry.append(\"path\")\n\t\t\t\t.attr('class', 'country')\n\t\t\t\t.attr(\"fill\", \"#E5E3E3\")\n\t\t\t\t// .attr(\"stroke\", \"#404244\")\n\t\t\t\t.attr(\"stroke\", \"grey\")\n\t\t\t\t.attr(\"stroke-width\", 0.5)\n\t\t\t\t.attr(\"d\", path)\n\t\t\t\t// .attr('id','tooltip')\n\t\t\t\t.on(\"mouseover\", (d) => {\n\t\t\t\t\tdiv.style(\"opacity\", .9)\n\t\t\t\t\t\t.style('z-index',10)\n\n\t\t\t\t\tdiv.html(this.props.year + \" \" + d.properties['name'] + \"<br>\"  + this.props.trade + \" Value:\" + this.convert(d.properties[year + '_' + trade]))\t\n\t\t\t\t})\n\t\t\t\t.on(\"mousemove\", function () {\n\t\t\t\t\tdiv.style(\"left\", (d3.event.pageX + 10) + \"px\")\n\t\t\t\t\t\t.style(\"top\", (d3.event.pageY - 10) + \"px\")\n\t\t\t\t})\n\t\t\t\t.on(\"mouseout\", function () {\n\t\t\t\t\tdiv.style(\"opacity\", 0)\n\t\t\t\t\t\t.style('z-index',-10)\n\t\t\t\t});\n\n\t\t\tconsole.log(this.props)\n\t\t\tvar year = this.props.year\n\t\t\tvar trade = this.props.trade\n\t\t\tsvg1.selectAll('.country')\n\t\t\t\t.attr('fill', function (d) { return d.properties[year + '_' + trade] ? colorScale(d.properties[year + '_' + trade]) : '#E5E3E3' })\n\n\t\t\tvar g = svg1.append(\"g\").attr('id', 'legend_group')\n\n\t\t\tvar unit = Math.min(height *0.04,width*0.03)\n\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit/2)\n\t\t\t\t.attr('y', height*0.7 + 4*unit)\n\t\t\t\t.attr('height', unit)\n\t\t\t\t.attr('width', unit)\n\t\t\t\t.attr('fill', 'lightyellow')\n\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit/2)\n\t\t\t\t.attr('y', height*0.7 + 3*unit)\n\t\t\t\t.attr('height', unit)\n\t\t\t\t.attr('width', unit)\n\t\t\t\t.attr('fill', '#f2ffcc')\n\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit/2)\n\t\t\t\t.attr('y', height*0.7 + 2*unit)\n\t\t\t\t.attr('height', unit)\n\t\t\t\t.attr('width', unit)\n\t\t\t\t.attr('fill', 'rgb(147,213,170)')\n\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit/2)\n\t\t\t\t.attr('y', height*0.7 + 1*unit)\n\t\t\t\t.attr('height', unit)\n\t\t\t\t.attr('width', unit)\n\t\t\t\t.attr('fill', 'rgb(67,173,180)')\n\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit/2)\n\t\t\t\t.attr('y', height*0.7 + 0*unit)\n\t\t\t\t.attr('height', unit)\n\t\t\t\t.attr('width', unit)\n\t\t\t\t.attr('fill', 'rgb(30,114,171)')\n\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit*1.8)\n\t\t\t\t.attr('y', height*0.7 + unit*4.7)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('less than $ 10M')\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit*1.8)\n\t\t\t\t.attr('y', height*0.7 + unit*3.7)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('$ 100M')\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit*1.8)\n\t\t\t\t.attr('y', height*0.7 + unit*2.7)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('$ 400M')\n\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit*1.8)\n\t\t\t\t.attr('y', height*0.7 + unit*1.7)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('$ 800M')\n\t\t\t\t\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit*1.8)\n\t\t\t\t.attr('y', height*0.7 + unit*0.7)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('more than $ 1B')\n\n\t\t}.bind(this))\n\t\t\n\t}\n\n\tupDate() {\n\n\t\tvar data = this.state.data\n\t\tvar json = this.state.json\n\t\tvar margin = { top: 20, left: 0, bottom: 0, right: 0 },\n\t\t\t\twidth = +d3.select('#worldmap').style('width').slice(0, -2) - margin.left - margin.right,\n            \theight = +d3.select('#worldmap').style('height').slice(0, -2) - margin.top - margin.bottom;\n        \n\t\tvar svg = d3.select('#worldmap-svg')\n\t\t\t\t\t.attr(\"width\", width + margin.left + margin.right)\n\t\t\t\t\t.attr(\"height\", height + margin.top + margin.bottom)\n\n\t\td3.select('#worldmap-g')\n\t\t\t.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n\n\t\tvar trade = this.props.trade\n\t\tvar scaleData = data.filter(d => d.Trade == trade && d.Year == this.props.year)\n\n\t\tif (trade == 'Export') {\n\t\t\tvar colorScale = d3.scaleSequential(d3.interpolateYlGnBu)\n\t\t\t\t.domain([d3.min(scaleData, function (d) { return d[Object.keys(d)[3]] }), d3.max(scaleData, function (d) { return d[Object.keys(d)[3]] })])\n\t\t}\n\t\telse {\n\t\t\tvar colorScale = d3.scaleSequential(d3.interpolateOrRd)\n\t\t\t\t.domain([d3.min(scaleData, function (d) { return d[Object.keys(d)[3]] }), d3.max(scaleData, function (d) { return d[Object.keys(d)[3]] })])\n\t\t\t\n\t\t\t}\n\t\tvar year = this.props.year\n\n\t\tvar projection = d3.geoMercator()\n\t\t\t\t.fitSize([width, height], json); //fit svg size!\n\n\t\tvar path = d3.geoPath()\n\t\t\t.projection(projection);\n\n\t\tsvg.selectAll('.country')\n\t\t\t.attr(\"d\", path)\n\t\t\t.attr('fill', function (d) { return d.properties[year + '_' + trade] ? colorScale(d.properties[year + '_' + trade]) : '#E5E3E3' })\n\n\t\tvar unit = Math.min(height *0.04,width*0.03)\n\n\t\tif (trade == 'Export') {\n\t\t\tvar g = d3.select('#legend_group');\n\t\t\tg.selectAll('*').remove();\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit/2)\n\t\t\t\t.attr('y', height*0.7 + 4*unit)\n\t\t\t\t.attr('height', unit)\n\t\t\t\t.attr('width', unit)\n\t\t\t\t.attr('fill', 'lightyellow')\n\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit/2)\n\t\t\t\t.attr('y', height*0.7 + 3*unit)\n\t\t\t\t.attr('height', unit)\n\t\t\t\t.attr('width', unit)\n\t\t\t\t.attr('fill', '#f2ffcc')\n\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit/2)\n\t\t\t\t.attr('y', height*0.7 + 2*unit)\n\t\t\t\t.attr('height', unit)\n\t\t\t\t.attr('width', unit)\n\t\t\t\t.attr('fill', 'rgb(147,213,170)')\n\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit/2)\n\t\t\t\t.attr('y', height*0.7 + 1*unit)\n\t\t\t\t.attr('height', unit)\n\t\t\t\t.attr('width', unit)\n\t\t\t\t.attr('fill', 'rgb(67,173,180)')\n\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit/2)\n\t\t\t\t.attr('y', height*0.7 + 0*unit)\n\t\t\t\t.attr('height', unit)\n\t\t\t\t.attr('width', unit)\n\t\t\t\t.attr('fill', 'rgb(30,114,171)')\n\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit*1.8)\n\t\t\t\t.attr('y', height*0.7 + unit*4.7)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('less than $ 10M')\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit*1.8)\n\t\t\t\t.attr('y', height*0.7 + unit*3.7)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('$ 100M')\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit*1.8)\n\t\t\t\t.attr('y', height*0.7 + unit*2.7)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('$ 400M')\n\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit*1.8)\n\t\t\t\t.attr('y', height*0.7 + unit*1.7)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('$ 800M')\n\t\t\t\t\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit*1.8)\n\t\t\t\t.attr('y', height*0.7 + unit*0.7)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('more than $ 1B')\n\t\t}\n\t\telse {\n\t\t\tvar g = d3.select('#legend_group');\n\t\t\tg.selectAll('*').remove();\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit/2)\n\t\t\t\t.attr('y', height*0.7 + 4*unit)\n\t\t\t\t.attr('height', unit)\n\t\t\t\t.attr('width', unit)\n\t\t\t\t.attr('fill', 'rgb(255,243,226)')\n\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit/2)\n\t\t\t\t.attr('y', height*0.7 + 3*unit)\n\t\t\t\t.attr('height', unit)\n\t\t\t\t.attr('width', unit)\n\t\t\t\t.attr('fill', 'rgb(253,232,200)')\n\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit/2)\n\t\t\t\t.attr('y', height*0.7 + 2*unit)\n\t\t\t\t.attr('height', unit)\n\t\t\t\t.attr('width', unit)\n\t\t\t\t.attr('fill', 'rgb(252,205,149)')\n\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit/2)\n\t\t\t\t.attr('y', height*0.7 + 1*unit)\n\t\t\t\t.attr('height', unit)\n\t\t\t\t.attr('width', unit)\n\t\t\t\t.attr('fill', 'rgb(241,102,66)')\n\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit/2)\n\t\t\t\t.attr('y', height*0.7 + 0*unit)\n\t\t\t\t.attr('height', unit)\n\t\t\t\t.attr('width', unit)\n\t\t\t\t.attr('fill', 'rgb(106,0,2)')\n\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit*1.8)\n\t\t\t\t.attr('y', height*0.7 + unit*4.7)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('less than $ 10M')\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit*1.8)\n\t\t\t\t.attr('y', height*0.7 + unit*3.7)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('$ 100M')\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit*1.8)\n\t\t\t\t.attr('y', height*0.7 + unit*2.7)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('$ 400M')\n\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit*1.8)\n\t\t\t\t.attr('y', height*0.7 + unit*1.7)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('$ 800M')\n\t\t\t\t\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', unit*1.8)\n\t\t\t\t.attr('y', height*0.7 + unit*0.7)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('more than $ 1B')\n\t\t\t\n\t\t\t/*g.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', 10)\n\t\t\t\t.attr('y', 375)\n\t\t\t\t.attr('height', '20')\n\t\t\t\t.attr('width', '20')\n\t\t\t\t.attr('fill', 'rgb(255,243,226)')\n\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', 10)\n\t\t\t\t.attr('y', 355)\n\t\t\t\t.attr('height', '20')\n\t\t\t\t.attr('width', '20')\n\t\t\t\t.attr('fill', 'rgb(253,232,200)')\n\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', 10)\n\t\t\t\t.attr('y', 335)\n\t\t\t\t.attr('height', '20')\n\t\t\t\t.attr('width', '20')\n\t\t\t\t.attr('fill', 'rgb(252,205,149)')\n\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', 10)\n\t\t\t\t.attr('y', 315)\n\t\t\t\t.attr('height', '20')\n\t\t\t\t.attr('width', '20')\n\t\t\t\t.attr('fill', 'rgb(241,102,66)')\n\n\t\t\tg.append('rect')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('class', 'legend')\n\t\t\t\t.attr('x', 10)\n\t\t\t\t.attr('y', 295)\n\t\t\t\t.attr('height', '20')\n\t\t\t\t.attr('width', '20')\n\t\t\t\t.attr('fill', 'rgb(106,0,2)')\n\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('x', 40)\n\t\t\t\t.attr('y', 392)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('less than $ 1M')\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('x', 40)\n\t\t\t\t.attr('y', 370)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('$ 200M')\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('x', 40)\n\t\t\t\t.attr('y', 350)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('$ 500M')\n\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('x', 40)\n\t\t\t\t.attr('y', 330)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('$ 1B')\n\n\t\t\tg.append('text')\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('x', 40)\n\t\t\t\t.attr('y', 309)\n\t\t\t\t.attr('font-size', '12')\n\t\t\t\t.text('more than $ 1B')*/\n\t\t}\n\n\t}\n\tconvert(labelValue) {\n\n\t\t// Nine Zeroes for Billions\n\t\treturn Math.abs(Number(labelValue)) >= 1.0e+9\n\n\t\t\t? Math.round((Math.abs(Number(labelValue)) / 1.0e+9) * 10) / 10 + \"B\"\n\t\t\t// Six Zeroes for Millions \n\t\t\t: Math.abs(Number(labelValue)) >= 1.0e+6\n\n\t\t\t? Math.round((Math.abs(Number(labelValue)) / 1.0e+6) * 10) / 10 + \"M\"\n\t\t\t// Three Zeroes for Thousands\n\t\t\t: Math.abs(Number(labelValue)) >= 1.0e+3\n\n\t\t\t? Math.round((Math.abs(Number(labelValue)) / 1.0e+3) * 10) / 10 + \"K\"\n\n\t\t\t: Math.abs(Number(labelValue));\n\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div id='worldmap'>\n\t\t\t\t\n\t\t\t\t{/*<h6 id='sub-title1'>siuhglsdfjjlf lrguhalsj gklaghjsjklf</h6>*/}\n\t\t\t\t{/*<h6 id='sub-title2'>fgskdjfgnlsdkfjng gsldkjfng</h6>*/}\n\n\t\t\t\t\n\t\t\t</div>\n\n\n\n\t\t)\n\t}\n\n}","import React, { Component } from 'react';\nimport * as d3 from 'd3'\nimport json from './data/world.json'\nimport csv from './data/world_trade_value.csv'\n\nexport default class WorldMap extends Component{\n\tconstructor(props){\n        super(props);\n        this.state={\n        \tdata:{}\n        }\n        this.drawChart = this.drawChart.bind(this);\n        this.upDate = this.upDate.bind(this);\n    }\n\n    shouldComponentUpdate(nextProps){\n        if(this.props.trade !== nextProps.trade || this.props.year !== nextProps.year){\n            return true;\n        }\n        else{\n            return false;\n        }\n    }\n\n\n  \tcomponentDidMount() {\n    \tthis.drawChart();\n    \twindow.addEventListener('resize', this.upDate)\n  \t}\n  \tcomponentDidUpdate(){\n  \t\tthis.upDate();\n  \t}\n\n  \tdrawChart() {\n\n\t\td3.csv(csv,function(d){\n\t\t\treturn {\n\t\t\t\tCountry : d.Country,\n\t\t\t\tYear : +d.Year,\n\t\t\t\tTrade : d.Trade,\n\t\t\t\tValue : +d.Value\n\n\t\t\t}\n\t\t}.bind(this)).then(function(data){\n\t\t\tthis.setState({\n\t\t\t\tdata: data\n\t\t\t}) \n\n\t\t\t// var margin = { top: 20, left: 0, bottom: 0, right: 0 };\n\t\t\t// var width = 150 - margin.left - margin.right;\n\t\t\t// var height = 520 - margin.top - margin.bottom;\n\t\t\tvar margin = { top: 50, left: 0, bottom: 0, right: 0 },\n\t\t\t\twidth = +d3.select('#worldmap-info-container').style('width').slice(0, -2)*0.4 - margin.left - margin.right,\n            \theight = +d3.select('#worldmap-info-container').style('height').slice(0, -2) - margin.top - margin.bottom;\n        \n\n\n\t\t\tvar scaleData = data.filter(d=>d.Trade == this.props.trade && d.Year == this.props.year);\n\n\t\t\tvar colorScale = d3.scaleSequential(d3.interpolateYlGnBu)\n            \t.domain([d3.min(scaleData,function(d){ return d[Object.keys(d)[3]]}), d3.max(scaleData,function(d){return d[Object.keys(d)[3]]})])\n\n\t  \t\tvar svg = d3.select(\"#ranking\").append(\"svg\")\n\t\t\t    .attr(\"width\", width + margin.left + margin.right)\n\t\t\t    .attr(\"height\", height + margin.top + margin.bottom)\n\t\t\t    .attr('id','ranking-svg-svg')\n\t\t\t    .append('g')\n\t  \t\t\t.attr('id','ranking-svg')\n\t\t\t\t.attr('transform','translate(' +margin.left+ ','+margin.top+')')\n\t\t\t/*var svg = d3.select(\"#ranking\").append(\"div\")\n\t\t\t    .attr(\"width\", width + margin.left + margin.right)\n\t\t\t    .attr(\"height\", height + margin.top + margin.bottom)\n\t\t\t    .append('g')\n\t  \t\t\t.attr('id','ranking-svg')\n\t\t\t\t.attr('transform','translate(' +margin.left+ ',' +margin.top+ ')')*/\n\n\t\t\tvar filteredData = data.filter(d=>d.Trade == this.props.trade && d.Year == this.props.year);\n\n\t\t\t/*svg.selectAll('rect')\n\t\t\t\t.data(filteredData.sort((a,b)=>{ return b.Value-a.Value }).slice(0,9),function(d){ return d.Country })\n\t\t\t\t.enter()\n\t\t\t\t.append('rect')\n\t\t\t\t.attr('x',0)\n\t\t\t\t.attr('y',function(d,i){ return i*30 })\n\t\t\t\t.attr('width',100)\n\t\t\t\t.attr('height',30)\n\t\t\t\t.attr('fill','blue')*/\n\n\t\t\t/*svg.selectAll('#country')\n\t\t\t\t.data(filteredData.sort((a,b)=>{ return b.Value-a.Value }).slice(0,12),function(d){ return d.Country })\n\t\t\t\t.enter()\n\t\t\t\t.append('div')\n\t\t\t\t.attr('width',100)\n\t\t\t\t.attr('height',40)\n\t\t\t\t.attr('background','blue')*/\n\t\t\tvar unit = height/10.8\n\t\t\tsvg.selectAll('circle')\n\t\t\t\t.data(filteredData.sort((a,b)=>{ return b.Value-a.Value }).slice(0,10),function(d){ return d.Country })\n\t\t\t\t.enter()\n\t\t\t\t.append('circle')\n\t\t\t\t.attr('cx',15)\n\t\t\t\t.attr('cy',function(d,i){ return i*unit })\n\t\t\t\t.attr('r',(unit/2)<10?(unit/2):10)\n\t\t\t\t.attr('fill',function(d){ return colorScale(d.Value)} )\n\n\t\t\tsvg.selectAll('text')\n\t\t\t\t.data(filteredData.sort((a,b)=>{ return b.Value-a.Value }).slice(0,10),function(d){ return d.Country })\n\t\t\t\t.enter()\n\t\t\t\t.append('text')\n\t\t\t\t.attr('x',unit*2/3)\n\t\t\t\t.attr('y',function(d,i){ return i*unit - 10})\n\t\t\t\t.attr(\"dy\", \"1em\")\n\t\t\t\t.attr(\"id\",\"country-name\")\n\t\t\t\t//.attr('fill','#e0e0e0')\n\t\t\t\t.text(function(d){ return d.Country });\n\t\t\t/*svg.selectAll('div')\n\t\t\t\t.data(filteredData.sort((a,b)=>{ return b.Value-a.Value }).slice(0,12),function(d){ return d.Country })\n\t\t\t\t.enter()\n\t\t\t\t.append('div')\n\t\t\t\t.style('position','absolute')\n\t\t\t\t.style('top', function(d,i){ return i*40 + 20 })\n\t\t\t\t.style('width', 100 + \"px\")\n\t\t\t\t.style('height', 40 + \"px\")\n\t\t\t\t.style('background-color', 'blue')*/\n\n\n\t\t\t\n\t\t}.bind(this))\n\t}\n\n\tupDate(){\n\t\tvar margin = { top: 50, left: 0, bottom: 0, right: 0 },\n\t\t\twidth = +d3.select('#worldmap-info-container').style('width').slice(0, -2)*0.4 - margin.left - margin.right,\n        \theight = +d3.select('#worldmap-info-container').style('height').slice(0, -2) - margin.top - margin.bottom;\n    \tvar unit = height/10.8\n\n\t\tvar data = this.state.data\n\n\t\td3.select('#ranking-svg-svg')\n\t\t\t.attr(\"width\", width + margin.left + margin.right)\n\t\t\t.attr(\"height\", height + margin.top + margin.bottom)\n\n\t\tvar svg = d3.select('#ranking-svg')\n\n\t\tvar trade = this.props.trade\n\n\t\tvar filteredData = data.filter(d=>d.Trade == this.props.trade && d.Year == this.props.year);\n\n\t\tvar circle = svg.selectAll('circle')\n        \t.data(filteredData.sort((a,b)=>{ return b.Value-a.Value }).slice(0,10),function(d){ return d.Country })\n\t\t\n\t\tvar text = svg.selectAll('text')\n        \t.data(filteredData.sort((a,b)=>{ return b.Value-a.Value }).slice(0,10),function(d){ return d.Country })\n\t\t\n\t\tvar scaleData = data.filter(d=>d.Trade == trade && d.Year == this.props.year)\n\n\t\tif(trade=='Export'){\n\t\t\tvar colorScale = d3.scaleSequential(d3.interpolateYlGnBu)\n\t        \t.domain([d3.min(scaleData,function(d){ return d[Object.keys(d)[3]]}), d3.max(scaleData,function(d){return d[Object.keys(d)[3]]})])\n        }\n        else{\n        \tvar colorScale = d3.scaleSequential(d3.interpolateOrRd)\n\t        \t.domain([d3.min(scaleData,function(d){ return d[Object.keys(d)[3]]}), d3.max(scaleData,function(d){return d[Object.keys(d)[3]]})])\n        }\n\n\t\tcircle.transition()\n\t\t\t.duration(500)\n\t\t\t.attr('cx',15)\n\t\t\t.attr('cy',function(d,i){ return i*unit })\n\t\t\t.attr('r',(unit/2)<10?(unit/2):10)\n\t\t\t.attr('fill',function(d){ return colorScale(d.Value)} )\n\n\t\tcircle.enter()\n    \t\t.append('circle')\n    \t\t.transition()\n\t\t\t.duration(500) \n\t\t\t.attr('cx',15)\n\t\t\t.attr('cy',function(d,i){ return i*unit })\n\t\t\t.attr('r',(unit/2)<10?(unit/2):10)\n\t\t\t.attr('fill',function(d){ return colorScale(d.Value)} )\n\n\t\ttext.transition()\n\t\t\t.duration(500)\n\t\t\t.attr('x',unit*2/3)\n\t\t\t.attr('y',function(d,i){ return i*unit - 10})\n\t\t\t.attr(\"dy\", \"1em\")\n\t\t\t.attr(\"id\",\"country-name\")\n\t\t\t//.attr('fill','#e0e0e0')\n\t\t\t.text(function(d){ return d.Country });\n\n\t\ttext.enter()\n    \t\t.append('text')\n    \t\t.transition()\n\t\t\t.duration(500) \n\t\t\t.attr('x',unit*2/3)\n\t\t\t.attr('y',function(d,i){ return i*unit - 10})\n\t\t\t.attr(\"dy\", \"1em\")\n\t\t\t.attr(\"id\",\"country-name\")\n\t\t\t//.attr('fill','#e0e0e0')\n\t\t\t.text(function(d){ return d.Country });\n\n\n\t\t\t/*attr('x',0)\n\t\t\t.attr('y',function(d,i){ return i*30 })\n\t\t\t.attr(\"dy\", \"1em\")\n\t\t\t.attr(\"id\",\"country-name\")\n\t\t\t.text(function(d){ return d.Country });*/\n\n\t\t\tcircle.exit()\n\t\t\t\t.remove();\n\n\t\t\ttext.exit()\n\t\t\t\t.remove();\n    }\n\n\trender(){\n\t\treturn(\n\t\t\t<div id='ranking'></div>\n\t\t)\n\t}\n\n}","import React, { Component } from 'react';\nimport * as d3 from 'd3'\nimport json from './data/world.json'\nimport csv from './data/world_trade_value.csv'\n\nexport default class SparkLines extends Component{\n\tconstructor(props){\n        super(props);\n        this.state={\n        \tdata:{}\n        }\n        this.drawChart = this.drawChart.bind(this);\n        this.drawSparkLine = this.drawSparkLine.bind(this);\n        this.upDate = this.upDate.bind(this);\n    }\n\n\n    shouldComponentUpdate(nextProps){\n        if(this.props.trade !== nextProps.trade || this.props.year !== nextProps.year){\n            return true;\n        }\n        else{\n            return false;\n        }\n    }\n\n  \tcomponentDidMount() {\n    \tthis.drawChart();\n    \twindow.addEventListener('resize', ()=>{\n    \t\tconsole.log('sparkline resize')\n    \t\tvar data = this.state.data\n\t  \t\tvar filteredData = data.filter(d=>d.Trade == this.props.trade && d.Year == this.props.year).sort((a,b)=>{ return b.Value-a.Value }).slice(0,12);\n\t  \t\tfilteredData.forEach((target, i)=>{\n\t\t\t\tvar temp = data.filter(d=> d.Country == target.Country && d.Trade == this.props.trade)\n\t\t\t\tthis.upDate(temp,i);\n\t\t\t})\n    \t})\n  \t}\n  \tcomponentDidUpdate(){\n  \t\tvar data = this.state.data\n  \t\tvar filteredData = data.filter(d=>d.Trade == this.props.trade && d.Year == this.props.year).sort((a,b)=>{ return b.Value-a.Value }).slice(0,12);\n  \t\tfilteredData.forEach((target, i)=>{\n\t\t\tvar temp = data.filter(d=> d.Country == target.Country && d.Trade == this.props.trade)\n\t\t\tthis.upDate(temp,i);\n\t\t})\n  \t}\n\n  \tdrawChart() {\n\n\t\td3.csv(csv,function(d){\n\t\t\treturn {\n\t\t\t\tCountry : d.Country,\n\t\t\t\tYear : +d.Year,\n\t\t\t\tTrade : d.Trade,\n\t\t\t\tValue : +d.Value\n\n\t\t\t}\n\t\t}.bind(this)).then(function(data){\n\t\t\tthis.setState({\n\t\t\t\tdata: data\n\t\t\t}) \n\n\t\t\tvar filteredData = data.filter(d=>d.Trade == this.props.trade && d.Year == this.props.year).sort((a,b)=>{ return b.Value-a.Value }).slice(0,10);\n\n\t\t\tvar margin = { top: 50, left: 0, bottom: 0, right: 0 },\n\t\t\twidth = +d3.select('#worldmap-info-container').style('width').slice(0, -2)*0.3 - margin.left - margin.right,\n        \theight = +d3.select('#worldmap-info-container').style('height').slice(0, -2) - margin.top - margin.bottom;\n        \tconsole.log('draw',height)\n        \tvar unit = height/10.8\n\n\n\t\t\t/*var div = d3.select(\"#sparklines-container\").append(\"div\")\n\t\t\t    .style(\"width\", width + margin.left + margin.right + 'px')\n\t\t\t    .style(\"height\", height + margin.top + margin.bottom + 'px')\n\t\t\t    .attr(\"id\",'sparklines')\n\t\t\t    \n\t\t\t\n\t\t\tdiv.selectAll('rect')\n\t\t\t\t.data(filteredData,function(d){ return d.Country })\n\t\t\t\t.enter()\n\t\t\t\t.append('div')\n\t\t\t\t.attr('id',function(d,i){ return 'div' + i })\n\t\t\t\t.style(\"height\", unit + 'px')\n\t\t\t\t.style(\"height\", width + 'px')\n\t\t\t\t//.text(function(d){ return d.Country })\n\n\t\t\tfilteredData.forEach((target,i)=>{\n\t\t\t\tvar temp = data.filter(d=> d.Country == target.Country && d.Trade == this.props.trade)\n\t\t\t\t//console.log(temp,target.Country)\n\t\t\t\tthis.drawSparkLine(temp,i)\n\t\t\t})*/\n\n\t\t\tvar svg = d3.select(\"#sparklines-container\")\n\t\t\t\t.append(\"svg\")\n\t\t\t    .style(\"width\", width + margin.left + margin.right)\n\t\t\t    .style(\"height\", height + margin.top + margin.bottom)\n\t\t\t    .attr(\"id\",'sparklines')\n\t\t\t    .append('g')\n\t  \t\t\t.attr('id','sparklines-svg')\n\t\t\t\t.attr('transform','translate(' +margin.left+ ','+margin.top+')')\n\n\t\t\tfilteredData.forEach((target,i)=>{\n\t\t\t\tvar temp = data.filter(d=> d.Country == target.Country && d.Trade == this.props.trade)\n\t\t\t\t//console.log(temp,target.Country)\n\t\t\t\tthis.drawSparkLine(temp,i)\n\t\t\t})\n\t\t\t\n\n\t\t\t/*var svg = d3.select(\"#sparklines-container\").append(\"svg\")\n\t\t\t    .style(\"width\", width + margin.left + margin.right + 'px')\n\t\t\t    .style(\"height\", height + margin.top + margin.bottom + 'px')\n\t\t\t    .append('g')\n\t  \t\t\t.attr('id','sparklines')\n\t\t\t\t.attr('transform','translate(' +margin.left+ ',0)')*/\n\n\t\t\t/*var x = d3.scaleOrdinal().domain([2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016]).range([0, 150]);\n\t\t\tconsole.log(d3.extent(filteredData,function(d){ return d[Object.keys(d)[3]]}))\n\t\t\tvar y = d3.scaleLinear().domain(d3.extent(filteredData,function(d){ return d[Object.keys(d)[3]]})).range([0, 30]);*/\n\n\n\t\t\t/*var svg = d3.select(\"#sparklines\").append(\"svg\")\n\t\t\t    .attr(\"width\", width + margin.left + margin.right)\n\t\t\t    .attr(\"height\", height + margin.top + margin.bottom)\n\t\t\t    .append('g')\n\t  \t\t\t.attr('id','ranking-svg')\n\t\t\t\t.attr('transform','translate(' +margin.left+ ',' +margin.top+ ')')*/\n\t\t\t    \n\n\t\t\t\n\n\n\t\t\t\n\t\t}.bind(this))\n\t}\n\n\tdrawSparkLine(data,i){\n\t\t//console.log(data)\n\t\tvar margin = { top: 50, left: 0, bottom: 0, right: 0 },\n\t\t\twidth = +d3.select('#worldmap-info-container').style('width').slice(0, -2)*0.3 - margin.left - margin.right,\n        \theight = +d3.select('#worldmap-info-container').style('height').slice(0, -2) - margin.top - margin.bottom;\n        \n       \tconsole.log('draw spark line',height)\n        d3.select('#sparklines')\n        \t.style(\"width\", width + margin.left + margin.right)\n\t\t\t.style(\"height\", height + margin.top + margin.bottom)\n       \tvar unit = height/10.8\n\n       \tvar xScale = d3.scalePoint().domain([2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016]).range([5, width-5]);\n\t\tvar yScale = d3.scaleLinear().domain(d3.extent(data,function(d){ return d.Value})).range([(i+0.5)*unit-5, (i-0.5)*unit+5]);\n\n       \tvar svg = d3.select('#sparklines-svg')\n\n       \tvar line = d3.line()\n\t\t    .x(function(d) { return xScale(d.Year); }) \n\t\t    .y(function(d) { return yScale(d.Value); })\n\t\t    .curve(d3.curveMonotoneX)\n\n\t\tvar value = data.filter(d=>d.Year == this.props.year)[0].Value\n       \tsvg.append(\"path\")\n\t\t    .datum(data)\n\t\t    .attr(\"id\", \"sparkline-\"+i)\n\t\t    .attr(\"d\", line)\n\t\t    .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 0.5)\n            .attr(\"fill\", \"none\")\n\n        var div = d3.select('.tooltip')\n        svg.append('circle')\n\t\t\t.attr('cx',xScale(this.props.year))\n\t\t\t.attr('cy',yScale(value))\n\t\t\t.attr('id',\"circle-\"+i)\n\t\t\t.attr('r',2)\n\t\t\t.attr('fill','red')\n\t\t\t.on(\"mouseover\", (d) => {\n\t\t\t\t\n\t\t\t\tdiv.style(\"opacity\", .9)\n\t\t\t\t\t.style('z-index',10)\n\t\t\t\tdiv.html(this.props.year)\n\t\t\t\t// data.filter(d=>d.Year == this.props.year)[0].Value\t\n\t\t\t})\n\t\t\t.on(\"mousemove\", function () {\n\t\t\t\tdiv.style(\"left\", (d3.event.pageX + 10) + \"px\")\n\t\t\t\t\t.style(\"top\", (d3.event.pageY - 10) + \"px\")\n\t\t\t})\n\t\t\t.on(\"mouseout\", function () {\n\t\t\t\tdiv.style(\"opacity\", 0)\n\t\t\t\t\t.style('z-index',-10)\n\t\t\t});\n\t\t/*var svg = d3.select('#div'+i)\n\t\t\t.append('svg')\n\t\t\t.attr('width',width)\n\t\t\t.attr('height',unit)\n\t\t\t.attr('id','svg' + i)\n\n\t\tvar value = data.filter(d=>d.Year == this.props.year)[0].Value\n\n\t\tvar xScale = d3.scalePoint().domain([2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016]).range([5, width-5]);\n\t\tvar yScale = d3.scaleLinear().domain(d3.extent(data,function(d){ return d.Value})).range([unit-5, 5]);\n\n\t\t//console.log(d3.extent(data,function(d){ return d.Value}))\n\t\t\n\t\tvar line = d3.line()\n\t\t    .x(function(d) { return xScale(d.Year); }) \n\t\t    .y(function(d) { return yScale(d.Value); })\n\t\t    .curve(d3.curveMonotoneX)\n\n\t\td3.select('#sparklines').style(\"height\", height + 'px').style('width',width + 'px')\n\t\td3.select('#div'+i).style(\"height\", unit + 'px').style('width',width + 'px')\n\t\tsvg.append(\"path\")\n\t\t    .datum(data)\n\t\t    .attr(\"id\", \"sparkline-\"+i)\n\t\t    .attr(\"d\", line)\n\t\t    .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 0.5)\n            .attr(\"fill\", \"none\")\n   \n        var div = d3.select('.tooltip')\n        svg.append('circle')\n\t\t\t.attr('cx',xScale(this.props.year))\n\t\t\t.attr('cy',yScale(value))\n\t\t\t.attr('r',2)\n\t\t\t.attr('fill','red')\n\t\t\t.on(\"mouseover\", (d) => {\n\t\t\t\t\n\t\t\t\tdiv.style(\"opacity\", .9)\n\t\t\t\t\t.style('z-index',10)\n\t\t\t\tdiv.html(this.props.year)\n\t\t\t\t// data.filter(d=>d.Year == this.props.year)[0].Value\t\n\t\t\t})\n\t\t\t.on(\"mousemove\", function () {\n\t\t\t\tdiv.style(\"left\", (d3.event.pageX + 10) + \"px\")\n\t\t\t\t\t.style(\"top\", (d3.event.pageY - 10) + \"px\")\n\t\t\t})\n\t\t\t.on(\"mouseout\", function () {\n\t\t\t\tdiv.style(\"opacity\", 0)\n\t\t\t\t\t.style('z-index',-10)\n\t\t\t});*/\n\t\n\t}\n\n\tupDate(data,i){\n\n\t\tvar margin = { top: 50, left: 0, bottom: 0, right: 0 },\n\t\t\twidth = +d3.select('#worldmap-info-container').style('width').slice(0, -2)*0.3 - margin.left - margin.right,\n        \theight = +d3.select('#worldmap-info-container').style('height').slice(0, -2) - margin.top - margin.bottom;\n       \tconsole.log(width,height)\n       \tvar unit = height/10.8\n\t\t//console.log(data,i)\n\t\tvar value = data.filter(d=>d.Year == this.props.year)[0].Value\n\t\tvar xScale = d3.scalePoint().domain([2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016]).range([5, width-5]);\n\t\tvar yScale = d3.scaleLinear().domain(d3.extent(data,function(d){ return d.Value})).range([(i+0.5)*unit-5, (i-0.5)*unit+5]);\n\n\t\t//console.log(d3.extent(data,function(d){ return d.Value}))\n\t\td3.select('#sparklines')\n\t\t\t.style(\"width\", width + margin.left + margin.right)\n\t\t\t.style(\"height\", height + margin.top + margin.bottom)\n\n\t\tvar line = d3.line()\n\t\t    .x(function(d) { return xScale(d.Year); }) \n\t\t    .y(function(d) { return yScale(d.Value); })\n\t\t    .curve(d3.curveMonotoneX)\n\n\t\t/*var svg = d3.select('#svg'+i)\n\t\t\t\t\t.attr('width',width)\n\t\t\t\t\t.attr('height',unit)\n\n\t\td3.select('#sparklines').style(\"height\", height + 'px').style('width',width + 'px')\n\t\td3.select('#div'+i).style(\"height\", unit + 'px').style('width',width + 'px')*/\n\n\t\td3.select('#sparkline-'+i)\n\t\t\t.datum(data)\n\t\t    //.attr(\"id\", \"sparkline-\"+i)\n\t\t    .transition() \n\t\t    .duration(500)\n\t\t    .attr(\"d\", line)\n\t\t    .attr(\"stroke\", \"black\")\n            .attr(\"stroke-width\", 0.5)\n            .attr(\"fill\", \"none\")\n\n        d3.select('#circle-'+i)\n        \t.transition()\n\t\t    .duration(500)\n\t\t\t.attr('cx',xScale(this.props.year))\n\t\t\t.attr('cy',yScale(value))\n\t\t\t.attr('r',2)\n\t\t\t.attr('fill','red')\n\t\t\n    }\n\n\trender(){\n\t\treturn(\n\t\t\t<div id='sparklines-container'>\n\n\t\t\t</div>\n\t\t)\n\t}\n\n}","import React, { Component } from 'react';\nimport * as d3 from 'd3'\nimport json from './data/world.json'\nimport csv from './data/world_trade_value.csv'\n\nexport default class Value extends Component{\n\tconstructor(props){\n        super(props);\n        this.state={\n        \tdata:{}\n        }\n        this.drawChart = this.drawChart.bind(this);\n        this.upDate = this.upDate.bind(this);\n        this.convert = this.convert.bind(this);\n    }\n\n    shouldComponentUpdate(nextProps){\n        if(this.props.trade !== nextProps.trade || this.props.year !== nextProps.year){\n            return true;\n        }\n        else{\n            return false;\n        }\n    }\n    \n  \tcomponentDidMount() {\n    \tthis.drawChart();\n    \twindow.addEventListener('resize', this.upDate)\n  \t}\n  \tcomponentDidUpdate(){\n  \t\tthis.upDate();\n  \t}\n\n  \tdrawChart() {\n\n\t\td3.csv(csv,function(d){\n\t\t\treturn {\n\t\t\t\tCountry : d.Country,\n\t\t\t\tYear : +d.Year,\n\t\t\t\tTrade : d.Trade,\n\t\t\t\tValue : +d.Value\n\n\t\t\t}\n\t\t}.bind(this)).then(function(data){\n\t\t\tthis.setState({\n\t\t\t\tdata: data\n\t\t\t}) \n\n\t\t\tvar filteredData = data.filter(d=>d.Trade == this.props.trade && d.Year == this.props.year);\n\n\t\t\t/*var margin = { top: 20, left: 0, bottom: 0, right: 0 };\n\t\t\tvar width = 65 - margin.left - margin.right;\n\t\t\tvar height = 520 - margin.top - margin.bottom;*/\n\t\t\tvar margin = { top: 50, left: 0, bottom: 0, right: 0 },\n\t\t\t\twidth = +d3.select('#worldmap-info-container').style('width').slice(0, -2)*0.4 - margin.left - margin.right,\n\t        \theight = +d3.select('#worldmap-info-container').style('height').slice(0, -2) - margin.top - margin.bottom;\n\t    \t\n\t    \tvar unit = height/10.8\n\n\t\t\tvar svg = d3.select(\"#value-container\").append(\"svg\")\n\t\t\t    .attr(\"width\", width + margin.left + margin.right)\n\t\t\t    .attr(\"height\", height + margin.top + margin.bottom)\n\t\t\t    .attr('id','value-svg')\n\t\t\t    .append('g')\n\t  \t\t\t.attr('id','value')\n\t\t\t\t.attr('transform','translate(' +margin.left+ ','+margin.top+')')\n\n\t\t\tsvg.selectAll('text')\n\t\t\t\t.data(filteredData.sort((a,b)=>{ return b.Value-a.Value }).slice(0,10),function(d){ return d.Country })\n\t\t\t\t.enter()\n\t\t\t\t.append('text')\n\t\t\t\t//.attr('x',10)\n\t\t\t\t//.attr('y',function(d,i){ return i*50 + 10})\n\t\t\t\t.attr('x',unit*1/4)\n\t\t\t\t.attr('y',function(d,i){ return i*unit - 10})\n\t\t\t\t.attr('id','value-text')\n\t\t\t\t.attr(\"dy\", \"1em\")\n\t\t\t\t//.attr('fill','#e0e0e0')\n\t\t\t\t.style(\"opacity\",\"0\")\n\t\t\t\t.text(function(d){ return '$ '+ this.convert(d.Value)}.bind(this))\n\t\t\t\t.transition()\n\t\t\t\t.delay(500)\n\t\t\t\t.duration(500/2)\n\t\t\t\t.style(\"opacity\",1);\n\n\t\t}.bind(this))\n\t}\n\n\tupDate(){\n\t\tvar animation = 500\n\n\t\tvar margin = { top: 50, left: 0, bottom: 0, right: 0 },\n\t\t\twidth = +d3.select('#worldmap-info-container').style('width').slice(0, -2)*0.4 - margin.left - margin.right,\n        \theight = +d3.select('#worldmap-info-container').style('height').slice(0, -2) - margin.top - margin.bottom;\n    \t\n    \tvar unit = height/10.8\n\t\tvar data = this.state.data\n\n\t\td3.select('#value-svg')\n\t\t\t.attr(\"width\", width + margin.left + margin.right)\n\t\t\t.attr(\"height\", height + margin.top + margin.bottom)\n\t\tvar svg = d3.select('#value')\n\t\tvar trade = this.props.trade\n\n\t\tvar filteredData = data.filter(d=>d.Trade == this.props.trade && d.Year == this.props.year);\n\n\t\tvar text = svg.selectAll('text')\n        \t.data(filteredData.sort((a,b)=>{ return b.Value-a.Value }).slice(0,10),function(d){ return d.Country })\n\t\t\n\t\tvar scaleData = data.filter(d=>d.Trade == trade && d.Year == this.props.year)\n\n\t\t\n\t\ttext.attr('x',unit*1/4)\n\t\t\t.attr('y',function(d,i){ return i*unit - 10})\n\t\t\t.attr(\"dy\", \"1em\")\n\t\t\t.attr('id','value-text')\n\t\t\t//.attr('fill','#e0e0e0')\n\t\t\t.style(\"opacity\",\"0\")\n\t\t\t.text(function(d){ return '$ '+ this.convert(d.Value) }.bind(this))\n\t\t\t.transition()\n\t\t\t.delay(animation)\n\t\t\t.duration(animation/2)\n\t\t\t.style(\"opacity\",1);\n\n\t\ttext.enter()\n    \t\t.append('text')\n\t\t\t.attr('x',unit*1/4)\n\t\t\t.attr('y',function(d,i){ return i*unit - 10})\n\t\t\t.attr(\"dy\", \"1em\")\n\t\t\t.attr('id','value-text')\n\t\t\t//.attr('fill','#e0e0e0')\n\t\t\t.style(\"opacity\",\"0\")\n\t\t\t.text(function(d){ return '$ '+this.convert(d.Value) }.bind(this))\n\t\t\t.transition()\n\t\t\t.delay(animation)\n\t\t\t.duration(animation/2)\n\t\t\t.style(\"opacity\",1);\n\n\n\t\ttext.exit()\n\t\t\t.remove();\n\t\t\t\n\t\t\n    }\n    convert(labelValue) {\n\n\t    // Nine Zeroes for Billions\n\t    return Math.abs(Number(labelValue)) >= 1.0e+9\n\n\t    ? Math.round((Math.abs(Number(labelValue)) / 1.0e+9)*10)/10 + \"B\"\n\t    // Six Zeroes for Millions \n\t    : Math.abs(Number(labelValue)) >= 1.0e+6\n\n\t    ? Math.round((Math.abs(Number(labelValue)) / 1.0e+6)*10)/10 + \"M\"\n\t    // Three Zeroes for Thousands\n\t    : Math.abs(Number(labelValue)) >= 1.0e+3\n\n\t    ? Math.round((Math.abs(Number(labelValue)) / 1.0e+3)*10)/10 + \"K\"\n\n\t    : Math.abs(Number(labelValue));\n\n\t}\n\n\trender(){\n\t\treturn(\n\t\t\t<div id='value-container'></div>\n\t\t)\n\t}\n\n}","import * as d3 from 'd3'\nexport var Sankey = function() {\n  var sankey = {},\n      nodeWidth = 24,\n      nodePadding = 8,\n      size = [1, 1],\n      nodes = [],\n      links = [];\n  \n  sankey.nodeWidth = function(_) {\n    if (!arguments.length) return nodeWidth;\n    nodeWidth = +_;\n    return sankey;\n  };\n\n  sankey.nodePadding = function(_) {\n    if (!arguments.length) return nodePadding;\n    nodePadding = +_;\n    return sankey;\n  };\n\n  sankey.nodes = function(_) {\n    if (!arguments.length) return nodes;\n    nodes = _;\n    return sankey;\n  };\n\n  sankey.links = function(_) {\n    if (!arguments.length) return links;\n    links = _;\n    return sankey;\n  };\n\n  sankey.size = function(_) {\n    if (!arguments.length) return size;\n    size = _;\n    return sankey;\n  };\n\n  sankey.layout = function(iterations) {\n    computeNodeLinks();\n    computeNodeValues();\n    computeNodeBreadths();\n    computeNodeDepths(iterations);\n    computeLinkDepths();\n    return sankey;\n  };\n\n  sankey.relayout = function() {\n    computeLinkDepths();\n    return sankey;\n  };\n\n  sankey.link = function() {\n    var curvature = .5;\n\n    function link(d) {\n      var x0 = d.source.x + d.source.dx,\n          x1 = d.target.x,\n          xi = d3.interpolateNumber(x0, x1),\n          x2 = xi(curvature),\n          x3 = xi(1 - curvature),\n          y0 = d.source.y + d.sy + d.dy / 2,\n          y1 = d.target.y + d.ty + d.dy / 2;\n      return \"M\" + x0 + \",\" + y0\n           + \"C\" + x2 + \",\" + y0\n           + \" \" + x3 + \",\" + y1\n           + \" \" + x1 + \",\" + y1;\n    }\n\n    link.curvature = function(_) {\n      if (!arguments.length) return curvature;\n      curvature = +_;\n      return link;\n    };\n\n    return link;\n  };\n\n  // Populate the sourceLinks and targetLinks for each node.\n  // Also, if the source and target are not objects, assume they are indices.\n  function computeNodeLinks() {\n    nodes.forEach(function(node) {\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    });\n    links.forEach(function(link) {\n      var source = link.source,\n          target = link.target;\n      if (typeof source === \"number\") source = link.source = nodes[link.source];\n      if (typeof target === \"number\") target = link.target = nodes[link.target];\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    });\n  }\n\n  // Compute the value (size) of each node by summing the associated links.\n  function computeNodeValues() {\n    nodes.forEach(function(node) {\n      node.value = Math.max(\n        d3.sum(node.sourceLinks, value),\n        d3.sum(node.targetLinks, value)\n      );\n    });\n  }\n\n  // Iteratively assign the breadth (x-position) for each node.\n  // Nodes are assigned the maximum breadth of incoming neighbors plus one;\n  // nodes with no incoming links are assigned breadth zero, while\n  // nodes with no outgoing links are assigned the maximum breadth.\n  function computeNodeBreadths() {\n    var remainingNodes = nodes,\n        nextNodes,\n        x = 0;\n\n    while (remainingNodes.length) {\n      nextNodes = [];\n      remainingNodes.forEach(function(node) {\n        node.x = x;\n        node.dx = nodeWidth;\n        node.sourceLinks.forEach(function(link) {\n          if (nextNodes.indexOf(link.target) < 0) {\n            nextNodes.push(link.target);\n          }\n        });\n      });\n      remainingNodes = nextNodes;\n      ++x;\n    }\n\n    //\n    moveSinksRight(x);\n    scaleNodeBreadths((size[0] - nodeWidth) / (x - 1));\n  }\n\n  function moveSourcesRight() {\n    nodes.forEach(function(node) {\n      if (!node.targetLinks.length) {\n        node.x = d3.min(node.sourceLinks, function(d) { return d.target.x; }) - 1;\n      }\n    });\n  }\n\n  function moveSinksRight(x) {\n    nodes.forEach(function(node) {\n      if (!node.sourceLinks.length) {\n        node.x = x - 1;\n      }\n    });\n  }\n\n  function scaleNodeBreadths(kx) {\n    nodes.forEach(function(node) {\n      node.x *= kx;\n    });\n  }\n\n  function computeNodeDepths(iterations) {\n    var nodesByBreadth = d3.nest()\n        .key(function(d) { return d.x; })\n        .sortKeys(d3.ascending)\n        .entries(nodes)\n        .map(function(d) { return d.values; });\n\n    //\n    initializeNodeDepth();\n    resolveCollisions();\n    for (var alpha = 1; iterations > 0; --iterations) {\n      relaxRightToLeft(alpha *= .99);\n      resolveCollisions();\n      relaxLeftToRight(alpha);\n      resolveCollisions();\n    }\n\n    function initializeNodeDepth() {\n      var ky = d3.min(nodesByBreadth, function(nodes) {\n        return (size[1] - (nodes.length - 1) * nodePadding) / d3.sum(nodes, value);\n      });\n\n      nodesByBreadth.forEach(function(nodes) {\n        nodes.forEach(function(node, i) {\n          node.y = i;\n          node.dy = node.value * ky;\n        });\n      });\n\n      links.forEach(function(link) {\n        link.dy = link.value * ky;\n      });\n    }\n\n    function relaxLeftToRight(alpha) {\n      nodesByBreadth.forEach(function(nodes, breadth) {\n        nodes.forEach(function(node) {\n          if (node.targetLinks.length) {\n            var y = d3.sum(node.targetLinks, weightedSource) / d3.sum(node.targetLinks, value);\n            node.y += (y - center(node)) * alpha;\n          }\n        });\n      });\n\n      function weightedSource(link) {\n        return center(link.source) * link.value;\n      }\n    }\n\n    function relaxRightToLeft(alpha) {\n      nodesByBreadth.slice().reverse().forEach(function(nodes) {\n        nodes.forEach(function(node) {\n          if (node.sourceLinks.length) {\n            var y = d3.sum(node.sourceLinks, weightedTarget) / d3.sum(node.sourceLinks, value);\n            node.y += (y - center(node)) * alpha;\n          }\n        });\n      });\n\n      function weightedTarget(link) {\n        return center(link.target) * link.value;\n      }\n    }\n\n    function resolveCollisions() {\n      nodesByBreadth.forEach(function(nodes) {\n        var node,\n            dy,\n            y0 = 0,\n            n = nodes.length,\n            i;\n\n        // Push any overlapping nodes down.\n        nodes.sort(ascendingDepth);\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y0 - node.y;\n          if (dy > 0) node.y += dy;\n          y0 = node.y + node.dy + nodePadding;\n        }\n\n        // If the bottommost node goes outside the bounds, push it back up.\n        dy = y0 - nodePadding - size[1];\n        if (dy > 0) {\n          y0 = node.y -= dy;\n\n          // Push any overlapping nodes back up.\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y + node.dy + nodePadding - y0;\n            if (dy > 0) node.y -= dy;\n            y0 = node.y;\n          }\n        }\n      });\n    }\n\n    function ascendingDepth(a, b) {\n      return a.y - b.y;\n    }\n  }\n\n  function computeLinkDepths() {\n    nodes.forEach(function(node) {\n      node.sourceLinks.sort(ascendingTargetDepth);\n      node.targetLinks.sort(ascendingSourceDepth);\n    });\n    nodes.forEach(function(node) {\n      var sy = 0, ty = 0;\n      node.sourceLinks.forEach(function(link) {\n        link.sy = sy;\n        sy += link.dy;\n      });\n      node.targetLinks.forEach(function(link) {\n        link.ty = ty;\n        ty += link.dy;\n      });\n    });\n\n    function ascendingSourceDepth(a, b) {\n      return a.source.y - b.source.y;\n    }\n\n    function ascendingTargetDepth(a, b) {\n      return a.target.y - b.target.y;\n    }\n  }\n\n  function center(node) {\n    return node.y + node.dy / 2;\n  }\n\n  function value(link) {\n    return link.value;\n  }\n\n  return sankey;\n};","import React, { Component } from 'react';\nimport * as d3 from 'd3'\nimport categoryData from './data/category.csv'\n\nexport default class Pie extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcount:0,\n            category: []\n\t\t}\n        this.upDate = this.upDate.bind(this);\n        this.drawChart = this.drawChart.bind(this);\n        //this.drawCategoryChart = this.drawCategoryChart.bind(this);\n        this.convert = this.convert.bind(this);\n\t}\n\n    shouldComponentUpdate(nextProps){\n        if(this.props.trade !== nextProps.trade || this.props.year !== nextProps.year || this.props.country !== nextProps.country){\n            return true;\n        }\n        else{\n            return false;\n        }\n    }\n    componentDidMount(){\n        this.setData().then(()=>{\n            this.drawChart()\n            //this.drawCategoryChart()\n        })\n        window.addEventListener('resize', this.upDate)\n    }\t\n\tcomponentDidUpdate() {\n        this.setData().then(()=>{\n            this.upDate()\n            //this.drawCategoryChart()\n        })\n\t}\n    setData(data) {\n        return new Promise(resolve=>{\n            d3.csv(categoryData,function(d){\n                var year = this.props.year\n                if(d.Trade == this.props.trade)\n                return {\n                    Reporter : d.Reporter,\n                    Partner : d.Partner,\n                    Product : d.Product,\n                    Trade : d.Trade,\n                    Value : +d[year],\n                    Year: year\n                }\n            }.bind(this)).then(function(category){\n                this.setState({\n                    category: category\n                })\n                resolve('ture')\n            }.bind(this))\n            \n        })\n    }\n\n\tdrawChart() {\n\n\t\tconsole.log('draw pie')\n        var dataUS = this.state.category.filter(d => d.Reporter == this.props.country && d.Product != 'AllProducts' && d.Partner == \"United-States\")\n        var dataCN = this.state.category.filter(d => d.Reporter == this.props.country && d.Product != 'AllProducts' && d.Partner == \"China\")\n        \n       \n        //var data = this.props.category.filter(d=>d.Reporter == this.props.country && d.Product != 'AllProducts' && d.Partner == \"United-States\")\n        //console.log(data)\n        var margin = { top: 0, bottom: 0, left: 0, right: 0 },\n        width = +d3.select('#section2').style('width').slice(0, -2) * 0.35 - margin.left - margin.right,\n        height = +d3.select('#section2').style('height').slice(0, -2) *0.35 - margin.top - margin.bottom;\n\n        // var width = 300 - margin.left - margin.right;\n        // var height = 300 - margin.top - margin.bottom;\n\n        // Define the div for the tooltip\n        var div = d3.select(\"body\").append(\"div\")\n            .attr(\"class\", \"tooltip\")\n            .style(\"opacity\", 0);\n        \n        var radius = Math.min(width, height) / 2\n\n        console.log(width,height,radius)\n        //var colorImport = d3.scaleOrdinal(['#ffffe0', '#ffd59b', '#ffa474', '#f47461', '#db4551', '#b81b34', '#8b0000']);\n        var colorExport = d3.scaleOrdinal([\"#f0ffff\",\"#cdeafd\",\"#acd5f9\",\"#8fbff2\",\"#75a9e6\",\"#5e94d5\",\"#4682b4\"]);\n\n        var pie= d3.pie() //pie generator\n            //.sort(null)\n            .sort(function (a, b) { return (a.value < b.value) ? -1 : 1; })\n            .padAngle(0.005)\n            .value(function (d) { return d['Value']; });\n\n        var path = d3.arc()\n            .outerRadius(radius*0.9)\n            .innerRadius(radius*0.5);\n\n        var label = d3.arc()\n            .outerRadius(radius*0.5)\n            .innerRadius(radius*0.5)\n\n        function updateTween (d) {\n            var i = d3.interpolate(this._current, d);\n            this._current = i(0);\n            return function(t) {\n              return path(i(t));\n            };\n        }\n\n        var svg1 = d3.select('#pieUS')\n            .append('svg')\n            .attr('width', width)\n            .attr('height', height + margin.bottom)\n            .attr('id', 'pieUS-svg-svg')\n            .append('g')\n            .attr('id', 'pieUS-svg')\n            .attr('transform', 'translate(' + (width) / 2 + ',' + (height) / 2 + ')')\n\n        var svg2 = d3.select('#pieCN')\n            .append('svg')\n            .attr('width', width)\n            .attr('height', height + margin.bottom)\n            .attr('id', 'pieCN-svg-svg')\n            .append('g')\n            .attr('id', 'pieCN-svg')\n            .attr('transform', 'translate(' + (width) / 2 + ',' + (height) / 2 + ')')\n\n        /*var arc1 = svg1.selectAll('.arc')\n            //.data(pie(dataUS))\n            .enter()\n            .append('g')\n            .attr('class', 'arc')\n\n        var arc2 = svg2.selectAll('.arc')\n            //.data(pie(dataCN))\n            .enter()\n            .append('g')\n            .attr('class', 'arc')\n\n        arc1.append('path')\n            .attr('d', path)\n            .attr('fill', function (d) {\n                return colorExport(d['data'].Value)\n            })\n            .each(function(d) {\n                this._current = d;\n            })\n            .on(\"mouseover\", function (d) {\n                div.html(d['data'].Product + \": <br>\" + \"$ \" + convert(d['data'].Value))\n                    .style(\"opacity\", 1);\n            })\n            .on(\"mousemove\", function () {\n                div.style(\"left\", (d3.event.pageX + 10) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 10) + \"px\")\n            })\n            .on(\"mouseout\", function () {\n                div.style(\"opacity\", 0);\n            });\n\n        arc2.append('path')\n            .attr('d', path)\n            .attr('fill', function (d) {\n                return colorExport(d['data'].Value)\n            })\n            .on(\"mouseover\", function (d) {\n                div.html(d['data'].Product + \": <br>\" + \"$ \" + convert(d['data'].Value))\n                    .style(\"opacity\", 1);\n            })\n            .on(\"mousemove\", function () {\n                div.style(\"left\", (d3.event.pageX + 10) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 10) + \"px\")\n            })\n            .on(\"mouseout\", function () {\n                div.style(\"opacity\", 0);\n            });\n        */\n        var t1 = svg1.append(\"text\")\n            .attr('id','con-US')\n            //.attr(\"dy\", \".35em\")\n            .attr(\"text-anchor\", \"middle\")\n        t1.append('tspan')\n            .attr('id','from-US')\n            .attr(\"dy\", \"-1.2em\")\n            .attr(\"x\", 0)\n            \n\n        t1.append('tspan')\n            .attr('id','text-US')\n            .attr(\"dy\", \"1.2em\")\n            .attr(\"x\", 0)\n            \n\n        t1.append('tspan')\n            .attr('id','total-US')\n            .attr(\"dy\", \"1.2em\")\n            .attr(\"x\", 0)\n            \n\n             \n        var t2 = svg2.append(\"text\")\n            .attr('id','con-CN')\n            //.attr(\"dy\", \".35em\")\n            .attr(\"text-anchor\", \"middle\") \n\n        t2.append('tspan')\n            .attr('id','from-CN')\n            .attr(\"dy\", \"-1.2em\")\n            .attr(\"x\", 0)\n\n        t2.append('tspan')\n            .attr('id','text-CN')\n            .attr(\"dy\", \"1.2em\")\n            .attr(\"x\", 0)\n\n        t2.append('tspan')\n            .attr('id','total-CN')\n            .attr(\"dy\", \"1.2em\")\n            .attr(\"x\", 0)\n\n        \n\t}\n\n\tupDate() {\n        //console.log(this.state.category,this.props.country)\n        console.log('update pie')\n        var totalUS = this.state.category.filter(d => d.Reporter == this.props.country && d.Product == 'AllProducts' && d.Partner == \"United-States\")[0] ? this.convert(this.state.category.filter(d => d.Reporter == this.props.country && d.Product == 'AllProducts' && d.Partner == \"United-States\")[0]['Value']):'NaN'\n        var totalCN = this.state.category.filter(d => d.Reporter == this.props.country && d.Product == 'AllProducts' && d.Partner == \"China\")[0] ? this.convert(this.state.category.filter(d => d.Reporter == this.props.country && d.Product == 'AllProducts' && d.Partner == \"China\")[0]['Value']):'NaN'\n\n        var dataUS = this.state.category.filter(d => d.Reporter == this.props.country && d.Product != 'AllProducts' && d.Partner == \"United-States\")\n        var dataCN = this.state.category.filter(d => d.Reporter == this.props.country && d.Product != 'AllProducts' && d.Partner == \"China\")\n        var margin = { top: 0, bottom: 0, left: 0, right: 0 },\n            width = +d3.select('#section2').style('width').slice(0, -2) * 0.35 - margin.left - margin.right,\n            height = +d3.select('#section2').style('height').slice(0, -2) *0.35 - margin.top - margin.bottom;\n\n        // var width = 250 - margin.left - margin.right;\n        // var height = 250 - margin.top - margin.bottom;\n\n        var div = d3.select(\".tooltip\")\n\n\n        var radius = Math.min(width, height) / 2\n        var colorImport = d3.scaleOrdinal(['#ffffe0', '#ffd59b', '#ffa474', '#f47461', '#db4551', '#b81b34', '#8b0000']);\n        var colorExport = d3.scaleOrdinal([\"#f0ffff\",\"#cdeafd\",\"#acd5f9\",\"#8fbff2\",\"#75a9e6\",\"#5e94d5\",\"#4682b4\"]);\n\n        var color = this.props.trade == 'Import'? colorImport : colorExport\n        var pie= d3.pie() //pie generator\n            .sort(null)\n            //.sort(function (a, b) { return (a.value < b.value) ? -1 : 1; })\n            .padAngle(0.005)\n            .value(function (d) { return d['Value']; });\n\n        var path = d3.arc()\n            .outerRadius(radius*0.9)\n            .innerRadius(radius*0.5);\n\n        var label = d3.arc()\n            .outerRadius(radius*0.5)\n            .innerRadius(radius*0.5)\n\n        function arcTween(a) {\n            const i = d3.interpolate(this._current, a);\n            this._current = i(1);\n            return (t) => path(i(t));\n        }\n\n        /*function exitTween (d) {\n            var end = Object.assign({}, this._current, { startAngle: this._current.endAngle });\n            var i = d3.interpolate(d, end);\n            return function(t) {\n              return path(i(t));\n            };\n        }*/\n\n        var svg1 = d3.select('#pieUS-svg-svg')\n                    .attr('width', width)\n                    .attr('height', height)\n                    .select('g')\n                    .attr('transform', 'translate(' + (width) / 2 + ',' + (height) / 2 + ')')\n                    // .style('top',height*0.2)\n                    // .style('left',width*0.6)\n\n\n        var svg2 = d3.select('#pieCN-svg-svg')\n                    .attr('width', width)\n                    .attr('height', height)\n                    .select('g')\n                    .attr('transform', 'translate(' + (width) / 2 + ',' + (height) / 2 + ')')\n                    // .style('top',height*0.5)\n                    // .style('left',width*0.6)\n\n            \n        var arc1 = svg1.selectAll('path').data(pie(dataUS))\n        var arc2 = svg2.selectAll('path').data(pie(dataCN))\n\n        arc1.attr(\"d\", path)\n            .transition().duration(1000).attrTween(\"d\", arcTween)\n            .attr(\"fill\", function(d, i) { return color(i); })\n            \n\n        arc2.attr(\"d\", path)\n            .transition().duration(1000).attrTween(\"d\", arcTween)\n            .attr(\"fill\", function(d, i) { return color(i); })\n\n        arc1.enter()\n            .append('path')\n            .attr(\"d\", path)\n            .each(function(d) { this._current = d; })\n            .attr(\"fill\", function(d, i) { return color(i); })\n            //.attr(\"d\", path)\n            .on(\"mouseover\", function (d) {\n                div.html(d['data'].Product + \": <br>\" + \"$ \" + convert(d['data'].Value))\n                    .style(\"opacity\", .9)\n                    .style('z-index',10)\n            })\n            .on(\"mousemove\", function () {\n                div.style(\"left\", (d3.event.pageX + 10) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 10) + \"px\")\n            })\n            .on(\"mouseout\", function () {\n                div.style(\"opacity\", 0)\n                    .style('z-index',-10)\n            });\n\n        arc2.enter()\n            .append('path')\n            .attr(\"fill\", function(d, i) { return color(i); })\n            .attr(\"d\", path)\n            .each(function(d) {this._current = d;})\n            .on(\"mouseover\", function(d) {\n                div.html(d['data'].Product + \": <br>\" + \"$ \" + convert(d['data'].Value))\n                    .style(\"opacity\", 1)\n                    .style('z-index',10)\n            })\n            .on(\"mousemove\", function () {\n                div.style(\"left\", (d3.event.pageX + 10) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 10) + \"px\")\n            })\n            .on(\"mouseout\", function () {\n                div.style(\"opacity\", 0)\n                    .style('z-index',-10)\n            });\n        \n        arc1.exit()\n            .remove()\n\n        arc2.exit()\n            .remove()\n\n        d3.select('#from-US').text('US and')\n        d3.select('#from-CN').text('CN and')\n        d3.select('#text-US').text(this.props.country)\n        d3.select('#text-CN').text(this.props.country)\n        d3.select('#total-US').text(totalUS)\n        d3.select('#total-CN').text(totalCN)\n        function convert(labelValue) {\n\n            // Nine Zeroes for Billions\n            return Math.abs(Number(labelValue)) >= 1.0e+9\n    \n            ? Math.round((Math.abs(Number(labelValue)) / 1.0e+9)*10)/10 + \"B\"\n            // Six Zeroes for Millions \n            : Math.abs(Number(labelValue)) >= 1.0e+6\n    \n            ? Math.round((Math.abs(Number(labelValue)) / 1.0e+6)*10)/10 + \"M\"\n            // Three Zeroes for Thousands\n            : Math.abs(Number(labelValue)) >= 1.0e+3\n    \n            ? Math.round((Math.abs(Number(labelValue)) / 1.0e+3)*10)/10 + \"K\"\n    \n            : Math.abs(Number(labelValue));\n    \n        }\n\t}\n    /*drawCategoryChart() {\n\n        var margin = { top: 0, bottom: 30, left: 0, right: 0 }\n        var width = 150 - margin.left - margin.right;\n        var height = 200 - margin.top - margin.bottom;\n\n        var dataUS = this.state.category.filter(d => d.Reporter == this.props.country && d.Product != 'AllProducts' && d.Partner == \"United-States\")\n        var dataCN = this.state.category.filter(d => d.Reporter == this.props.country && d.Product != 'AllProducts' && d.Partner == \"China\")\n    \n        var cateData = []\n        var colorExport = d3.scaleOrdinal().domain(['United-States','China']).range([\"#2166CC\",\"#CC5343\"]);\n        var radius = Math.min(width, height) / 2\n\n        var pie= d3.pie()\n            .sort(function (a, b) { return (a.Country < b.Country) ? -1 : 1; })\n            .padAngle(0.005)\n            .value(function (d) { return d['Value']; });\n\n        var path = d3.arc()\n            .outerRadius(radius - 40)\n            .innerRadius(0);\n\n        var div = d3.select(\"body\").append(\"div\")\n            .attr(\"class\", \"catetooltip\")\n            .style(\"opacity\", 0);\n\n        for(var i=0; i<Math.max(dataUS.length, dataCN.length); i++){\n            var t = {}\n            t['data'] = []\n            if(dataUS.length > 0){\n                var temp = {}\n                t['Product'] = dataUS[i].Product\n                temp['Country'] = dataUS[i].Partner\n                temp['Value'] = dataUS[i].Value\n                t['data'].push(temp)\n            }\n            if(dataCN.length > 0){\n                var temp = {}\n                temp['Country'] = dataCN[i].Partner\n                temp['Value'] = dataCN[i].Value\n                t['data'].push(temp)\n            }\n            cateData.push(t)\n        }\n        console.log(cateData)\n\n        for(var i=0;i<cateData.length;i++){\n            var svg = d3.select('#category-container')\n                .append('svg')\n                .attr('width', width)\n                .attr('height', height + margin.bottom)\n                .append('g')\n                .attr('id', 'category-pie-svg'+i)\n                .attr('transform', 'translate(' + (width) / 2 + ',' + (height) / 2 + ')')\n\n            var arc = svg.selectAll('.arc')\n                .data(pie(cateData[i]['data']))\n                .enter()\n                .append('path')\n                .attr('d', path)\n                .attr('fill',(d)=> {\n                    return colorExport(d['data'].Country)\n                })\n                .each(function(d) {\n                    this._current = d;\n                })\n                .on(\"mouseover\", (d)=> {\n                    div.html(\"$ \" + this.convert(d['data'].Value))\n                        .style(\"opacity\", 1);\n                })\n            svg.append('text')\n                //.attr(\"dy\", \".35em\")\n                .attr(\"text-anchor\", \"middle\") // text-align: right\n                .text(cateData[i]['Product'])\n                .attr('y', 60)\n\n        }\n    }*/\n    convert(labelValue) {\n        // Nine Zeroes for Billions\n        return Math.abs(Number(labelValue)) >= 1.0e+9\n\n        ? Math.round((Math.abs(Number(labelValue)) / 1.0e+9)*10)/10 + \"B\"\n        // Six Zeroes for Millions \n        : Math.abs(Number(labelValue)) >= 1.0e+6\n\n        ? Math.round((Math.abs(Number(labelValue)) / 1.0e+6)*10)/10 + \"M\"\n        // Three Zeroes for Thousands\n        : Math.abs(Number(labelValue)) >= 1.0e+3\n\n        ? Math.round((Math.abs(Number(labelValue)) / 1.0e+3)*10)/10 + \"K\"\n\n        : Math.abs(Number(labelValue));\n\n    }\n\n\n    \n\n\n\trender() {\n\t\treturn (\n            <div id='pieContainer'>\n    \t\t\t<div id='pieUS'></div>\n                <div id='pieCN'></div>\n                {/*<div id='category-container'></div>*/}\n            </div>\n\t\t)\n\t}\n\n}","import React, { Component } from 'react';\nimport * as d3 from 'd3'\nimport categoryData from './data/category.csv'\nexport default class Bar extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcount:0,\n            category: [],\n            product: [],\n            stateSelect:1\n\t\t}\n        this.upDate = this.upDate.bind(this);\n        this.drawChart = this.drawChart.bind(this);\n        this.convert = this.convert.bind(this);\n\t}\n\n    shouldComponentUpdate(nextProps,nextState){\n        if(this.props.trade !== nextProps.trade || this.props.year !== nextProps.year || this.props.country !== nextProps.country || this.state.stateSelect !== nextState.stateSelect){\n            return true;\n        }\n        else{\n            return false;\n        }\n    }\n    componentDidMount(){\n        this.setData().then(()=>{\n            this.drawChart()\n            this.drawLegend()\n            //this.drawCategoryChart()\n        })\n        window.addEventListener('resize', this.upDate)\n    }\t\n\tcomponentDidUpdate() {\n        this.setData().then(()=>{\n            this.upDate()\n            this.upDateTitle()\n        })\n\t}\n    setData(data) {\n        return new Promise(resolve=>{\n            d3.csv(categoryData,function(d){\n                var year = this.props.year\n                if(d.Trade == this.props.trade)\n                return {\n                    Reporter : d.Reporter,\n                    Partner : d.Partner,\n                    Product : d.Product,\n                    Trade : d.Trade,\n                    Value : +d[year],\n                    Year: year\n                }\n            }.bind(this)).then(function(category){\n                var flags = [],\n                    product = [], \n                    l = category.length, \n                    i;\n                for( i=0; i<l; i++) {\n                    if( flags[category[i].Product]) continue;\n                    flags[category[i].Product] = true;\n                    product.push(category[i].Product);\n                }\n                product = product.filter(d=> d!='AllProducts')\n                //console.log('product',product)\n\n                this.setState({\n                    category: category,\n                    product: product\n                })\n                resolve('ture')\n            }.bind(this))\n            \n        })\n    }\n\n\tdrawChart() {\n        console.log('draw bar')\n\n        var dataUS = this.state.category.filter(d => d.Reporter == this.props.country && d.Product != 'AllProducts' && d.Partner == \"United-States\")\n        var dataCN = this.state.category.filter(d => d.Reporter == this.props.country && d.Product != 'AllProducts' && d.Partner == \"China\")\n    \n        var cateData = []\n\n        \n        \n        var margin = { top: 30, bottom: 80, left: 80, right: 30 },\n            width = +d3.select('#section3').style('width').slice(0, -2) - margin.left - margin.right,\n            height = +d3.select('#section3').style('height').slice(0, -2)*0.7 - margin.top - margin.bottom;\n        \n        // var width = 1000 - margin.left - margin.right;\n        // var height = 500 - margin.top - margin.bottom;\n\n        var svg = d3.select('#bar')\n            .append('svg')\n            .attr('width',width + margin.left + margin.right)\n            .attr('height',height + margin.top + margin.bottom)\n            .attr('id','bar-svg-svg')\n            .append('g')\n            .attr('id','bar-svg')\n            .attr('transform','translate(' +margin.left+ ',' +margin.top+ ')')\n\n        svg.select('rect')\n            .data(cateData)\n            .append('g')\n\n        svg.append('g')\n            .attr(\"class\", \"yAxis\")\n\n        svg.append('g')\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .attr(\"class\", \"xAxis\")\n\n        /*var max = d3.max(data,function(d){return d['2017_RuralPopulation']})\n\n        var yAxisScale = d3.scaleLinear()\n            .domain([max +20,0])\n            .range([0,height])\n\n        var xBarAxisScale = d3.scaleBand()\n            .domain(countries)\n            .range([0,width])\n            .paddingInner(0.05)\n            .paddingOuter(0.1)*/\n\n        \n\t}\n\n\tupDate() {\n        //console.log('update bar')\n        // var margin = { top: 30, bottom: 80, left: 80, right: 30 }\n        // var width = 1000 - margin.left - margin.right;\n        // var height = 500 - margin.top - margin.bottom;\n        var margin = { top: 30, bottom: 80, left: 80, right: 30 },\n            width = +d3.select('#section3').style('width').slice(0, -2) - margin.left - margin.right,\n            height = +d3.select('#section3').style('height').slice(0, -2)*0.7 - margin.top - margin.bottom;\n        \n        console.log(width,height)\n            //width = +d3.select('#bar').style('width').slice(0, -2) - margin.left - margin.right,\n            //height = +d3.select('#bar').style('height').slice(0, -2) - margin.top - margin.bottom;\n\n\n        var colorExport = d3.scaleOrdinal().domain(['United-States','China']).range([\"#2166CC\",\"#CC5343\"]);\n\n        var dataUS = this.state.category.filter(d => d.Reporter == this.props.country && d.Product != 'AllProducts' && d.Partner == \"United-States\")\n        var dataCN = this.state.category.filter(d => d.Reporter == this.props.country && d.Product != 'AllProducts' && d.Partner == \"China\")\n    \n        var cateData = []\n\n        \n        for(var i=0; i<Math.max(dataUS.length, dataCN.length); i++){\n            var t = {}\n            t['data'] = []\n            var total = 0\n            if(dataUS.length > 0){\n                var temp = {}\n                total = total + dataUS[i].Value\n                t['Product'] = dataUS[i].Product\n                temp['Country'] = dataUS[i].Partner\n                temp['Value'] = dataUS[i].Value\n                temp['Product'] = dataUS[i].Product\n                t['data'].push(temp)\n            }\n            if(dataCN.length > 0){\n                var temp = {}\n                total = total + dataCN[i].Value\n                t['Product'] = dataCN[i].Product\n                temp['Country'] = dataCN[i].Partner\n                temp['Value'] = dataCN[i].Value\n                temp['Product'] = dataCN[i].Product\n                t['data'].push(temp)\n            }\n            t['total'] = total\n            cateData.push(t)\n        }\n        //console.log(cateData)\n\n        d3.select('#bar-svg-svg')\n            .attr('width',width + margin.left + margin.right)\n            .attr('height',height + margin.top + margin.bottom)\n\n        var svg = d3.select('#bar-svg')\n\n        var bar_g = svg.selectAll('#bar-g')\n            .data(cateData,function(d){return d.Product})\n\n        if(this.state.stateSelect == 2){\n            cateData = cateData.sort(this.descNum).slice(0, 10)\n        }\n        if(this.state.stateSelect == 3){\n            cateData = cateData.sort(this.descNum).slice(10, 20)\n        }\n\n        var max = d3.max(cateData,function(d){return d['total']})\n\n        var yAxisScale = d3.scaleLinear()\n            .domain([max +20,0])\n            .range([0,height]);\n\n        var xAxisScale = d3.scaleBand()\n            .domain(cateData.map((d)=>{return d.Product}))\n            .range([0,width])\n            .paddingInner(0.05)\n            .paddingOuter(0.1);\n\n        var yAxis = d3.axisLeft(yAxisScale); \n        var xAxis = d3.axisBottom(xAxisScale); \n\n        var svg = d3.select('#bar-svg')\n\n        var bar_g = svg.selectAll('#bar-g')\n            .data(cateData,function(d){return d.Product})\n\n        \n        \n        console.log('all-update')\n        bar_g.selectAll('#cate-r-text')\n            .remove()\n        bar_g//.attr('transform',function(d){return 'translate(' +xAxisScale(d['Product'])+ ',' +(yAxisScale(d['total']))+ ')'})\n            .selectAll('#cate-rect')\n            .data(function(d){ return d['data']},function(d){ return d['Country']})\n            .transition()\n            .duration(1000)\n            .attr('x',function(d){return xAxisScale(d['Product'])})\n            .attr('y', (d, i )=>{\n                var temp = cateData.filter(l=>l['Product']==d['Product'])\n                //console.log(temp[0]['data'][0],temp[0]['total'], d)\n                return i ? yAxisScale(temp[0]['total'])+(height-yAxisScale(temp[0]['data'][0]['Value'])+1) : yAxisScale(temp[0]['total'])+0\n            })\n            .attr('height', function(d){ return height - yAxisScale(d['Value'])})\n            .attr('width', function(d ,i){ return xAxisScale.bandwidth() })\n            .attr('fill', function(d){ return colorExport(d.Country)})\n\n        bar_g//.attr('transform',function(d){return 'translate(' +xAxisScale(d['Product'])+ ',' +(yAxisScale(d['total']))+ ')'})\n            .selectAll('#cate-rect')\n            .data(function(d){ \n                //console.log('here rect',d)\n                return d['data']},function(d){ return d['Country']})\n            .enter()\n            .append('rect')\n            .attr('id','cate-rect')\n            .attr('x',function(d){return xAxisScale(d['Product'])})\n            .attr('y', (d, i )=>{\n                var temp = cateData.filter(l=>l['Product']==d['Product'])\n                return i ? yAxisScale(temp[0]['total'])+(height-yAxisScale(temp[0]['data'][0]['Value'])+1) : yAxisScale(temp[0]['total'])+0\n            })\n            .transition()\n            .duration(1000)\n            .attr('height', function(d){ return height - yAxisScale(d['Value'])})\n            .attr('width', function(d ,i){ return xAxisScale.bandwidth() })\n            .attr('fill', function(d){ return colorExport(d.Country)})\n\n        bar_g.selectAll('#cate-rect')\n            .data(function(d){ return d['data']},function(d){ return d['Country']})\n            .exit()\n            .remove()\n\n        bar_g.select('#cate-g-text')\n            .transition()\n            .duration(1000)\n            .attr('x',function(d){return xAxisScale(d['Product'])+xAxisScale.bandwidth()/2})\n            .attr('y',function(d){return yAxisScale(d['total'])})\n            .text((d)=>{return this.convert(d['total'])})\n            \n\n        bar_g = svg.selectAll('#bar-g')\n            .data(cateData,function(d){return d.Product})\n\n        //initial\n        var bar_gg = bar_g.enter()\n            .append('g')\n            .attr('id','bar-g')\n            //.attr('transform',function(d){return 'translate(' +xAxisScale(d['Product'])+ ',' +(yAxisScale(d['total']))+ ')'})\n        var div = d3.select('.tooltip')\n\n        var t = bar_gg.selectAll('#cate-rect')\n            .data(function(d){ return d['data']},function(d){ return d['Country']})\n            .enter()\n            .append('rect')\n            .attr('id','cate-rect')\n            .on(\"mouseover\", function(d){\n                div.style(\"opacity\", .9)\n                    .style('z-index',10)\n                div.html(d.Product + '<br>'+'Value: ' + convert(d.Value))\n\n                function convert(labelValue) {\n                    // Nine Zeroes for Billions\n                    return Math.abs(Number(labelValue)) >= 1.0e+9\n\n                    ? Math.round((Math.abs(Number(labelValue)) / 1.0e+9)*10)/10 + \"B\"\n                    // Six Zeroes for Millions \n                    : Math.abs(Number(labelValue)) >= 1.0e+6\n\n                    ? Math.round((Math.abs(Number(labelValue)) / 1.0e+6)*10)/10 + \"M\"\n                    // Three Zeroes for Thousands\n                    : Math.abs(Number(labelValue)) >= 1.0e+3\n\n                    ? Math.round((Math.abs(Number(labelValue)) / 1.0e+3)*10)/10 + \"K\"\n\n                    : Math.abs(Number(labelValue));\n\n                }\n            })\n            .on(\"mousemove\", ()=>{\n                div.style(\"left\", (d3.event.pageX + 10) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 10) + \"px\")\n            })              \n            .on(\"mouseleave\",function(d){\n                div.style(\"opacity\", 0)\n                    .style('z-index',-10)\n                \n            })\n\n\n        t.transition()\n            .duration(1000)\n            .attr('x',function(d){return xAxisScale(d['Product'])})\n            .attr('y', (d, i )=>{ \n                console.log('init')\n                var temp = cateData.filter(l=>l['Product']==d['Product'])\n                return i ? yAxisScale(temp[0]['total'])+(height-yAxisScale(temp[0]['data'][0]['Value'])+1) : yAxisScale(temp[0]['total'])+0\n            })\n            .attr('height', function(d){ return height - yAxisScale(d['Value'])})\n            .attr('width', function(d ,i){ return xAxisScale.bandwidth() })\n            .attr('fill', function(d){ return colorExport(d.Country)})\n            \n            \n            //.on('mouseover', tip.show)\n            //.on('mouseout', tip.hide)\n\n        \n        bar_gg.append('text')\n            .transition()\n            .duration(1000)\n            .attr('id','cate-g-text')\n            .text((d)=>{return this.convert(d['total'])})\n            .attr('x',function(d){return xAxisScale(d['Product'])+xAxisScale.bandwidth()/2})\n            .attr('y',function(d){return yAxisScale(d['total'])})\n            .attr('dy','-0.2em')\n            .attr('font-size','12')\n            .attr(\"text-anchor\", \"middle\")\n\n\n        bar_g.exit()\n            .remove()\n\n        svg.select('.yAxis')\n            .transition()\n            .duration(1000)\n            .call(yAxis)\n            .selectAll(\"text\")\n            .text((d)=>{ return this.convert(d) })\n\n        svg.select('.xAxis')\n            .transition()\n            .duration(1000)\n            .call(xAxis)\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .selectAll(\"text\")\n            .attr(\"y\", 10)\n            .attr(\"x\", 7)\n            .attr(\"dy\", \".35em\")\n            .attr(\"transform\", \"rotate(45)\")\n            .style(\"text-anchor\", \"start\");\n\n\n        svg.select('#year')\n            .attr('x',width*0.65)\n            .text(this.props.year)\n\n        svg.select('#us-r-legend')\n            .attr('x', width*0.65)\n            .attr('opacity',1)\n\n        svg.select('#cn-r-legend')\n            .attr('x',width*0.65)\n            .attr('opacity',1)\n\n        svg.select('#us-legend')\n            .attr('opacity',1)\n            .attr('x',width*0.65 + 30)\n            .text( this.props.trade == 'Export' ?  'Value '+ this.props.trade + ' from ' + this.props.country +' to United-States' : 'Value '+ this.props.trade + ' from United-States to ' + this.props.country )\n\n        svg.select('#cn-legend')\n            .attr('opacity',1)\n            .attr('x',width*0.65 + 30)\n            .text( this.props.trade == 'Export' ?  'Value '+ this.props.trade + ' from ' + this.props.country +' to China' : 'Value '+ this.props.trade + ' from China to ' + this.props.country )\n\n        if(this.props.country == \"China\"){\n            svg.select('#cn-r-legend')\n                .attr('opacity',0)\n            \n            svg.select('#cn-legend')\n                .attr('opacity',0)\n        }else if (this.props.country == \"United-States\"){\n            svg.select('#us-r-legend')\n                .attr('opacity',0)\n            \n            svg.select('#us-legend')\n                .attr('opacity',0)\n        }\n\n\t}\n    drawLegend(){\n        var svg = d3.select('#bar-svg')\n\n        var margin = { top: 30, bottom: 80, left: 80, right: 30 },\n            width = +d3.select('#section3').style('width').slice(0, -2) - margin.left - margin.right,\n            height = +d3.select('#section3').style('height').slice(0, -2)*0.7 - margin.top - margin.bottom;\n        \n\n        svg.append('rect')\n            .attr('id','us-r-legend')\n            .attr('x', width*0.65)\n            .attr('y', 7)\n            .attr('height','25')\n            .attr('width','25')\n            .attr('fill', \"#2166CC\")\n            .attr('opacity',0)\n        \n        svg.append('rect')\n            .attr('id','cn-r-legend')\n            .attr('x', width*0.65)\n            .attr('y', 35)\n            .attr('height','25')\n            .attr('width','25')\n            .attr('fill', \"#CC5343\")\n            .attr('opacity',0)\n        \n        svg.append('text')\n            .attr('id','us-legend')\n            .attr('x',width*0.65 + 30)\n            .attr('y',21)\n            .attr('font-size','12')\n            .attr(\"text-anchor\", \"left\")\n            //.text('Value '+ this.props.trade + ' from ' + this.props.country +' to United-States')\n\n        \n        svg.append('text')\n            .attr('id','cn-legend')\n            .attr('x',width*0.65 +30)\n            .attr('y',50)\n            .attr('font-size','12')\n            .attr(\"text-anchor\", \"left\")\n            .attr('color', '#CC5343')\n            //.text('Value '+ this.props.trade + ' from ' + this.props.country +' to China')\n        \n        svg.append('text')\n            .attr('id','year')\n            .attr('x',width*0.65)\n            .attr('y',0)\n            .attr('font-size','40')\n            .attr(\"text-anchor\", \"left\")\n            .attr('color', '#CC5343')\n            //.text('2016')\n    }\n    descNum(a, b) {\n        // Use toUpperCase() to ignore character casing\n        const ca = a['total']\n        const cb = b['total']\n\n        let comparison = 0;\n        if (ca > cb) {\n            comparison = -1;\n        } else if (ca < cb) {\n            comparison = 1;\n        }\n        return comparison;\n    }\n\n    convert(labelValue) {\n        // Nine Zeroes for Billions\n        return Math.abs(Number(labelValue)) >= 1.0e+9\n\n        ? Math.round((Math.abs(Number(labelValue)) / 1.0e+9)*10)/10 + \"B\"\n        // Six Zeroes for Millions \n        : Math.abs(Number(labelValue)) >= 1.0e+6\n\n        ? Math.round((Math.abs(Number(labelValue)) / 1.0e+6)*10)/10 + \"M\"\n        // Three Zeroes for Thousands\n        : Math.abs(Number(labelValue)) >= 1.0e+3\n\n        ? Math.round((Math.abs(Number(labelValue)) / 1.0e+3)*10)/10 + \"K\"\n\n        : Math.abs(Number(labelValue));\n\n    }\n\n    upDateTitle(){\n        d3.select('#country').html(this.props.country)\n        if(this.props.trade =='Import'){\n            d3.select('#d').html('from')\n        }else{\n            d3.select('#d').html('to')\n        }\n    }\n    \n\n\n\trender() {\n\t\treturn (\n            <div id='barchart'>\n                <div id='bar-discription-container'>\n                <h2><span id='country'></span><span id='trade'> {this.props.trade}</span> Category <span id='d'>to</span> U.S. & China</h2>\n                \n                    \n                <p>This bar chart shows the total trade value from the top 10 countries (with the highest trade value) to the U.S. and China by category. Three buttons provide detailed information about the top 10 categories with the highest trade value, the bottom 10 categories with the lowest trade value, and trade value by all 20 categories. The blue bars represent trade value to the U.S., while the red ones represent trade value to China.</p>\n                <div id='instruction-box'><p>Instruction: Choose Year, Trade(Export/Import), Country at the sidebar on the left, categorical trade value will be shown in the bar chart.</p></div>\n                </div>\n                <br></br>\n                <div id='barContainer'>\n        \t\t\t<button type=\"button\" id='top5' className=\"btn btn-secondary\" onClick={()=>{this.setState({stateSelect:2})}}>TOP 10</button>\n                    <button type=\"button\" id='bot5' className=\"btn btn-secondary\" onClick={()=>{this.setState({stateSelect:3})}}>BOTTOM 10</button>\n                    <button type=\"button\" id='all10' className=\"btn btn-secondary\" onClick={()=>{this.setState({stateSelect:1})}}>ALL 20</button>\n                    <div id='bar'></div>\n                </div>\n            </div>\n\t\t)\n\t}\n\n}","import React, { Component } from 'react';\nimport * as d3 from 'd3'\nimport json from './data/world.json'\nimport csv from './data/world_trade_value.csv'\nimport categoryData from './data/category.csv'\nimport sankeyJson from './data/sankeyTest.json'\n//import {sankey as Sankey, sankeyLinkHorizontal} from 'd3-sankey'\nimport {Sankey} from './d3.sankey.js'\nimport TimeLine from './TimeLine'\nimport TradeBtn from './TradeBtn'\nimport Pie from './PieChart'\nimport Line from './BarChart'\nexport default class SankeyGraph extends Component{\n\tconstructor(props){\n        super(props);\n        this.state={\n        \tdata:[],\n        \tcategory:[],\n        \tcountries:[],\n        \tsankey:{},\n        \twidth :'',\n        \theight: '',\n        \tmargin:{},\n        \tcountry:'',\n        \ty:'',\n        \tcount:0,\n        \tpiechartshow:0\n        }\n        this.upDate = this.upDate.bind(this);\n        this.setData = this.setData.bind(this);\n        this.drawChart = this.drawChart.bind(this);\n    }\n\n    shouldComponentUpdate(nextProps, nextState){\n        if(this.props.trade !== nextProps.trade || this.props.year !== nextProps.year || this.props.country !== nextProps.country ){\n            return true;\n        }\n        else{\n            return false;\n        }\n    }\n  \tcomponentDidMount() {\n\n  \t\t/*var margin = {top: 50, right: 0, bottom: 0, left: 0},\n\t\t\twidth = 700 - margin.left - margin.right,\n\t\t\theight = 500 - margin.top - margin.bottom;*/\n\t\t//console.log('sankey width', +d3.select('#section2').style('width').slice(0, -2))\n\t\tvar margin = {top: 50, right: 0, bottom: 0, left: 0},\n\t\t\twidth = +d3.select('#section2').style('width').slice(0, -2) * 0.65 - margin.left - margin.right,\n\t\t\theight = +d3.select('#section2').style('height').slice(0, -2) *0.7 - margin.top - margin.bottom;\n\n  \t\tvar sankey = Sankey()\n\t\t\t    .nodeWidth(15)\n\t\t\t    .nodePadding(10)\n\t\t\t    .size([width, height]);\n\n\t\tthis.setState({\n\t\t\tsankey :sankey,\n\t\t\twidth: width,\n\t\t\theight:height,\n\t\t\tmargin:margin\n\t\t})\n\n  \t\td3.csv(csv,function(d){\n\t\t\treturn {\n\t\t\t\tCountry : d.Country,\n\t\t\t\tYear : +d.Year,\n\t\t\t\tTrade : d.Trade,\n\t\t\t\tValue : +d.Value\n\n\t\t\t}\n\t\t}.bind(this)).then(function(data){\n    \t\tthis.setData(data).then(()=>{\n    \t\t\tthis.setState({\n    \t\t\t\tdata:data\n    \t\t\t})\n    \t\t\tthis.drawChart()\n    \t\t});\n    \t}.bind(this))\n    \twindow.addEventListener('resize', this.upDate)\n  \t}\n  \tcomponentDidUpdate(){\n  \t\tthis.setData(this.state.data).then(()=>{\n\t\t\tthis.upDate()\n\t\t\tthis.upDateTitle()\n\t\t});\n\t\t\n  \t}\n\n\n  \tsetData(data) {\n\t\t\treturn new Promise(resolve=>{\n\t\t\t\tvar countries = data.filter(d=>d.Trade == this.props.trade && d.Year == this.props.year).sort((a,b)=>{ return b.Value-a.Value }).slice(0,10).map(d=>d.Country)\n\t\t\t\tthis.setState({\n\t\t\t\t\tcountries: countries\n\t\t\t\t})\n\t\t\t\td3.csv(categoryData,function(d){\n\t\t\t\t\tvar year = this.props.year\n\t\t\t\t\tif(d.Trade == this.props.trade && countries.includes(d.Reporter) )\n\t\t\t\t\treturn {\n\t\t\t\t\t\tReporter : d.Reporter,\n\t\t\t\t\t\tPartner : d.Partner,\n\t\t\t\t\t\tProduct : d.Product,\n\t\t\t\t\t\tTrade : d.Trade,\n\t\t\t\t\t\tValue : +d[year],\n\t\t\t\t\t\tYear: year\n\t\t\t\t\t}\n\t\t\t\t}.bind(this)).then(function(category){\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tcategory: category\n\t\t\t\t\t})\n\t\t\t\t\tresolve('ture')\n\t\t\t\t}.bind(this))\n\t\t\t\t\n\t\t\t})\n\t}\n\n\tdrawChart(){\n\n\t\tvar category = this.state.category.filter(d=>d.Product == 'AllProducts')\n\t\tthis.createSankeyJson(category).then(sankeydata=>{\n\t\t\t//console.log(sankeydata)\n\t\t\tvar trade = this.props.trade\n\t\t\tvar width = this.state.width,\n\t\t\t\theight = this.state.height,\n\t\t\t\tmargin = this.state.margin\n\n\t\t\tvar formatNumber = d3.format(\",.0f\"),\n\t\t\t    format = function(d) { return formatNumber(d) + \" TWh\"; },\n\t\t\t    color = d3.scaleOrdinal([\"#191970\",\"#000080\",\"#00008B\",\"#0000CD\",\"#0000FF\",\"#4169E1\",\"#6495ED\",\"#1E90FF\",\"#00BFFF\",\"#87CEFA\"]);\n\n\t\t\tvar svg = d3.select(\"#sankey-container\")\n\t\t\t\t.append('svg')\n\t\t\t    .attr(\"width\", width + margin.left + margin.right)\n\t\t\t    .attr(\"height\", height + margin.top + margin.bottom)\n\t\t\t    .attr('id','sankey-svg')\n\n\t\t\td3.select(\"#sankey-container\")\n\t\t\t\t.append('canvas')\n\t\t\t    .attr(\"width\", width + margin.left + margin.right)\n\t\t\t    .attr(\"height\", height + margin.top + margin.bottom)\n\t\t\t    .attr('id','sankey-canvas')\n\n\t\t\t// var sankey = Sankey()\n\t\t\t//     .nodeWidth(15)\n\t\t\t//     .nodePadding(10)\n\t\t\t//     .size([width, height]);\n\t\t\tvar sankey = this.state.sankey\n\n\t\t\tvar path = sankey.link();\n\n\t\t\tvar freqCounter = 1;\n\n\n\t\t\tsankey.nodes(sankeydata.nodes)\n\t\t\t\t.links(sankeydata.links)\n\t\t\t\t.layout(32);\n\n\t\t\tvar div = d3.select('.tooltip')\n\n\t\t\tvar link = svg.selectAll(\".link\")\n\t\t\t    .data(sankeydata.links)\n\t\t\t    .enter()\n\t\t\t    .append(\"path\")\n\t\t\t  \t.attr(\"class\", \"link\")\n\t\t\t\t.attr(\"d\", path)\n\t\t\t\t.attr('id', function(d){ return d.source.name})\n\t\t\t\t.style('fill','none')\n\t\t\t\t.style('stroke','#000')\n\t\t\t\t.style('stroke-opacity',0.05)\n\t\t\t\t.attr(\"stroke-width\", function(d) { return Math.max(1, d.dy); })\n\t\t\t\t.on(\"click\", function() {\n\t\t\t\t\tsetCountry(this.id)\n\t\t\t\t})\n\t\t\t\t.on(\"mouseover\", function(d){\n\t\t\t\t\td3.selectAll('#'+this.id)\n\t\t\t\t    \t.style('stroke-opacity',0.25)\n\t\t\t\t\t\n\t\t\t\t\tdiv.style(\"opacity\", .9)\n\t\t\t\t\t\t.style('z-index',10)\n\t\t\t\t\tdiv.html(d.source.name + ' to ' + d.target.name+ '<br>'+'Value: ' + convert(d.value))\n\n\t\t\t\t\tfunction convert(labelValue) {\n\t\t\t\t        // Nine Zeroes for Billions\n\t\t\t\t        return Math.abs(Number(labelValue)) >= 1.0e+9\n\n\t\t\t\t        ? Math.round((Math.abs(Number(labelValue)) / 1.0e+9)*10)/10 + \"B\"\n\t\t\t\t        // Six Zeroes for Millions \n\t\t\t\t        : Math.abs(Number(labelValue)) >= 1.0e+6\n\n\t\t\t\t        ? Math.round((Math.abs(Number(labelValue)) / 1.0e+6)*10)/10 + \"M\"\n\t\t\t\t        // Three Zeroes for Thousands\n\t\t\t\t        : Math.abs(Number(labelValue)) >= 1.0e+3\n\n\t\t\t\t        ? Math.round((Math.abs(Number(labelValue)) / 1.0e+3)*10)/10 + \"K\"\n\n\t\t\t\t        : Math.abs(Number(labelValue));\n\n\t\t\t\t    }\n\t\t\t\t})\n\t\t\t\t.on(\"mousemove\", ()=>{\n\t\t\t\t\tdiv.style(\"left\", (d3.event.pageX + 10) + \"px\")\n\t\t\t\t\t\t.style(\"top\", (d3.event.pageY - 10) + \"px\")\n\t\t\t\t})              \n\t\t\t\t.on(\"mouseleave\",function(d){\n\t\t\t\t\td3.selectAll('#'+this.id)\n\t\t\t\t    \t.style('stroke-opacity',0.05)\n\n\t\t\t\t\tdiv.style(\"opacity\", 0)\n\t\t\t\t\t\t.style('z-index',-10)\n\t\t\t\t    \n\t\t\t\t})\n\n\t\t\t\n\t\t\tvar rect = svg.selectAll(\"rect\")\n\t\t\t  \t.data(sankeydata.nodes)\n\t\t\t    .enter()\n\n\t\t\tvar text = svg.selectAll(\"text\")\n\t\t\t  \t.data(sankeydata.nodes)\n\t\t\t    .enter()\n\t\t\t    //.append(\"g\")\n\t\t\t\t//.attr(\"class\", \"node\")\n\t\t\t\t//.attr(\"transform\", function(d) { return \"translate(\" + d.x + \",\" + d.y + \")\"; });\n\n\n\t\t\trect.append(\"rect\")\n\t\t\t\t.attr('id','sankey-rect')\n\t\t\t\t.attr('x',function(d){ return d.x })\n\t\t\t\t.attr('y',function(d){ return d.y })\n\t\t\t\t.attr(\"height\", function(d) { return d.dy; })\n\t\t\t\t.attr(\"width\", sankey.nodeWidth())\n\t\t\t\t.style(\"fill\", function(d) { return d.color = color(d.name); })\n\t\t\t\t.style(\"stroke\", \"none\")\n\t\t\t\t.append(\"title\")\n\t\t\t\t.text(function(d) { return d.name + \"\\n\" + format(d.value); });\n\n\t\t\ttext.append(\"text\")\n\t\t\t\t.attr('id','sankey-text')\n\t\t\t\t.attr('x',function(d){ return d.x-6 })\n\t\t\t\t.attr('y',function(d){ return d.y + (d.dy / 2) })\n\t\t\t\t.attr(\"dy\", \".35em\")\n\t\t\t\t.attr(\"text-anchor\", \"end\")\n\t\t\t\t.attr(\"transform\", null)\n\t\t\t\t.text(function(d) { return d.name; })\n\t\t\t\t.filter(function(d) { return d.x < width / 2; })\n\t\t\t\t.attr(\"x\", 6 + sankey.nodeWidth())\n\t\t\t\t.attr(\"text-anchor\", \"start\");\n\n\t\t\tvar setCountry = (e)=> {\n\t\t\t\t/*console.log('set country')\n\t\t\t\tif(this.state.count == 0){\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tcountry: e,\n\t\t\t\t\t\tcount:1,\n\t\t\t\t\t\tpiechartshow:1\n\t\t\t\t\t},this.drawPieChart)\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tcountry: e\n\t\t\t\t\t})\n\t\t\t\t}*/\n\t\t\t\tthis.props.countryStatus(e)\n\t\t\t}\n\n\n\t\t\tvar linkExtent = d3.extent(sankeydata.links, function (d) {return d.value});\n\t\t\tvar frequencyScale = d3.scaleLinear().domain(linkExtent).range([1,100]);\n\t\t\tvar particleSize = d3.scaleLinear().domain(linkExtent).range([1,5]);\n\n\n\t\t\tsankeydata.links.forEach(function (link) {\n\t\t\t\tlink.freq = frequencyScale(link.value);\n\t\t\t\tlink.particleSize = particleSize(link.value);\n\t\t\t\tlink.particleColor = d3.scaleLinear().domain([0,1000]).range([link.source.color, link.target.color]);\n\t\t\t})\n\n\t\t\tvar t = d3.timer(tick, 2000);\n\t\t\tvar particles = [];\n\n\t\t\tfunction tick(elapsed, time) {\n\t\t\t    particles = particles.filter(function (d) {return d.time > (elapsed - 2000)});\n\n\t\t\t    if (freqCounter > 200) {\n\t\t\t      \tfreqCounter = 1;\n\t\t\t    }\n\n\t\t\t    d3.selectAll(\"path.link\")\n\t\t\t    \t.each(function (d) {\n\t\t        \t\tif (d.freq >= freqCounter) {\n\t\t\t          \t\tvar offset = (Math.random() - .5) * d.dy;\n\t\t\t          \t\tparticles.push({link: d, time: elapsed, offset: offset, path: this})\n\t\t\t        \t}\n\t\t\t      \t});\n\t\t\t    \tparticleEdgeCanvasPath(elapsed);\n\t\t\t    \tfreqCounter++;\n\t\t\t}\n\n\t\t\tfunction particleEdgeCanvasPath(elapsed) {\n\t\t\t    var context = d3.select(\"canvas\").node().getContext(\"2d\")\n\n\t\t\t    context.clearRect(0,0,2000,2000);\n\n\t\t\t      \tcontext.fillStyle = \"gray\";\n\t\t\t      \tcontext.lineWidth = \"1px\";\n\t\t\t    for (var x in particles) {\n\t\t\t        var currentTime = elapsed - particles[x].time;\n\t\t\t        var currentPercent = currentTime / 2000 * particles[x].path.getTotalLength();\n\t\t\t        var currentPos = particles[x].path.getPointAtLength(currentPercent)\n\t\t\t        context.beginPath();\n\t\t\t      \tcontext.fillStyle = particles[x].link.particleColor(currentTime);\n\t\t\t        context.arc(currentPos.x,currentPos.y + particles[x].offset,particles[x].link.particleSize,0,2*Math.PI);\n\t\t\t        context.fill();\n\t\t\t    }\n\t\t\t}\n\t\t})\n\t}\n\tupDate(){\n\t\tconsole.log('sankey update')\n\t\t//d3.select('#sankey-discription-container').style('height',+d3.select('#section2').style('width').slice(0, -2) * 0.3)\n\t\tvar trade = this.props.trade\n\t\tvar category = this.state.category.filter(d=>d.Product == 'AllProducts')\n\t\tthis.createSankeyJson(category).then(sankeydata=>{\n\t\t\t//console.log('sankey update width',+d3.select('#section2').style('width').slice(0, -2))\n\t\t\tvar margin = {top: 50, right: 0, bottom: 0, left: 0},\n\t\t\t\twidth = +d3.select('#section2').style('width').slice(0, -2) * 0.65 - margin.left - margin.right,\n\t\t\t\theight = +d3.select('#section2').style('height').slice(0, -2) *0.7 - margin.top - margin.bottom;\n\n\t\t\t    // width = 1000 - margin.left - margin.right,\n\t\t\t    // height = 500 - margin.top - margin.bottom;\n\n\t\t\td3.select(\"#sankey-svg\")\n\t\t\t    .attr(\"width\", width + margin.left + margin.right)\n\t\t\t    .attr(\"height\", height + margin.top + margin.bottom)\n\n\t\t\td3.select(\"#sankey-canvas\")\n\t\t\t    .attr(\"width\", width + margin.left + margin.right)\n\t\t\t    .attr(\"height\", height + margin.top + margin.bottom)\n\n\t\t\tconsole.log(trade)\n\t\t\tvar formatNumber = d3.format(\",.0f\"),\n\t\t\t    format = function(d) { return formatNumber(d) + \" TWh\"; },\n\t\t\t    color = trade == 'Import'? d3.scaleOrdinal([\"#800000\",\"#A52A2A\",\"#B22222\",\"#FF0000\",\"#DC143C\",\"#FFA07A\",\"#FA8072\",\"#F08080\",\"#CD5C5C\",\"#D2691E\"]): d3.scaleOrdinal([\"#191970\",\"#000080\",\"#00008B\",\"#0000CD\",\"#0000FF\",\"#4169E1\",\"#6495ED\",\"#1E90FF\",\"#00BFFF\",\"#87CEFA\"]);\n\t\t\tconsole.log('color',color('China'))\n\t\t\tvar svg = d3.select(\"#sankey-container\")\n\n\t\t\t//var sankey = this.state.sankey\n\t\t\tvar sankey = Sankey()\n\t\t\t\t\t\t    .nodeWidth(15)\n\t\t\t\t\t\t    .nodePadding(10)\n\t\t\t\t\t\t    .size([width, height]);\n\t\t\tvar freqCounter = 1;\n\n\t\t\tsankey.nodes(sankeydata.nodes)\n\t\t\t\t.links(sankeydata.links)\n\t\t\t\t.layout(32);\n\n\t\t\tsankey.relayout();\n\n\t\t\tvar path = sankey.link();\n\n\t\t\tvar link = svg.selectAll(\".link\").data(sankeydata.links)\n\t\t\t    \n\t\t\tlink.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr(\"d\", path)\n\t\t\t\t.attr(\"stroke-width\", function(d) { return Math.max(1, d.dy); })\n\t\t\t\t.attr('id', function(d){ return trade=='Export' ? d.source.name:d.target.name})\n\t\t\t\t//.sort(function(a, b) { return b.dy - a.dy; })\n\t\t\t\t\n\n\t\t\tlink.enter()\n\t\t\t    .append(\"path\")\n\t\t\t    .attr(\"class\", \"link\")\n\t\t\t\t.attr(\"d\", path)\n\t\t\t\t.attr('id', function(d){ return trade=='Export' ? d.source.name:d.target.name})\n\t\t\t\t.attr(\"stroke-width\", function(d) { return Math.max(1, d.dy); })\n\t\t\t\t//.sort(function(a, b) { return b.dy - a.dy; })\n\t\t\t\t\n\n\t\t\t\n\t\t\tvar rect = svg.selectAll(\"#sankey-rect\")\n\t\t\t  \t.data(sankeydata.nodes)\n\n\n\t\t\tvar text = svg.selectAll(\"#sankey-text\")\n\t\t\t  \t.data(sankeydata.nodes)\n\t\t\t\t//.attr(\"class\", \"node\")\n\t\t\t\t//.attr(\"transform\", function(d) { return \"translate(\" + d.x + \",\" + d.y + \")\"; });\n\n\n\t\t\trect.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('x',function(d){ return d.x })\n\t\t\t\t.attr('y',function(d){ return d.y })\n\t\t\t\t.attr(\"height\", function(d) { return d.dy; })\n\t\t\t\t//.attr(\"width\", sankey.nodeWidth())\n\t\t\t\t.style(\"fill\", function(d) { return d.color = color(d.name);})\n\t\t\t\t/*.attr(\"stroke\", \"none\")\n\t\t\t\t.append(\"title\")*/\n\t\t\t\t.text(function(d) { return d.name + \"\\n\" + format(d.value); });\n\n\t\t\ttext.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('x',function(d){ return d.x-6 })\n\t\t\t\t.attr('y',function(d){ return d.y + (d.dy / 2) })\n\t\t\t\t.attr(\"dy\", \".35em\")\n\t\t\t\t.attr(\"text-anchor\", \"end\")\n\t\t\t\t.attr(\"transform\", null)\n\t\t\t\t.text(function(d) { return d.name; })\n\t\t\t\t.filter(function(d) { return d.x < width / 2; })\n\t\t\t\t.attr(\"x\", 6 + sankey.nodeWidth())\n\t\t\t\t.attr(\"text-anchor\", \"start\");\n\n\t\t\trect.enter()\n\t\t\t\t.append(\"rect\")\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('id','sankey-rect')\n\t\t\t\t.attr('x',function(d){ return d.x })\n\t\t\t\t.attr('y',function(d){ return d.y })\n\t\t\t\t.attr(\"height\", function(d) { return d.dy; })\n\t\t\t\t.attr(\"width\", sankey.nodeWidth())\n\t\t\t\t//.style(\"fill\", function(d) { return d.color = color(d.name); })\n\t\t\t\t.style(\"fill\", function(d) { return d.color = color(d.name);})\n\t\t\t\t.style(\"stroke\", \"none\")\n\t\t\t\t//.append(\"title\")\n\t\t\t\t//.text(function(d) { return d.name + \"\\n\" + format(d.value); });\n\n\t\t\ttext.enter()\n\t\t\t\t.append(\"text\")\n\t\t\t\t.transition()\n\t\t\t\t.duration(1000)\n\t\t\t\t.attr('id','sankey-text')\n\t\t\t\t.attr('x',function(d){ return d.x-6 })\n\t\t\t\t.attr('y',function(d){ return d.y + (d.dy / 2) })\n\t\t\t\t.attr(\"dy\", \".35em\")\n\t\t\t\t.attr(\"text-anchor\", \"end\")\n\t\t\t\t.attr(\"transform\", null)\n\t\t\t\t.text(function(d) { return d.name; })\n\t\t\t\t.filter(function(d) { return d.x < width / 2; })\n\t\t\t\t.attr(\"x\", 6 + sankey.nodeWidth())\n\t\t\t\t.attr(\"text-anchor\", \"start\");\n\n\t\t\trect.exit()\n\t\t\t\t.remove();\n\n\t\t\ttext.exit()\n\t\t\t\t.remove();\n\n\t\t\tlink.exit()\n\t\t\t\t.remove();\n\n\t\t\tvar linkExtent = d3.extent(sankeydata.links, function (d) {return d.value});\n\t\t\tvar frequencyScale = d3.scaleLinear().domain(linkExtent).range([1,100]);\n\t\t\tvar particleSize = d3.scaleLinear().domain(linkExtent).range([1,5]);\n\n\n\t\t\tsankeydata.links.forEach(function (link) {\n\t\t\t\tlink.freq = frequencyScale(link.value);\n\t\t\t\tlink.particleSize = particleSize(link.value);\n\t\t\t\tlink.particleColor = d3.scaleLinear().domain([0,1000]).range([link.source.color, link.target.color]);\n\t\t\t})\n\n\t\t\tvar t = d3.timer(tick, 2000);\n\t\t\tvar particles = [];\n\n\t\t\tfunction tick(elapsed, time) {\n\t\t\t    particles = particles.filter(function (d) {return d.time > (elapsed - 2000)});\n\n\t\t\t    if (freqCounter > 200) {\n\t\t\t      \tfreqCounter = 1;\n\t\t\t    }\n\n\t\t\t    d3.selectAll(\"path.link\")\n\t\t\t    \t.each(function (d) {\n\t\t        \t\tif (d.freq >= freqCounter) {\n\t\t\t          \t\tvar offset = (Math.random() - .5) * d.dy;\n\t\t\t          \t\tparticles.push({link: d, time: elapsed, offset: offset, path: this})\n\t\t\t        \t}\n\t\t\t      \t});\n\t\t\t    \tparticleEdgeCanvasPath(elapsed);\n\t\t\t    \tfreqCounter++;\n\t\t\t}\n\n\t\t\tfunction particleEdgeCanvasPath(elapsed) {\n\t\t\t    var context = d3.select(\"canvas\").node().getContext(\"2d\")\n\n\t\t\t    context.clearRect(0,0,2000,2000);\n\n\t\t\t      \tcontext.fillStyle = \"gray\";\n\t\t\t      \tcontext.lineWidth = \"1px\";\n\t\t\t    for (var x in particles) {\n\t\t\t        var currentTime = elapsed - particles[x].time;\n\t\t\t        var currentPercent = currentTime / 2000 * particles[x].path.getTotalLength();\n\t\t\t        var currentPos = particles[x].path.getPointAtLength(currentPercent)\n\t\t\t        context.beginPath();\n\t\t\t      \tcontext.fillStyle = particles[x].link.particleColor(currentTime);\n\t\t\t        context.arc(currentPos.x,currentPos.y + particles[x].offset,particles[x].link.particleSize,0,2*Math.PI);\n\t\t\t        context.fill();\n\t\t\t    }\n\t\t\t}\n\t\t})\n\t\t\n    }\n\n\tcreateSankeyJson(category){\n\t\treturn new Promise(resolve=>{\n\t\t\t//console.log(category)\n\n\t\t\tvar data = {}\n\t\t\t\tdata['nodes'] = []\n\t\t\t\tdata['links'] = []\n\t\t\tvar\ttemp = []\n\t\t\tvar index = {}\n\n\n\n\t\t\tfor(var i=0 ; i < this.state.countries.length; i++){\n\t\t\t\ttemp.push({'name': this.state.countries[i]}) \n\t\t\t\tindex[this.state.countries[i]] = i\n\t\t\t}\n\t\t\ttemp.push({'name': 'United-States'})\n\t\t\ttemp.push({'name': 'China'})  \n\n\t\t\tdata['nodes'] = temp\n\n\t\t\tif(index['China'] > index['Germany']){\n\t\t\t\tvar c = index['Germany']\n\t\t\t\tindex['Germany'] = index['China']\n\t\t\t\tindex['China'] = c\n\n\t\t\t\tvar d = data['nodes'][index['Germany']]\n\t\t\t\tdata['nodes'][index['Germany']] = data['nodes'][index['China']]\n\t\t\t\tdata['nodes'][index['China']] = d\n\t\t\t}\n\t\t\tif(index['United-States'] > index['Germany']){\n\t\t\t\tvar c = index['Germany']\n\t\t\t\tindex['Germany'] = index['United-States']\n\t\t\t\tindex['United-States'] = c\n\n\t\t\t\tvar d = data['nodes'][index['Germany']]\n\t\t\t\tdata['nodes'][index['Germany']] = data['nodes'][index['United-States']]\n\t\t\t\tdata['nodes'][index['United-States']] = d\n\t\t\t}\n\t\t\tvar chinaIndex = index['China']\n\t\t\tvar usIndex = index['United-States']\n\n\n\t\t\ttemp = []\n\n\t\t\t//category.forEach(d=>temp.push({\"source\":index[d.Reporter],\"target\":index[d.Partner],\"value\":d.Value}))\n\t\t\tfor(i=0 ; i < category.length; i++){\n\t\t\t\tvar source = index[category[i].Reporter]\n\t\t\t\tif(source==chinaIndex){\n\t\t\t\t\tsource = 11\n\t\t\t\t}\n\t\t\t\telse if(source==usIndex){\n\t\t\t\t\tsource = 10\n\t\t\t\t}\n\t\t\t\ttemp.push({\"source\":source,\"target\":index[category[i].Partner],\"value\":category[i].Value})\n\t\t\t}\n\t\t\t\n\t\t\t//temp.push({\"source\":12,\"target\":index['China'],\"value\":category[i].Value})\n\t\t\t//temp.push({\"source\":13,\"target\":index['United-States'],\"value\":category[i].Value})\n\t\t\t\n\t\t\tdata['links'] = temp\n\n\t\t\t//console.log(data,index)\n\n\t\t\t//data['links'] = data['links'].filter(d=>d.source != 0 && d.source != 1)\n\t\t\t//console.log(data)\n\t\t\tif(this.props.trade == 'Import'){\n\t\t\t\tfor(var i=0; i < data['links'].length ; i++){\n\t\t\t\t\tvar temp = 20\n\t\t\t\t\ttemp = data['links'][i]['source']\n\t\t\t\t\tdata['links'][i]['source'] = data['links'][i]['target']\n\t\t\t\t\tdata['links'][i]['target'] = temp\n\t\t\t\t}\n\t\t\t}\n\t\t\tresolve(data)\n\t\t})\n\t}\n\n\tupDateTitle(){\n\t\td3.select('#year').html(this.props.year)\n\t\td3.select('#trade').html( ' '+this.props.trade)\n\t\tif(this.props.trade =='Import'){\n\t\t\td3.select('#direction').html('from')\n\t\t}else{\n\t\t\td3.select('#direction').html('to')\n\t\t}\n\t}\n\n\n\trender(){\n\t\treturn(\n\n\t\t\t<div id='sankey'>\n\n\t\t\t\t<div id='sankey-discription-container'>\n\t\t\t\t\t<h2><span id='year'>{this.props.year} </span><span id='trade'>{this.props.trade}</span> Flow <span id='direction'>to</span> U.S. & China</h2>\n\t\t\t\t\t<p>Sankey diagram shows how the trade flow from the top 10 countries (with the highest trade value) to the U.S. and China.<br></br>The donut chart(s) will show the breakdown trade information by category.</p> {/*The top donut chart<br></br> is a trade value breakdown by category, from each country to the U.S., the bottom donut chart shows the same trade information for China.</p>*/} \n\t\t\t\t\t<div id='instruction-box'><p>Instruction: Choose Year, Trade(Export/Import), Country on sidebar, the trading flow will be shown <br></br> on the sankey diagram, donut chart(s) will show the breakdown trade information by category.</p></div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div id='sankey-container'></div>  \n\t\t\t\t<Pie year={this.props.year} trade={this.props.trade} country={this.props.country}/>\n\t\t\t</div>\n\t\t)\n\t}\n\n}","import React, { Component } from 'react';\nimport * as d3 from 'd3'\nimport categoryData from './data/category.csv'\nimport dd from './data/linechartdata.csv'\n\nexport default class Line extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcount:0,\n            category: [],\n            product: []\n\t\t}\n        this.upDate = this.upDate.bind(this);\n        this.drawChart = this.drawChart.bind(this);\n        this.convert = this.convert.bind(this);\n\t}\n\n    shouldComponentUpdate(nextProps){\n        if(this.props.trade !== nextProps.trade || this.props.year !== nextProps.year || this.props.country !== nextProps.country){\n            return true;\n        }\n        else{\n            return false;\n        }\n    }\n    componentDidMount(){\n        this.setData().then((d)=>{\n            this.drawChart(d)\n            //this.drawCategoryChart()\n        })\n    }\t\n\tcomponentDidUpdate() {\n        this.setData().then((d)=>{\n            this.upDate(d)\n            //this.drawCategoryChart()\n        })\n\t}\n    setData(data) {\n        return new Promise(resolve=>{\n            /*d3.csv(categoryData,function(d){\n                var year = this.props.year\n                if(d.Trade == this.props.trade)\n                return {\n                    Reporter : d.Reporter,\n                    Partner : d.Partner,\n                    Product : d.Product,\n                    Trade : d.Trade,\n                    Value : +d[year],\n                    Year: year\n                }\n            }.bind(this)).then(function(category){\n                var flags = [],\n                    product = [], \n                    l = category.length, \n                    i;\n                for( i=0; i<l; i++) {\n                    if( flags[category[i].Product]) continue;\n                    flags[category[i].Product] = true;\n                    product.push(category[i].Product);\n                }\n                product = product.filter(d=> d!='AllProducts')\n                console.log('product',product)\n\n                this.setState({\n                    category: category,\n                    product: product\n                })\n                resolve('ture')\n            }.bind(this))*/\n            /*d3.csv(dd).then(function (data) {\n\n                console.log(data)\n                var countries = data.columns.slice(1).map(function(c){\n                    return{\n                        country: c,\n                        value : data.map(function(d){\n                            return{\n                                year: +d.Year,\n                                ap: +d[c]\n                            }\n                        })\n                    }\n                })\n                console.log(countries)\n                resolve(countries)\n            })*/\n\n            d3.csv(categoryData).then(function (data) {\n                //Change partner\n                var dataUS = data.filter(d=>d['Reporter']!='China'&&d['Partner']=='United-States'&&d['Trade']==this.props.trade&&d['Product']=='AllProducts')\n                var dataCN = data.filter(d=>d['Reporter']!='United-States'&&d['Partner']=='China'&&d['Trade']==this.props.trade&&d['Product']=='AllProducts')\n                console.log(dataUS,dataCN)\n                dataUS['value'] = []\n                var countriesUS = dataUS.map((d)=>{\n                    d['value'] = []\n                    for(var i=2016;i>2005;i--){\n                        d['value'].push({\n                            year: i.toString(),\n                            ap:+d[i.toString()]\n                        })\n                    }\n                    return ({\n                        country:d['Reporter'],\n                        value: d['value']\n                    })\n                })\n                \n                 \n                //var cc = data.row(function(d) { return {key: d.key}; })\n                console.log(countriesUS)\n                resolve(countriesUS)\n            }.bind(this))\n\n            \n        })\n    }\n\n\tdrawChart(countries) {\n        console.log('draw line',countries)\n        var margin = { top: 10, bottom: 80, left: 80, right: 80 }\n        var width = 1000 - margin.left - margin.right;\n        var height = 1000 - margin.top - margin.bottom;\n\n        var x = d3.scalePoint().range([width, 0])\n        var y = d3.scaleLinear().range([height, 0])\n        var z = d3.scaleOrdinal(d3.schemeCategory10)\n\n        x.domain([2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006])\n        y.domain([\n            //d3.max(countries,function(d){ return d3.max(d.value,function(e){ return e.ap })}),\n            d3.min(countries,function(d){ return d3.min(d.value,function(e){ return e.ap })}),\n            d3.max(countries,function(d){ return d3.max(d.value,function(e){ return e.ap })})\n            \n        ])\n\n        z.domain(countries.map(function(d){return d.country}))\n\n        var xAxis = d3.axisBottom(x)\n        var yAxis = d3.axisLeft(y)\n\n        var lineAll = d3.line()\n            .curve(d3.curveBasis)\n            .x(function(d) { return x(d['year']); })\n            .y(function(d) { return y(d['ap']); });\n\n        /*var lineCat = d3.line()\n            .x(function(d) { return x(d['year']); })\n            .y(function(d) { return y(d['gdp']); });*/\n\n        \n\n        var svg = d3.select('#line')\n            .append('svg')\n            .attr('width',width + margin.left + margin.right)\n            .attr('height',height + margin.top + margin.bottom)\n            .append('g')\n            .attr('id','line-svg')\n            .attr('transform','translate(' +margin.left+ ',' +margin.top+ ')')\n\n        svg.append(\"g\")\n            .attr(\"class\", \"xAxis\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(xAxis)\n            .append('text')\n            .attr('id','text-x')\n            .attr(\"transform\", \"translate(\"+(width/2)+\",15)\")\n            .attr(\"dy\", \"0.71em\")\n            .attr(\"fill\", \"#000\")\n            .style(\"text-anchor\", \"middle\")\n            .text(\"Years\");\n\n        svg.append(\"g\")\n            .attr(\"class\", \"yAxis\")\n            .call(yAxis)\n            .selectAll(\"text\")\n            .text((d)=>{ return this.convert(d) })\n\n        svg.select('.yAxis')\n            .append(\"text\")\n            .attr('id','text-y')\n            .attr(\"transform\", \"rotate(-90)\")\n            .attr(\"y\", 6)\n            .attr(\"dy\", \"0.71em\")\n            .attr(\"fill\", \"#000\")\n            .text(\"US Dollars\");\n\n        var country = svg.selectAll('.country')\n            .data(countries,function(d){ return d.country })\n            .enter()\n            .append('g')\n            .attr('class','country')\n\n        country.append('path')\n            .attr('fill','none')\n            .attr('class','line')\n            .attr('id',function(d){ return 'line-'+d.country })\n            .attr('d',function(d){ return lineAll(d.value)})\n            .attr('opacity',1)\n            .attr('stroke-width',3)\n            .style(\"stroke\", function(d) { return z(d.country); })\n            .on('mouseover',function(){\n                d3.select(this).attr('stroke-width',6);\n            })\n            .on('mouseout',function(){\n                d3.select(this).attr('stroke-width', 3);\n            })\n\n        //legend\n\n        /*var g = country.append('g')\n            .attr('id',function(d){ return 'legend'+d.country })\n            .on(\"click\",function(d){\n                //console.log(d3.select('#line-'+d.country).attr('opacity'))\n                if(d3.select('#line-'+d.country).attr('opacity') == '0'){\n                    d3.select('#line-'+d.country).attr('opacity',1)\n                }else if(d3.select('#line-'+d.country).attr('opacity') == '1'){\n                    d3.select('#line-'+d.country).attr('opacity',0)\n                }\n                \n            })\n\n        g.append('circle')\n            .attr('class','lcircle')\n            .attr('cx',width + margin.right/5)\n            .attr('cy',function(d,i){ return i*(height/15) })\n            .attr('fill', function(d) { return z(d.country); })\n            .attr('r',8)\n\n        g.append('text')\n            .attr('class','ltext')\n            .attr('x',width + margin.right/4)\n            .attr('y',function(d,i){ return i*(height/15) })\n            .attr(\"fill\", \"#000\")\n            .attr(\"alignment-baseline\",\"middle\")\n            .text(function(d){ return d.country })*/\n\n\t}\n\n\tupDate(countries) {\n        console.log('update line',countries)\n        countries = countries.filter(d=>d!=null)\n        var margin = { top: 10, bottom: 80, left: 80, right: 80 }\n        var width = 1000 - margin.left - margin.right;\n        var height = 1000 - margin.top - margin.bottom;\n\n        var x = d3.scalePoint().range([width, 0])\n        var y = d3.scaleLinear().range([height, 0])\n        var z = d3.scaleOrdinal(d3.schemeCategory10)\n\n        x.domain([2016,2015,2014,2013,2012,2011,2010,2009,2008,2007,2006])\n        y.domain([\n            //d3.max(countries,function(d){ return d3.max(d.value,function(e){ return e.ap })}),\n            d3.min(countries,function(d){ return d3.min(d.value,function(e){ return e.ap })}),\n            d3.max(countries,function(d){ return d3.max(d.value,function(e){ return e.ap })})\n            \n        ])\n\n        z.domain(countries.map(function(d){return d.country}))\n\n        var xAxis = d3.axisBottom(x)\n        var yAxis = d3.axisLeft(y)\n\n        var lineAll = d3.line()\n            .curve(d3.curveBasis)\n            .x(function(d) { return x(d['year']); })\n            .y(function(d) { return y(d['ap']); });\n\n        var svg = d3.select('#line-svg')\n        \n        svg.selectAll('path')\n            .data(countries,function(d){\n                //console.log(d)\n                if(d){\n                    return d.country\n                } \n            })\n            .transition()\n            .duration(1000)\n            .attr('d',function(d){ return lineAll(d.value)})\n\n        svg.select('.yAxis')\n            .transition()\n            .duration(1000)\n            .call(yAxis)\n            .selectAll(\"text\")\n            .text((d)=>{ return this.convert(d) })\n\n\n\n\t}\n    convert(labelValue) {\n        // Nine Zeroes for Billions\n        return Math.abs(Number(labelValue)) >= 1.0e+9\n\n        ? Math.round((Math.abs(Number(labelValue)) / 1.0e+9)*10)/10 + \"B\"\n        // Six Zeroes for Millions \n        : Math.abs(Number(labelValue)) >= 1.0e+6\n\n        ? Math.round((Math.abs(Number(labelValue)) / 1.0e+6)*10)/10 + \"M\"\n        // Three Zeroes for Thousands\n        : Math.abs(Number(labelValue)) >= 1.0e+3\n\n        ? Math.round((Math.abs(Number(labelValue)) / 1.0e+3)*10)/10 + \"K\"\n\n        : Math.abs(Number(labelValue));\n\n    }\n\n\n    \n\n\n\trender() {\n\t\treturn (\n            <div>\n                <h3>Trade Overview for China, U.S. & the World</h3>\n                    \n                <p>A global trade war could hurt consumers around the world by making it harder for all companies to operate,<br></br> forcing them to push higher prices onto their customers,This project<br></br>intends to visualize trading value around the world,</p>\n                <br></br>\n                <div id='lineContainer'>\n        \t\t\t\n                    <div id='line'></div>\n                </div>\n            </div>\n\t\t)\n\t}\n\n}","import React, { Component } from 'react'\n\nexport default class Title extends Component {\n    componentDidMount() {\n        this.drawChart();\n    }\n    drawChart() {\n        //var svg = d3.select('#title')\n    }\n    render() {\n        return (\n            /*<div className='title'></div>*/\n\n            /*<div className='title'>\n                <span><h1>Trade Overview for China, U.S. & the World</h1></span>\n                <span><h4> In 2018, the president of the United States has placed tariffs on billions of dollars’ worth of goods from around the world,<br></br> in particular, China, the second-largest economy in the world. <br></br>Mr. Trump wanted to cut the trade deficit with China - a country he had accused of unfair trade practices since before he became president.<br></br> Up until September 2018, U.S. slapped tariffs on $200 billion of Chinese imports. <br></br>Those tariffs will increase to 25% from 10% at the start of next year unless the two countries agree on a deal. <br></br>China has retaliated by placing tariffs on US agricultural and industrial products, <br></br>from soybeans, pork and cotton to aeroplanes, cars and steel pipes (BBC).</h4></span>\n                <span><h4>A global trade war could hurt consumers around the world by making it harder for all companies to operate,<br></br> forcing them to push higher prices onto their customers.</h4></span>\n                <span><h4>This project intends to visualize trading value around the world, with a focus on China, U.S.,<br></br> and the trading relationships between other countries with China and U.S.</h4></span>\n            </div>*/\n\n            <div className=\"container-fluid\" id='title'>\n                <h1>Trade Overview for China, U.S. & the World</h1>\n                <br></br>\n                <p>In 2018, the president of the United States has placed tariffs on billions of dollars’ worth of goods from around the world, in particular, China, the second-largest economy in the world. Mr. Trump wanted to cut the trade deficit with China - a country he had accused of unfair trade practices since before he became president. Up until September 2018, U.S. slapped tariffs on $200 billion of Chinese imports. Those tariffs will increase to 25% from 10% at the start of next year unless the two countries agree on a deal. China has retaliated by placing tariffs on US agricultural and industrial products, from soybeans, pork and cotton to aeroplanes, cars and steel pipes (BBC).</p>\n                <p>The US-China trade war clearly would have broader, lasting effects on the world. It would hurt consumers around the world by making it harder for all companies to operate, forcing them to push higher prices onto their customers. “When you have the world’s two largest economies at odds, that’s a situation where everyone suffers,” Maurice Obstfeld, the International Monetary Fund (IMF) chief economist commented during an interview of a report that projected the global economy. He added that global growth could further drop “close to a percentage point” if the trade war continues.</p>\n                <p>This project aims to visualize trading value around the world, with a focus on China, U.S., and the trading relationships between other countries with China and U.S. Navigation bar is on the left, please feel free to scroll down this web page to learn more, or click the video link and the report link for a more comprehensive demonstration of this visulizations.</p>\n                <br></br>\n                <br></br>\n                <a href=\"\">Video link</a>\n                <br></br>\n                <a href=\"\">Report link</a>\n                <br></br>\n                <br></br>\n                <p>source: https://www.vox.com/2018/10/9/17955106/imf-economy-trump-trade-war-growth<br></br>https://www.bbc.com/news/world-43512098</p>\n            </div>\n        )\n    }\n}","import React, { Component } from 'react';\n\n\nexport default class CountryBtn extends Component{\n\n\trender(){\n\t\treturn(\n\t\t\t\n\t\t\t<select id='country-selector' value={this.props.country} onChange={(e)=>this.props.onClick(e.target.value)}>\n\t\t  \t\t<option value='United-States' >United-States</option>\n\t\t  \t\t<option value='China' >China</option>\n\t\t  \t\t<option value='Korea' >Korea</option>\n\t\t  \t\t<option value='Germany' >Germany</option>\n\t\t  \t\t<option value='Poland' >Poland</option>\n\t\t  \t\t<option value='Indonesia' >Indonesia</option>\n\t\t  \t\t<option value='Mexico' >Mexico</option>\n\t\t  \t\t<option value='Belgium' >Belgium</option>\n\t\t  \t\t<option value='Canada' >Canada</option>\n\t\t  \t\t<option value='Turkey' >Turkey</option>\n\t\t  \t\t<option value='Russia' >Russia</option>\n\t\t  \t\t<option value='Italy' >Italy</option>\n\t\t  \t\t<option value='Japan' >Japan</option>\n\t\t  \t\t<option value='United-Kingdom' >United-Kingdom</option>\n\t\t  \t\t<option value='France' >France</option>\n\t\t  \t\t<option value='Switzerland' >Switzerland</option>\n\t\t  \t\t<option value='Netherlands' >Netherlands</option>\n\t\t  \t\t<option value='Spain' >Spain</option>\n\t\t  \t\t<option value='India' >India</option>\n\t\t\t</select>\n\n\t\t)\n\t}\n\n}","import React, { Component } from 'react'\nimport TimeLine from './TimeLine'\nimport TradeBtn from './TradeBtn'\nimport CountryBtn from './CountryBtn'\n\n\n\n\nexport default class SideBar extends Component {\n\n    render() {\n\n\n        return (\n\n\n            <div id=\"sidebar-wrapper\" >\n                <ul className=\"sidebar-nav\">\n                    <li className=\"sidebar-brand\">\n                        \n                    </li>\n                    <li>\n                        <a onClick={()=>this.props.toTop()}><span>Introduction</span></a>\n                    </li>\n                    <li>\n                        <a onClick={()=>this.props.goTo('section1')}><span>Section1</span></a>\n                    </li>\n                    <li>\n                        <a onClick={()=>this.props.goTo('section2')}><span>Section2</span></a>\n                    </li>\n                    <li>\n                        <a onClick={()=>this.props.goTo('section3')}><span>Section3</span></a>\n                    </li>\n                    <li>\n                        <TimeLine year={this.props.year} trade={this.props.trade} onClick={this.props.yearStatus}/>\n                    </li>\n                    <li>\n                        <TradeBtn year={this.props.year} trade={this.props.trade} onClick={this.props.tradeStatus}/>\n                    </li>\n                    <li>\n                        <CountryBtn year={this.props.year} trade={this.props.trade} country={this.props.country} onClick={this.props.countryStatus}/>\n                    </li>\n                </ul>\n            </div>\n        )\n    }\n}","import React, { Component } from 'react';\nimport './App.css';\n//import './test.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport WorldMap from './WorldMap'\n//import TimeLine from './TimeLine'\n//import TradeBtn from './TradeBtn'\nimport Ranking from './Ranking'\nimport SparkLines from './SparkLines'\nimport Value from './Value'\nimport SankeyGraph from './Sankey'\nimport Bar from './BarChart'\nimport Line from './LineChart'\n//import SankeyGraph from './SankeyTest'\n//import ScrollerAnchor from './ScrollerAnchor'\nimport ScrollableAnchor,{goToTop, goToAnchor} from 'react-scrollable-anchor'\nimport Title from './Title'\nimport SideBar from './SideBar'\n\nclass App extends Component {\n\n    constructor(props){\n        super(props);\n        this.state={\n            year:2016,\n            trade:'Export',\n            Country:''\n        }\n        this.yearStatus = this.yearStatus.bind(this);\n        this.tradeStatus = this.tradeStatus.bind(this);\n        this.countryStatus = this.countryStatus.bind(this);\n    }\n\n    yearStatus(year){\n        console.log('clicked',year)\n        this.setState({\n            year:year\n        })\n    }\n\n    tradeStatus(trade){\n        console.log('clicked',trade)\n        this.setState({\n            trade:trade\n        })\n    }\n    countryStatus(country){\n        console.log('clicked',country)\n        this.setState({\n            country:country\n        })\n    }\n    toTop(){\n        goToTop()\n    }\n    goTo(e){\n        goToAnchor(e)\n    }\n\n    render() {\n        return(\n            /*<div className='vis'>\n                <div class=\"sidenav\">\n                    <a onClick={()=>this.toTop()}>Title</a>\n                    <a onClick={()=>this.goTo('section1')}>Section1</a>\n                    <a onClick={()=>this.goTo('section2')}>Section2</a>\n                    <a onClick={()=>this.goTo('section3')}>Section3</a>\n                </div>\n                <ScrollableAnchor id={'title'}>\n                    <Title onclick={this.goTo}/>\n                </ScrollableAnchor>\n                <ScrollableAnchor id={'section1'}>\n                    <div className='section-1'>\n                        <div className='world-container'>\n                            <WorldMap year={this.state.year} trade={this.state.trade}/>\n                            <Ranking year={this.state.year} trade={this.state.trade}/>\n                            <SparkLines year={this.state.year} trade={this.state.trade}/>\n                            <Value year={this.state.year} trade={this.state.trade}/>\n                        </div>\n                    </div>\n                </ScrollableAnchor>*/\n                    /*<div className='selector'>\n                        <TimeLine year={this.state.year} trade={this.state.trade} onClick={this.yearStatus}/>\n                        <TradeBtn year={this.state.year} trade={this.state.trade} onClick={this.tradeStatus}/>\n                        <button onClick={()=>this.toTop()}>hhhhhh</button>\n                        <button onClick={()=>this.goTo('section1')}>1</button>\n                        <button onClick={()=>this.goTo('section2')}>2</button>\n                        <button onClick={()=>this.toTop()}>3</button>\n                    </div>*/\n                /*<ScrollableAnchor id={'section2'}>\n                    <div className='section-2'>\n                        <SankeyGraph year={this.state.year} trade={this.state.trade}/>\n                    </div>\n                </ScrollableAnchor>\n                <ScrollableAnchor id={'section3'}>\n                    <div className='section3'>\n                    </div>\n                </ScrollableAnchor>\n            </div>*/\n            <div id=\"wrapper\">\n                <SideBar goTo={this.goTo} toTop={this.toTop} year={this.state.year} trade={this.state.trade} country={this.state.country} yearStatus={this.yearStatus} tradeStatus={this.tradeStatus} countryStatus={this.countryStatus}/>\n                <div id=\"page-content-wrapper\">\n                    <Title/>\n                    <div className='world-container' id='section1'>\n                        <div id='worldmap-text-container'>\n                            <div id='worldmap-text'>\n                                <h2><span id='year'>{this.state.year} </span><span id='trade'>{this.state.trade}</span> Total Value Rankings by Country</h2>\n                                <p>This visualization is an overview of the total trade value around the world from 2006 to 2016<br></br>Ranking of the top 10 countries with the highest trade value is on the right hand side. <br></br>Sparklines show the trend from 2006 to 2016 for the top 10 countries.</p>\n                            </div>\n\n                            <div id='instruction-box'><p>Instruction: Choose Year, Trade (Export/Import) on the sidebar to show information</p></div>\n                        </div>\n                        <WorldMap year={this.state.year} trade={this.state.trade} yearStatus={this.yearStatus} tradeStatus={this.tradeStatus}/>\n                        <div id='worldmap-info-container'>\n                            <Ranking year={this.state.year} trade={this.state.trade}/>\n                            <SparkLines year={this.state.year} trade={this.state.trade}/>\n                            <Value year={this.state.year} trade={this.state.trade}/>\n                        </div>\n                    </div>\n                \n                \n                    <div id='section2'>\n                        <SankeyGraph year={this.state.year} trade={this.state.trade} country={this.state.country} yearStatus={this.yearStatus} tradeStatus={this.tradeStatus} countryStatus={this.countryStatus}/>\n                    </div>\n                    <div id='section3'>\n                        <Bar year={this.state.year} trade={this.state.trade} country={this.state.country} />\n                    </div>\n\n                    {/*<div id='section4'>\n                        <Line year={this.state.year} trade={this.state.trade} country={this.state.country} />\n                    </div>*/}\n                </div>\n\n            </div>\n        )\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/world_trade_value.948c800d.csv\";"],"sourceRoot":""}