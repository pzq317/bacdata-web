{"ast":null,"code":"import _classCallCheck from \"/Users/pzq317/Desktop/bacdata-web/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pzq317/Desktop/bacdata-web/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/pzq317/Desktop/bacdata-web/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/pzq317/Desktop/bacdata-web/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/pzq317/Desktop/bacdata-web/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/pzq317/Desktop/bacdata-web/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/pzq317/Desktop/bacdata-web/src/BarChart.js\";\nimport React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport categoryData from './data/category.csv';\n\nvar Bar =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Bar, _Component);\n\n  function Bar(props) {\n    var _this;\n\n    _classCallCheck(this, Bar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Bar).call(this, props));\n    _this.state = {\n      count: 0,\n      category: [],\n      product: [],\n      stateSelect: 1\n    };\n    _this.upDate = _this.upDate.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.drawChart = _this.drawChart.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.convert = _this.convert.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Bar, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      if (this.props.trade !== nextProps.trade || this.props.year !== nextProps.year || this.props.country !== nextProps.country || this.state.stateSelect !== nextState.stateSelect) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.setData().then(function () {\n        _this2.drawChart();\n\n        _this2.drawLegend(); //this.drawCategoryChart()\n\n      });\n      window.addEventListener('resize', this.upDate);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this3 = this;\n\n      this.setData().then(function () {\n        _this3.upDate();\n\n        _this3.upDateTitle();\n      });\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(data) {\n      var _this4 = this;\n\n      return new Promise(function (resolve) {\n        d3.csv(categoryData, function (d) {\n          var year = this.props.year;\n          if (d.Trade == this.props.trade) return {\n            Reporter: d.Reporter,\n            Partner: d.Partner,\n            Product: d.Product,\n            Trade: d.Trade,\n            Value: +d[year],\n            Year: year\n          };\n        }.bind(_this4)).then(function (category) {\n          var flags = [],\n              product = [],\n              l = category.length,\n              i;\n\n          for (i = 0; i < l; i++) {\n            if (flags[category[i].Product]) continue;\n            flags[category[i].Product] = true;\n            product.push(category[i].Product);\n          }\n\n          product = product.filter(function (d) {\n            return d != 'AllProducts';\n          }); //console.log('product',product)\n\n          this.setState({\n            category: category,\n            product: product\n          });\n          resolve('ture');\n        }.bind(_this4));\n      });\n    }\n  }, {\n    key: \"drawChart\",\n    value: function drawChart() {\n      var _this5 = this;\n\n      console.log('draw bar');\n      var dataUS = this.state.category.filter(function (d) {\n        return d.Reporter == _this5.props.country && d.Product != 'AllProducts' && d.Partner == \"United-States\";\n      });\n      var dataCN = this.state.category.filter(function (d) {\n        return d.Reporter == _this5.props.country && d.Product != 'AllProducts' && d.Partner == \"China\";\n      });\n      var cateData = [];\n      var margin = {\n        top: 30,\n        bottom: 80,\n        left: 80,\n        right: 30\n      },\n          width = +d3.select('#section3').style('width').slice(0, -2) - margin.left - margin.right,\n          height = +d3.select('#section3').style('height').slice(0, -2) * 0.7 - margin.top - margin.bottom; // var width = 1000 - margin.left - margin.right;\n      // var height = 500 - margin.top - margin.bottom;\n\n      var svg = d3.select('#bar').append('svg').attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom).attr('id', 'bar-svg-svg').append('g').attr('id', 'bar-svg').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n      svg.select('rect').data(cateData).append('g');\n      svg.append('g').attr(\"class\", \"yAxis\");\n      svg.append('g').attr(\"transform\", \"translate(0,\" + height + \")\").attr(\"class\", \"xAxis\");\n      svg.append('text').attr('x', width / 2).attr('y', height / 2).text('Please Select a Country').attr('font-size', '20').attr(\"text-anchor\", \"middle\");\n      /*var max = d3.max(data,function(d){return d['2017_RuralPopulation']})\n       var yAxisScale = d3.scaleLinear()\n          .domain([max +20,0])\n          .range([0,height])\n       var xBarAxisScale = d3.scaleBand()\n          .domain(countries)\n          .range([0,width])\n          .paddingInner(0.05)\n          .paddingOuter(0.1)*/\n    }\n  }, {\n    key: \"upDate\",\n    value: function upDate() {\n      var _this6 = this;\n\n      //console.log('update bar')\n      // var margin = { top: 30, bottom: 80, left: 80, right: 30 }\n      // var width = 1000 - margin.left - margin.right;\n      // var height = 500 - margin.top - margin.bottom;\n      var margin = {\n        top: 30,\n        bottom: 80,\n        left: 80,\n        right: 30\n      },\n          width = +d3.select('#section3').style('width').slice(0, -2) - margin.left - margin.right,\n          height = +d3.select('#section3').style('height').slice(0, -2) * 0.7 - margin.top - margin.bottom;\n      console.log(width, height); //width = +d3.select('#bar').style('width').slice(0, -2) - margin.left - margin.right,\n      //height = +d3.select('#bar').style('height').slice(0, -2) - margin.top - margin.bottom;\n\n      var colorExport = d3.scaleOrdinal().domain(['United-States', 'China']).range([\"#2166CC\", \"#CC5343\"]);\n      var dataUS = this.state.category.filter(function (d) {\n        return d.Reporter == _this6.props.country && d.Product != 'AllProducts' && d.Partner == \"United-States\";\n      });\n      var dataCN = this.state.category.filter(function (d) {\n        return d.Reporter == _this6.props.country && d.Product != 'AllProducts' && d.Partner == \"China\";\n      });\n      var cateData = [];\n      var div = d3.select('.tooltip');\n\n      for (var i = 0; i < Math.max(dataUS.length, dataCN.length); i++) {\n        var t = {};\n        t['data'] = [];\n        var total = 0;\n\n        if (dataUS.length > 0) {\n          var temp = {};\n          total = total + dataUS[i].Value;\n          t['Product'] = dataUS[i].Product;\n          temp['Country'] = dataUS[i].Partner;\n          temp['Value'] = dataUS[i].Value;\n          temp['Product'] = dataUS[i].Product;\n          t['data'].push(temp);\n        }\n\n        if (dataCN.length > 0) {\n          var temp = {};\n          total = total + dataCN[i].Value;\n          t['Product'] = dataCN[i].Product;\n          temp['Country'] = dataCN[i].Partner;\n          temp['Value'] = dataCN[i].Value;\n          temp['Product'] = dataCN[i].Product;\n          t['data'].push(temp);\n        }\n\n        t['total'] = total;\n        cateData.push(t);\n      } //console.log(cateData)\n\n\n      d3.select('#bar-svg-svg').attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom);\n      var svg = d3.select('#bar-svg');\n      var bar_g = svg.selectAll('#bar-g').data(cateData, function (d) {\n        return d.Product;\n      });\n\n      if (this.state.stateSelect == 2) {\n        cateData = cateData.sort(this.descNum).slice(0, 10);\n      }\n\n      if (this.state.stateSelect == 3) {\n        cateData = cateData.sort(this.descNum).slice(10, 20);\n      }\n\n      var max = d3.max(cateData, function (d) {\n        return d['total'];\n      });\n      var yAxisScale = d3.scaleLinear().domain([max + 20, 0]).range([0, height]);\n      var xAxisScale = d3.scaleBand().domain(cateData.map(function (d) {\n        return d.Product;\n      })).range([0, width]).paddingInner(0.05).paddingOuter(0.1);\n      var yAxis = d3.axisLeft(yAxisScale);\n      var xAxis = d3.axisBottom(xAxisScale);\n      var svg = d3.select('#bar-svg');\n      var bar_g = svg.selectAll('#bar-g').data(cateData, function (d) {\n        return d.Product;\n      });\n      console.log('all-update');\n      bar_g.selectAll('#cate-r-text').remove();\n      bar_g //.attr('transform',function(d){return 'translate(' +xAxisScale(d['Product'])+ ',' +(yAxisScale(d['total']))+ ')'})\n      .selectAll('#cate-rect').data(function (d) {\n        return d['data'];\n      }, function (d) {\n        return d['Country'];\n      }).transition().duration(1000).attr('x', function (d) {\n        return xAxisScale(d['Product']);\n      }).attr('y', function (d, i) {\n        var temp = cateData.filter(function (l) {\n          return l['Product'] == d['Product'];\n        }); //console.log(temp[0]['data'][0],temp[0]['total'], d)\n\n        return i ? yAxisScale(temp[0]['total']) + (height - yAxisScale(temp[0]['data'][0]['Value']) + 1) : yAxisScale(temp[0]['total']) + 0;\n      }).attr('height', function (d) {\n        return height - yAxisScale(d['Value']);\n      }).attr('width', function (d, i) {\n        return xAxisScale.bandwidth();\n      }).attr('fill', function (d) {\n        return colorExport(d.Country);\n      });\n      var tt = bar_g.selectAll('#cate-rect').data(function (d) {\n        //console.log('here rect',d)\n        return d['data'];\n      }, function (d) {\n        return d['Country'];\n      }).enter().append('rect').attr('id', 'cate-rect').on(\"mouseover\", function (d) {\n        div.style(\"opacity\", .9).style('z-index', 10);\n        div.html(d.Product + '<br>' + 'Value: ' + convert(d.Value));\n\n        function convert(labelValue) {\n          // Nine Zeroes for Billions\n          return Math.abs(Number(labelValue)) >= 1.0e+9 ? Math.round(Math.abs(Number(labelValue)) / 1.0e+9 * 10) / 10 + \"B\" // Six Zeroes for Millions \n          : Math.abs(Number(labelValue)) >= 1.0e+6 ? Math.round(Math.abs(Number(labelValue)) / 1.0e+6 * 10) / 10 + \"M\" // Three Zeroes for Thousands\n          : Math.abs(Number(labelValue)) >= 1.0e+3 ? Math.round(Math.abs(Number(labelValue)) / 1.0e+3 * 10) / 10 + \"K\" : Math.abs(Number(labelValue));\n        }\n      }).on(\"mousemove\", function () {\n        div.style(\"left\", d3.event.pageX + 10 + \"px\").style(\"top\", d3.event.pageY - 10 + \"px\");\n      }).on(\"mouseleave\", function (d) {\n        div.style(\"opacity\", 0).style('z-index', -10);\n      });\n      tt.attr('x', function (d) {\n        return xAxisScale(d['Product']);\n      }).attr('y', function (d, i) {\n        var temp = cateData.filter(function (l) {\n          return l['Product'] == d['Product'];\n        });\n        return i ? yAxisScale(temp[0]['total']) + (height - yAxisScale(temp[0]['data'][0]['Value']) + 1) : yAxisScale(temp[0]['total']) + 0;\n      }).transition().duration(1000).attr('height', function (d) {\n        return height - yAxisScale(d['Value']);\n      }).attr('width', function (d, i) {\n        return xAxisScale.bandwidth();\n      }).attr('fill', function (d) {\n        return colorExport(d.Country);\n      });\n      bar_g.selectAll('#cate-rect').data(function (d) {\n        return d['data'];\n      }, function (d) {\n        return d['Country'];\n      }).exit().remove();\n      bar_g.select('#cate-g-text').transition().duration(1000).attr('x', function (d) {\n        return xAxisScale(d['Product']) + xAxisScale.bandwidth() / 2;\n      }).attr('y', function (d) {\n        return yAxisScale(d['total']);\n      }).text(function (d) {\n        return _this6.convert(d['total']);\n      });\n      bar_g = svg.selectAll('#bar-g').data(cateData, function (d) {\n        return d.Product;\n      }); //initial\n\n      var bar_gg = bar_g.enter().append('g').attr('id', 'bar-g'); //.attr('transform',function(d){return 'translate(' +xAxisScale(d['Product'])+ ',' +(yAxisScale(d['total']))+ ')'})\n\n      var t = bar_gg.selectAll('#cate-rect').data(function (d) {\n        return d['data'];\n      }, function (d) {\n        return d['Country'];\n      }).enter().append('rect').attr('id', 'cate-rect').on(\"mouseover\", function (d) {\n        div.style(\"opacity\", .9).style('z-index', 10);\n        div.html(d.Product + '<br>' + 'Value: ' + convert(d.Value));\n\n        function convert(labelValue) {\n          // Nine Zeroes for Billions\n          return Math.abs(Number(labelValue)) >= 1.0e+9 ? Math.round(Math.abs(Number(labelValue)) / 1.0e+9 * 10) / 10 + \"B\" // Six Zeroes for Millions \n          : Math.abs(Number(labelValue)) >= 1.0e+6 ? Math.round(Math.abs(Number(labelValue)) / 1.0e+6 * 10) / 10 + \"M\" // Three Zeroes for Thousands\n          : Math.abs(Number(labelValue)) >= 1.0e+3 ? Math.round(Math.abs(Number(labelValue)) / 1.0e+3 * 10) / 10 + \"K\" : Math.abs(Number(labelValue));\n        }\n      }).on(\"mousemove\", function () {\n        div.style(\"left\", d3.event.pageX + 10 + \"px\").style(\"top\", d3.event.pageY - 10 + \"px\");\n      }).on(\"mouseleave\", function (d) {\n        div.style(\"opacity\", 0).style('z-index', -10);\n      });\n      t.transition().duration(1000).attr('x', function (d) {\n        return xAxisScale(d['Product']);\n      }).attr('y', function (d, i) {\n        console.log('init');\n        var temp = cateData.filter(function (l) {\n          return l['Product'] == d['Product'];\n        });\n        return i ? yAxisScale(temp[0]['total']) + (height - yAxisScale(temp[0]['data'][0]['Value']) + 1) : yAxisScale(temp[0]['total']) + 0;\n      }).attr('height', function (d) {\n        return height - yAxisScale(d['Value']);\n      }).attr('width', function (d, i) {\n        return xAxisScale.bandwidth();\n      }).attr('fill', function (d) {\n        return colorExport(d.Country);\n      }); //.on('mouseover', tip.show)\n      //.on('mouseout', tip.hide)\n\n      bar_gg.append('text').transition().duration(1000).attr('id', 'cate-g-text').text(function (d) {\n        return _this6.convert(d['total']);\n      }).attr('x', function (d) {\n        return xAxisScale(d['Product']) + xAxisScale.bandwidth() / 2;\n      }).attr('y', function (d) {\n        return yAxisScale(d['total']);\n      }).attr('dy', '-0.2em').attr('font-size', '12').attr(\"text-anchor\", \"middle\");\n      bar_g.exit().remove();\n      svg.select('.yAxis').transition().duration(1000).call(yAxis).selectAll(\"text\").text(function (d) {\n        return _this6.convert(d);\n      });\n      svg.select('.xAxis').transition().duration(1000).call(xAxis).attr(\"transform\", \"translate(0,\" + height + \")\").selectAll(\"text\").attr(\"y\", 10).attr(\"x\", 7).attr(\"dy\", \".35em\").attr(\"transform\", \"rotate(45)\").style(\"text-anchor\", \"start\");\n      svg.select('#year').attr('x', width * 0.65).text(this.props.year);\n      svg.select('#us-r-legend').attr('x', width * 0.65).attr('opacity', 1);\n      svg.select('#cn-r-legend').attr('x', width * 0.65).attr('opacity', 1);\n      svg.select('#us-legend').attr('opacity', 1).attr('x', width * 0.65 + 30).text(this.props.trade == 'Export' ? 'Value ' + this.props.trade + ' from ' + this.props.country + ' to United-States' : 'Value ' + this.props.trade + ' from United-States to ' + this.props.country);\n      svg.select('#cn-legend').attr('opacity', 1).attr('x', width * 0.65 + 30).text(this.props.trade == 'Export' ? 'Value ' + this.props.trade + ' from ' + this.props.country + ' to China' : 'Value ' + this.props.trade + ' from China to ' + this.props.country);\n\n      if (this.props.country == \"China\") {\n        svg.select('#cn-r-legend').attr('opacity', 0);\n        svg.select('#cn-legend').attr('opacity', 0);\n      } else if (this.props.country == \"United-States\") {\n        svg.select('#us-r-legend').attr('opacity', 0);\n        svg.select('#us-legend').attr('opacity', 0);\n      }\n    }\n  }, {\n    key: \"drawLegend\",\n    value: function drawLegend() {\n      var svg = d3.select('#bar-svg');\n      var margin = {\n        top: 30,\n        bottom: 80,\n        left: 80,\n        right: 30\n      },\n          width = +d3.select('#section3').style('width').slice(0, -2) - margin.left - margin.right,\n          height = +d3.select('#section3').style('height').slice(0, -2) * 0.7 - margin.top - margin.bottom;\n      svg.append('rect').attr('id', 'us-r-legend').attr('x', width * 0.65).attr('y', 7).attr('height', '25').attr('width', '25').attr('fill', \"#2166CC\").attr('opacity', 0);\n      svg.append('rect').attr('id', 'cn-r-legend').attr('x', width * 0.65).attr('y', 35).attr('height', '25').attr('width', '25').attr('fill', \"#CC5343\").attr('opacity', 0);\n      svg.append('text').attr('id', 'us-legend').attr('x', width * 0.65 + 30).attr('y', 21).attr('font-size', '12').attr(\"text-anchor\", \"left\"); //.text('Value '+ this.props.trade + ' from ' + this.props.country +' to United-States')\n\n      svg.append('text').attr('id', 'cn-legend').attr('x', width * 0.65 + 30).attr('y', 50).attr('font-size', '12').attr(\"text-anchor\", \"left\").attr('color', '#CC5343'); //.text('Value '+ this.props.trade + ' from ' + this.props.country +' to China')\n\n      svg.append('text').attr('id', 'year').attr('x', width * 0.65).attr('y', 0).attr('font-size', '40').attr(\"text-anchor\", \"left\").attr('color', '#CC5343'); //.text('2016')\n    }\n  }, {\n    key: \"descNum\",\n    value: function descNum(a, b) {\n      // Use toUpperCase() to ignore character casing\n      var ca = a['total'];\n      var cb = b['total'];\n      var comparison = 0;\n\n      if (ca > cb) {\n        comparison = -1;\n      } else if (ca < cb) {\n        comparison = 1;\n      }\n\n      return comparison;\n    }\n  }, {\n    key: \"convert\",\n    value: function convert(labelValue) {\n      // Nine Zeroes for Billions\n      return Math.abs(Number(labelValue)) >= 1.0e+9 ? Math.round(Math.abs(Number(labelValue)) / 1.0e+9 * 10) / 10 + \"B\" // Six Zeroes for Millions \n      : Math.abs(Number(labelValue)) >= 1.0e+6 ? Math.round(Math.abs(Number(labelValue)) / 1.0e+6 * 10) / 10 + \"M\" // Three Zeroes for Thousands\n      : Math.abs(Number(labelValue)) >= 1.0e+3 ? Math.round(Math.abs(Number(labelValue)) / 1.0e+3 * 10) / 10 + \"K\" : Math.abs(Number(labelValue));\n    }\n  }, {\n    key: \"upDateTitle\",\n    value: function upDateTitle() {\n      d3.select('#country').html(this.props.country);\n\n      if (this.props.trade == 'Import') {\n        d3.select('#d').html('from');\n      } else {\n        d3.select('#d').html('to');\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this7 = this;\n\n      return React.createElement(\"div\", {\n        id: \"barchart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 539\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"bar-discription-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 540\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 541\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        id: \"country\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 541\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        id: \"trade\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 541\n        },\n        __self: this\n      }, \" \", this.props.trade), \" Category \", React.createElement(\"span\", {\n        id: \"d\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 541\n        },\n        __self: this\n      }, \"to\"), \" U.S. & China\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 544\n        },\n        __self: this\n      }, \"This bar chart shows the total trade value from the top 10 countries (with the highest trade value) to the U.S. and China by category. Three buttons provide detailed information about the top 10 categories with the highest trade value, the bottom 10 categories with the lowest trade value, and trade value by all 20 categories. The blue bars represent trade value to the U.S., while the red ones represent trade value to China.\"), React.createElement(\"div\", {\n        id: \"instruction-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 545\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 545\n        },\n        __self: this\n      }, \"Instruction: Choose Year, Trade(Export/Import), Country at the sidebar on the left, categorical trade value will be shown in the bar chart.\"))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 547\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"barContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 548\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        id: \"top5\",\n        className: \"btn btn-secondary\",\n        onClick: function onClick() {\n          _this7.setState({\n            stateSelect: 2\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 549\n        },\n        __self: this\n      }, \"TOP 10\"), React.createElement(\"button\", {\n        type: \"button\",\n        id: \"bot5\",\n        className: \"btn btn-secondary\",\n        onClick: function onClick() {\n          _this7.setState({\n            stateSelect: 3\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 550\n        },\n        __self: this\n      }, \"BOTTOM 10\"), React.createElement(\"button\", {\n        type: \"button\",\n        id: \"all10\",\n        className: \"btn btn-secondary\",\n        onClick: function onClick() {\n          _this7.setState({\n            stateSelect: 1\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 551\n        },\n        __self: this\n      }, \"ALL 20\"), React.createElement(\"div\", {\n        id: \"bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Bar;\n}(Component);\n\nexport { Bar as default };","map":{"version":3,"sources":["/Users/pzq317/Desktop/bacdata-web/src/BarChart.js"],"names":["React","Component","d3","categoryData","Bar","props","state","count","category","product","stateSelect","upDate","bind","drawChart","convert","nextProps","nextState","trade","year","country","setData","then","drawLegend","window","addEventListener","upDateTitle","data","Promise","resolve","csv","d","Trade","Reporter","Partner","Product","Value","Year","flags","l","length","i","push","filter","setState","console","log","dataUS","dataCN","cateData","margin","top","bottom","left","right","width","select","style","slice","height","svg","append","attr","text","colorExport","scaleOrdinal","domain","range","div","Math","max","t","total","temp","bar_g","selectAll","sort","descNum","yAxisScale","scaleLinear","xAxisScale","scaleBand","map","paddingInner","paddingOuter","yAxis","axisLeft","xAxis","axisBottom","remove","transition","duration","bandwidth","Country","tt","enter","on","html","labelValue","abs","Number","round","event","pageX","pageY","exit","bar_gg","call","a","b","ca","cb","comparison"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;AACA,OAAOC,YAAP,MAAyB,qBAAzB;;IACqBC,G;;;;;AACpB,eAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AAClB,6EAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACZC,MAAAA,KAAK,EAAC,CADM;AAEHC,MAAAA,QAAQ,EAAE,EAFP;AAGHC,MAAAA,OAAO,EAAE,EAHN;AAIHC,MAAAA,WAAW,EAAC;AAJT,KAAb;AAMM,UAAKC,MAAL,GAAc,MAAKA,MAAL,CAAYC,IAAZ,uDAAd;AACA,UAAKC,SAAL,GAAiB,MAAKA,SAAL,CAAeD,IAAf,uDAAjB;AACA,UAAKE,OAAL,GAAe,MAAKA,OAAL,CAAaF,IAAb,uDAAf;AAVY;AAWlB;;;;0CAEwBG,S,EAAUC,S,EAAU;AACtC,UAAG,KAAKX,KAAL,CAAWY,KAAX,KAAqBF,SAAS,CAACE,KAA/B,IAAwC,KAAKZ,KAAL,CAAWa,IAAX,KAAoBH,SAAS,CAACG,IAAtE,IAA8E,KAAKb,KAAL,CAAWc,OAAX,KAAuBJ,SAAS,CAACI,OAA/G,IAA0H,KAAKb,KAAL,CAAWI,WAAX,KAA2BM,SAAS,CAACN,WAAlK,EAA8K;AAC1K,eAAO,IAAP;AACH,OAFD,MAGI;AACA,eAAO,KAAP;AACH;AACJ;;;wCACkB;AAAA;;AACf,WAAKU,OAAL,GAAeC,IAAf,CAAoB,YAAI;AACpB,QAAA,MAAI,CAACR,SAAL;;AACA,QAAA,MAAI,CAACS,UAAL,GAFoB,CAGpB;;AACH,OAJD;AAKAC,MAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkC,KAAKb,MAAvC;AACH;;;yCACiB;AAAA;;AACd,WAAKS,OAAL,GAAeC,IAAf,CAAoB,YAAI;AACpB,QAAA,MAAI,CAACV,MAAL;;AACA,QAAA,MAAI,CAACc,WAAL;AACH,OAHD;AAIN;;;4BACUC,I,EAAM;AAAA;;AACV,aAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAE;AACxB1B,QAAAA,EAAE,CAAC2B,GAAH,CAAO1B,YAAP,EAAoB,UAAS2B,CAAT,EAAW;AAC3B,cAAIZ,IAAI,GAAG,KAAKb,KAAL,CAAWa,IAAtB;AACA,cAAGY,CAAC,CAACC,KAAF,IAAW,KAAK1B,KAAL,CAAWY,KAAzB,EACA,OAAO;AACHe,YAAAA,QAAQ,EAAGF,CAAC,CAACE,QADV;AAEHC,YAAAA,OAAO,EAAGH,CAAC,CAACG,OAFT;AAGHC,YAAAA,OAAO,EAAGJ,CAAC,CAACI,OAHT;AAIHH,YAAAA,KAAK,EAAGD,CAAC,CAACC,KAJP;AAKHI,YAAAA,KAAK,EAAG,CAACL,CAAC,CAACZ,IAAD,CALP;AAMHkB,YAAAA,IAAI,EAAElB;AANH,WAAP;AAQH,SAXmB,CAWlBN,IAXkB,CAWb,MAXa,CAApB,EAWcS,IAXd,CAWmB,UAASb,QAAT,EAAkB;AACjC,cAAI6B,KAAK,GAAG,EAAZ;AAAA,cACI5B,OAAO,GAAG,EADd;AAAA,cAEI6B,CAAC,GAAG9B,QAAQ,CAAC+B,MAFjB;AAAA,cAGIC,CAHJ;;AAIA,eAAKA,CAAC,GAAC,CAAP,EAAUA,CAAC,GAACF,CAAZ,EAAeE,CAAC,EAAhB,EAAoB;AAChB,gBAAIH,KAAK,CAAC7B,QAAQ,CAACgC,CAAD,CAAR,CAAYN,OAAb,CAAT,EAAgC;AAChCG,YAAAA,KAAK,CAAC7B,QAAQ,CAACgC,CAAD,CAAR,CAAYN,OAAb,CAAL,GAA6B,IAA7B;AACAzB,YAAAA,OAAO,CAACgC,IAAR,CAAajC,QAAQ,CAACgC,CAAD,CAAR,CAAYN,OAAzB;AACH;;AACDzB,UAAAA,OAAO,GAAGA,OAAO,CAACiC,MAAR,CAAe,UAAAZ,CAAC;AAAA,mBAAGA,CAAC,IAAE,aAAN;AAAA,WAAhB,CAAV,CAViC,CAWjC;;AAEA,eAAKa,QAAL,CAAc;AACVnC,YAAAA,QAAQ,EAAEA,QADA;AAEVC,YAAAA,OAAO,EAAEA;AAFC,WAAd;AAIAmB,UAAAA,OAAO,CAAC,MAAD,CAAP;AACH,SAlBkB,CAkBjBhB,IAlBiB,CAkBZ,MAlBY,CAXnB;AA+BH,OAhCM,CAAP;AAiCH;;;gCAEQ;AAAA;;AACLgC,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AAEA,UAAIC,MAAM,GAAG,KAAKxC,KAAL,CAAWE,QAAX,CAAoBkC,MAApB,CAA2B,UAAAZ,CAAC;AAAA,eAAIA,CAAC,CAACE,QAAF,IAAc,MAAI,CAAC3B,KAAL,CAAWc,OAAzB,IAAoCW,CAAC,CAACI,OAAF,IAAa,aAAjD,IAAkEJ,CAAC,CAACG,OAAF,IAAa,eAAnF;AAAA,OAA5B,CAAb;AACA,UAAIc,MAAM,GAAG,KAAKzC,KAAL,CAAWE,QAAX,CAAoBkC,MAApB,CAA2B,UAAAZ,CAAC;AAAA,eAAIA,CAAC,CAACE,QAAF,IAAc,MAAI,CAAC3B,KAAL,CAAWc,OAAzB,IAAoCW,CAAC,CAACI,OAAF,IAAa,aAAjD,IAAkEJ,CAAC,CAACG,OAAF,IAAa,OAAnF;AAAA,OAA5B,CAAb;AAEA,UAAIe,QAAQ,GAAG,EAAf;AAIA,UAAIC,MAAM,GAAG;AAAEC,QAAAA,GAAG,EAAE,EAAP;AAAWC,QAAAA,MAAM,EAAE,EAAnB;AAAuBC,QAAAA,IAAI,EAAE,EAA7B;AAAiCC,QAAAA,KAAK,EAAE;AAAxC,OAAb;AAAA,UACIC,KAAK,GAAG,CAACpD,EAAE,CAACqD,MAAH,CAAU,WAAV,EAAuBC,KAAvB,CAA6B,OAA7B,EAAsCC,KAAtC,CAA4C,CAA5C,EAA+C,CAAC,CAAhD,CAAD,GAAsDR,MAAM,CAACG,IAA7D,GAAoEH,MAAM,CAACI,KADvF;AAAA,UAEIK,MAAM,GAAG,CAACxD,EAAE,CAACqD,MAAH,CAAU,WAAV,EAAuBC,KAAvB,CAA6B,QAA7B,EAAuCC,KAAvC,CAA6C,CAA7C,EAAgD,CAAC,CAAjD,CAAD,GAAqD,GAArD,GAA2DR,MAAM,CAACC,GAAlE,GAAwED,MAAM,CAACE,MAF5F,CAVK,CAcL;AACA;;AAEA,UAAIQ,GAAG,GAAGzD,EAAE,CAACqD,MAAH,CAAU,MAAV,EACLK,MADK,CACE,KADF,EAELC,IAFK,CAEA,OAFA,EAEQP,KAAK,GAAGL,MAAM,CAACG,IAAf,GAAsBH,MAAM,CAACI,KAFrC,EAGLQ,IAHK,CAGA,QAHA,EAGSH,MAAM,GAAGT,MAAM,CAACC,GAAhB,GAAsBD,MAAM,CAACE,MAHtC,EAILU,IAJK,CAIA,IAJA,EAIK,aAJL,EAKLD,MALK,CAKE,GALF,EAMLC,IANK,CAMA,IANA,EAMK,SANL,EAOLA,IAPK,CAOA,WAPA,EAOY,eAAcZ,MAAM,CAACG,IAArB,GAA2B,GAA3B,GAAgCH,MAAM,CAACC,GAAvC,GAA4C,GAPxD,CAAV;AASAS,MAAAA,GAAG,CAACJ,MAAJ,CAAW,MAAX,EACK7B,IADL,CACUsB,QADV,EAEKY,MAFL,CAEY,GAFZ;AAIAD,MAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EACKC,IADL,CACU,OADV,EACmB,OADnB;AAGAF,MAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EACKC,IADL,CACU,WADV,EACuB,iBAAiBH,MAAjB,GAA0B,GADjD,EAEKG,IAFL,CAEU,OAFV,EAEmB,OAFnB;AAIAF,MAAAA,GAAG,CAACC,MAAJ,CAAW,MAAX,EACKC,IADL,CACU,GADV,EACeP,KAAK,GAAC,CADrB,EAEKO,IAFL,CAEU,GAFV,EAEeH,MAAM,GAAC,CAFtB,EAGKI,IAHL,CAGU,yBAHV,EAIKD,IAJL,CAIU,WAJV,EAIsB,IAJtB,EAKKA,IALL,CAKU,aALV,EAKyB,QALzB;AAOA;;;;;;;;;AAaN;;;6BAEQ;AAAA;;AACF;AACA;AACA;AACA;AACA,UAAIZ,MAAM,GAAG;AAAEC,QAAAA,GAAG,EAAE,EAAP;AAAWC,QAAAA,MAAM,EAAE,EAAnB;AAAuBC,QAAAA,IAAI,EAAE,EAA7B;AAAiCC,QAAAA,KAAK,EAAE;AAAxC,OAAb;AAAA,UACIC,KAAK,GAAG,CAACpD,EAAE,CAACqD,MAAH,CAAU,WAAV,EAAuBC,KAAvB,CAA6B,OAA7B,EAAsCC,KAAtC,CAA4C,CAA5C,EAA+C,CAAC,CAAhD,CAAD,GAAsDR,MAAM,CAACG,IAA7D,GAAoEH,MAAM,CAACI,KADvF;AAAA,UAEIK,MAAM,GAAG,CAACxD,EAAE,CAACqD,MAAH,CAAU,WAAV,EAAuBC,KAAvB,CAA6B,QAA7B,EAAuCC,KAAvC,CAA6C,CAA7C,EAAgD,CAAC,CAAjD,CAAD,GAAqD,GAArD,GAA2DR,MAAM,CAACC,GAAlE,GAAwED,MAAM,CAACE,MAF5F;AAIAP,MAAAA,OAAO,CAACC,GAAR,CAAYS,KAAZ,EAAkBI,MAAlB,EATE,CAUE;AACA;;AAGJ,UAAIK,WAAW,GAAG7D,EAAE,CAAC8D,YAAH,GAAkBC,MAAlB,CAAyB,CAAC,eAAD,EAAiB,OAAjB,CAAzB,EAAoDC,KAApD,CAA0D,CAAC,SAAD,EAAW,SAAX,CAA1D,CAAlB;AAEA,UAAIpB,MAAM,GAAG,KAAKxC,KAAL,CAAWE,QAAX,CAAoBkC,MAApB,CAA2B,UAAAZ,CAAC;AAAA,eAAIA,CAAC,CAACE,QAAF,IAAc,MAAI,CAAC3B,KAAL,CAAWc,OAAzB,IAAoCW,CAAC,CAACI,OAAF,IAAa,aAAjD,IAAkEJ,CAAC,CAACG,OAAF,IAAa,eAAnF;AAAA,OAA5B,CAAb;AACA,UAAIc,MAAM,GAAG,KAAKzC,KAAL,CAAWE,QAAX,CAAoBkC,MAApB,CAA2B,UAAAZ,CAAC;AAAA,eAAIA,CAAC,CAACE,QAAF,IAAc,MAAI,CAAC3B,KAAL,CAAWc,OAAzB,IAAoCW,CAAC,CAACI,OAAF,IAAa,aAAjD,IAAkEJ,CAAC,CAACG,OAAF,IAAa,OAAnF;AAAA,OAA5B,CAAb;AAEA,UAAIe,QAAQ,GAAG,EAAf;AACA,UAAImB,GAAG,GAAGjE,EAAE,CAACqD,MAAH,CAAU,UAAV,CAAV;;AAEA,WAAI,IAAIf,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC4B,IAAI,CAACC,GAAL,CAASvB,MAAM,CAACP,MAAhB,EAAwBQ,MAAM,CAACR,MAA/B,CAAf,EAAuDC,CAAC,EAAxD,EAA2D;AACvD,YAAI8B,CAAC,GAAG,EAAR;AACAA,QAAAA,CAAC,CAAC,MAAD,CAAD,GAAY,EAAZ;AACA,YAAIC,KAAK,GAAG,CAAZ;;AACA,YAAGzB,MAAM,CAACP,MAAP,GAAgB,CAAnB,EAAqB;AACjB,cAAIiC,IAAI,GAAG,EAAX;AACAD,UAAAA,KAAK,GAAGA,KAAK,GAAGzB,MAAM,CAACN,CAAD,CAAN,CAAUL,KAA1B;AACAmC,UAAAA,CAAC,CAAC,SAAD,CAAD,GAAexB,MAAM,CAACN,CAAD,CAAN,CAAUN,OAAzB;AACAsC,UAAAA,IAAI,CAAC,SAAD,CAAJ,GAAkB1B,MAAM,CAACN,CAAD,CAAN,CAAUP,OAA5B;AACAuC,UAAAA,IAAI,CAAC,OAAD,CAAJ,GAAgB1B,MAAM,CAACN,CAAD,CAAN,CAAUL,KAA1B;AACAqC,UAAAA,IAAI,CAAC,SAAD,CAAJ,GAAkB1B,MAAM,CAACN,CAAD,CAAN,CAAUN,OAA5B;AACAoC,UAAAA,CAAC,CAAC,MAAD,CAAD,CAAU7B,IAAV,CAAe+B,IAAf;AACH;;AACD,YAAGzB,MAAM,CAACR,MAAP,GAAgB,CAAnB,EAAqB;AACjB,cAAIiC,IAAI,GAAG,EAAX;AACAD,UAAAA,KAAK,GAAGA,KAAK,GAAGxB,MAAM,CAACP,CAAD,CAAN,CAAUL,KAA1B;AACAmC,UAAAA,CAAC,CAAC,SAAD,CAAD,GAAevB,MAAM,CAACP,CAAD,CAAN,CAAUN,OAAzB;AACAsC,UAAAA,IAAI,CAAC,SAAD,CAAJ,GAAkBzB,MAAM,CAACP,CAAD,CAAN,CAAUP,OAA5B;AACAuC,UAAAA,IAAI,CAAC,OAAD,CAAJ,GAAgBzB,MAAM,CAACP,CAAD,CAAN,CAAUL,KAA1B;AACAqC,UAAAA,IAAI,CAAC,SAAD,CAAJ,GAAkBzB,MAAM,CAACP,CAAD,CAAN,CAAUN,OAA5B;AACAoC,UAAAA,CAAC,CAAC,MAAD,CAAD,CAAU7B,IAAV,CAAe+B,IAAf;AACH;;AACDF,QAAAA,CAAC,CAAC,OAAD,CAAD,GAAaC,KAAb;AACAvB,QAAAA,QAAQ,CAACP,IAAT,CAAc6B,CAAd;AACH,OA9CC,CA+CF;;;AAEApE,MAAAA,EAAE,CAACqD,MAAH,CAAU,cAAV,EACKM,IADL,CACU,OADV,EACkBP,KAAK,GAAGL,MAAM,CAACG,IAAf,GAAsBH,MAAM,CAACI,KAD/C,EAEKQ,IAFL,CAEU,QAFV,EAEmBH,MAAM,GAAGT,MAAM,CAACC,GAAhB,GAAsBD,MAAM,CAACE,MAFhD;AAIA,UAAIQ,GAAG,GAAGzD,EAAE,CAACqD,MAAH,CAAU,UAAV,CAAV;AAEA,UAAIkB,KAAK,GAAGd,GAAG,CAACe,SAAJ,CAAc,QAAd,EACPhD,IADO,CACFsB,QADE,EACO,UAASlB,CAAT,EAAW;AAAC,eAAOA,CAAC,CAACI,OAAT;AAAiB,OADpC,CAAZ;;AAGA,UAAG,KAAK5B,KAAL,CAAWI,WAAX,IAA0B,CAA7B,EAA+B;AAC3BsC,QAAAA,QAAQ,GAAGA,QAAQ,CAAC2B,IAAT,CAAc,KAAKC,OAAnB,EAA4BnB,KAA5B,CAAkC,CAAlC,EAAqC,EAArC,CAAX;AACH;;AACD,UAAG,KAAKnD,KAAL,CAAWI,WAAX,IAA0B,CAA7B,EAA+B;AAC3BsC,QAAAA,QAAQ,GAAGA,QAAQ,CAAC2B,IAAT,CAAc,KAAKC,OAAnB,EAA4BnB,KAA5B,CAAkC,EAAlC,EAAsC,EAAtC,CAAX;AACH;;AAED,UAAIY,GAAG,GAAGnE,EAAE,CAACmE,GAAH,CAAOrB,QAAP,EAAgB,UAASlB,CAAT,EAAW;AAAC,eAAOA,CAAC,CAAC,OAAD,CAAR;AAAkB,OAA9C,CAAV;AAEA,UAAI+C,UAAU,GAAG3E,EAAE,CAAC4E,WAAH,GACZb,MADY,CACL,CAACI,GAAG,GAAE,EAAN,EAAS,CAAT,CADK,EAEZH,KAFY,CAEN,CAAC,CAAD,EAAGR,MAAH,CAFM,CAAjB;AAIA,UAAIqB,UAAU,GAAG7E,EAAE,CAAC8E,SAAH,GACZf,MADY,CACLjB,QAAQ,CAACiC,GAAT,CAAa,UAACnD,CAAD,EAAK;AAAC,eAAOA,CAAC,CAACI,OAAT;AAAiB,OAApC,CADK,EAEZgC,KAFY,CAEN,CAAC,CAAD,EAAGZ,KAAH,CAFM,EAGZ4B,YAHY,CAGC,IAHD,EAIZC,YAJY,CAIC,GAJD,CAAjB;AAMA,UAAIC,KAAK,GAAGlF,EAAE,CAACmF,QAAH,CAAYR,UAAZ,CAAZ;AACA,UAAIS,KAAK,GAAGpF,EAAE,CAACqF,UAAH,CAAcR,UAAd,CAAZ;AAEA,UAAIpB,GAAG,GAAGzD,EAAE,CAACqD,MAAH,CAAU,UAAV,CAAV;AAEA,UAAIkB,KAAK,GAAGd,GAAG,CAACe,SAAJ,CAAc,QAAd,EACPhD,IADO,CACFsB,QADE,EACO,UAASlB,CAAT,EAAW;AAAC,eAAOA,CAAC,CAACI,OAAT;AAAiB,OADpC,CAAZ;AAKAU,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA4B,MAAAA,KAAK,CAACC,SAAN,CAAgB,cAAhB,EACKc,MADL;AAEAf,MAAAA,KAAK;AAAA,OACAC,SADL,CACe,YADf,EAEKhD,IAFL,CAEU,UAASI,CAAT,EAAW;AAAE,eAAOA,CAAC,CAAC,MAAD,CAAR;AAAiB,OAFxC,EAEyC,UAASA,CAAT,EAAW;AAAE,eAAOA,CAAC,CAAC,SAAD,CAAR;AAAoB,OAF1E,EAGK2D,UAHL,GAIKC,QAJL,CAIc,IAJd,EAKK7B,IALL,CAKU,GALV,EAKc,UAAS/B,CAAT,EAAW;AAAC,eAAOiD,UAAU,CAACjD,CAAC,CAAC,SAAD,CAAF,CAAjB;AAAgC,OAL1D,EAMK+B,IANL,CAMU,GANV,EAMe,UAAC/B,CAAD,EAAIU,CAAJ,EAAS;AAChB,YAAIgC,IAAI,GAAGxB,QAAQ,CAACN,MAAT,CAAgB,UAAAJ,CAAC;AAAA,iBAAEA,CAAC,CAAC,SAAD,CAAD,IAAcR,CAAC,CAAC,SAAD,CAAjB;AAAA,SAAjB,CAAX,CADgB,CAEhB;;AACA,eAAOU,CAAC,GAAGqC,UAAU,CAACL,IAAI,CAAC,CAAD,CAAJ,CAAQ,OAAR,CAAD,CAAV,IAA8Bd,MAAM,GAACmB,UAAU,CAACL,IAAI,CAAC,CAAD,CAAJ,CAAQ,MAAR,EAAgB,CAAhB,EAAmB,OAAnB,CAAD,CAAjB,GAA+C,CAA7E,CAAH,GAAqFK,UAAU,CAACL,IAAI,CAAC,CAAD,CAAJ,CAAQ,OAAR,CAAD,CAAV,GAA6B,CAA1H;AACH,OAVL,EAWKX,IAXL,CAWU,QAXV,EAWoB,UAAS/B,CAAT,EAAW;AAAE,eAAO4B,MAAM,GAAGmB,UAAU,CAAC/C,CAAC,CAAC,OAAD,CAAF,CAA1B;AAAuC,OAXxE,EAYK+B,IAZL,CAYU,OAZV,EAYmB,UAAS/B,CAAT,EAAYU,CAAZ,EAAc;AAAE,eAAOuC,UAAU,CAACY,SAAX,EAAP;AAA+B,OAZlE,EAaK9B,IAbL,CAaU,MAbV,EAakB,UAAS/B,CAAT,EAAW;AAAE,eAAOiC,WAAW,CAACjC,CAAC,CAAC8D,OAAH,CAAlB;AAA8B,OAb7D;AAeA,UAAIC,EAAE,GAAGpB,KAAK,CAACC,SAAN,CAAgB,YAAhB,EACJhD,IADI,CACC,UAASI,CAAT,EAAW;AACb;AACA,eAAOA,CAAC,CAAC,MAAD,CAAR;AAAiB,OAHhB,EAGiB,UAASA,CAAT,EAAW;AAAE,eAAOA,CAAC,CAAC,SAAD,CAAR;AAAoB,OAHlD,EAIJgE,KAJI,GAKJlC,MALI,CAKG,MALH,EAMJC,IANI,CAMC,IAND,EAMM,WANN,EAOJkC,EAPI,CAOD,WAPC,EAOY,UAASjE,CAAT,EAAW;AACxBqC,QAAAA,GAAG,CAACX,KAAJ,CAAU,SAAV,EAAqB,EAArB,EACKA,KADL,CACW,SADX,EACqB,EADrB;AAEAW,QAAAA,GAAG,CAAC6B,IAAJ,CAASlE,CAAC,CAACI,OAAF,GAAY,MAAZ,GAAmB,SAAnB,GAA+BpB,OAAO,CAACgB,CAAC,CAACK,KAAH,CAA/C;;AAEA,iBAASrB,OAAT,CAAiBmF,UAAjB,EAA6B;AACzB;AACA,iBAAO7B,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,KAAgC,MAAhC,GAEL7B,IAAI,CAACgC,KAAL,CAAYhC,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,IAA+B,MAAhC,GAAwC,EAAnD,IAAuD,EAAvD,GAA4D,GAFvD,CAGP;AAHO,YAIL7B,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,KAAgC,MAAhC,GAEA7B,IAAI,CAACgC,KAAL,CAAYhC,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,IAA+B,MAAhC,GAAwC,EAAnD,IAAuD,EAAvD,GAA4D,GAF5D,CAGF;AAHE,YAIA7B,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,KAAgC,MAAhC,GAEA7B,IAAI,CAACgC,KAAL,CAAYhC,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,IAA+B,MAAhC,GAAwC,EAAnD,IAAuD,EAAvD,GAA4D,GAF5D,GAIA7B,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,CAZF;AAcH;AACJ,OA7BI,EA8BJF,EA9BI,CA8BD,WA9BC,EA8BY,YAAI;AACjB5B,QAAAA,GAAG,CAACX,KAAJ,CAAU,MAAV,EAAmBtD,EAAE,CAACmG,KAAH,CAASC,KAAT,GAAiB,EAAlB,GAAwB,IAA1C,EACK9C,KADL,CACW,KADX,EACmBtD,EAAE,CAACmG,KAAH,CAASE,KAAT,GAAiB,EAAlB,GAAwB,IAD1C;AAEH,OAjCI,EAkCJR,EAlCI,CAkCD,YAlCC,EAkCY,UAASjE,CAAT,EAAW;AACxBqC,QAAAA,GAAG,CAACX,KAAJ,CAAU,SAAV,EAAqB,CAArB,EACKA,KADL,CACW,SADX,EACqB,CAAC,EADtB;AAGH,OAtCI,CAAT;AAwCAqC,MAAAA,EAAE,CAAChC,IAAH,CAAQ,GAAR,EAAY,UAAS/B,CAAT,EAAW;AAAC,eAAOiD,UAAU,CAACjD,CAAC,CAAC,SAAD,CAAF,CAAjB;AAAgC,OAAxD,EACK+B,IADL,CACU,GADV,EACe,UAAC/B,CAAD,EAAIU,CAAJ,EAAS;AAChB,YAAIgC,IAAI,GAAGxB,QAAQ,CAACN,MAAT,CAAgB,UAAAJ,CAAC;AAAA,iBAAEA,CAAC,CAAC,SAAD,CAAD,IAAcR,CAAC,CAAC,SAAD,CAAjB;AAAA,SAAjB,CAAX;AACA,eAAOU,CAAC,GAAGqC,UAAU,CAACL,IAAI,CAAC,CAAD,CAAJ,CAAQ,OAAR,CAAD,CAAV,IAA8Bd,MAAM,GAACmB,UAAU,CAACL,IAAI,CAAC,CAAD,CAAJ,CAAQ,MAAR,EAAgB,CAAhB,EAAmB,OAAnB,CAAD,CAAjB,GAA+C,CAA7E,CAAH,GAAqFK,UAAU,CAACL,IAAI,CAAC,CAAD,CAAJ,CAAQ,OAAR,CAAD,CAAV,GAA6B,CAA1H;AACH,OAJL,EAKKiB,UALL,GAMKC,QANL,CAMc,IANd,EAOK7B,IAPL,CAOU,QAPV,EAOoB,UAAS/B,CAAT,EAAW;AAAE,eAAO4B,MAAM,GAAGmB,UAAU,CAAC/C,CAAC,CAAC,OAAD,CAAF,CAA1B;AAAuC,OAPxE,EAQK+B,IARL,CAQU,OARV,EAQmB,UAAS/B,CAAT,EAAYU,CAAZ,EAAc;AAAE,eAAOuC,UAAU,CAACY,SAAX,EAAP;AAA+B,OARlE,EASK9B,IATL,CASU,MATV,EASkB,UAAS/B,CAAT,EAAW;AAAE,eAAOiC,WAAW,CAACjC,CAAC,CAAC8D,OAAH,CAAlB;AAA8B,OAT7D;AAWAnB,MAAAA,KAAK,CAACC,SAAN,CAAgB,YAAhB,EACKhD,IADL,CACU,UAASI,CAAT,EAAW;AAAE,eAAOA,CAAC,CAAC,MAAD,CAAR;AAAiB,OADxC,EACyC,UAASA,CAAT,EAAW;AAAE,eAAOA,CAAC,CAAC,SAAD,CAAR;AAAoB,OAD1E,EAEK0E,IAFL,GAGKhB,MAHL;AAKAf,MAAAA,KAAK,CAAClB,MAAN,CAAa,cAAb,EACKkC,UADL,GAEKC,QAFL,CAEc,IAFd,EAGK7B,IAHL,CAGU,GAHV,EAGc,UAAS/B,CAAT,EAAW;AAAC,eAAOiD,UAAU,CAACjD,CAAC,CAAC,SAAD,CAAF,CAAV,GAAyBiD,UAAU,CAACY,SAAX,KAAuB,CAAvD;AAAyD,OAHnF,EAIK9B,IAJL,CAIU,GAJV,EAIc,UAAS/B,CAAT,EAAW;AAAC,eAAO+C,UAAU,CAAC/C,CAAC,CAAC,OAAD,CAAF,CAAjB;AAA8B,OAJxD,EAKKgC,IALL,CAKU,UAAChC,CAAD,EAAK;AAAC,eAAO,MAAI,CAAChB,OAAL,CAAagB,CAAC,CAAC,OAAD,CAAd,CAAP;AAAgC,OALhD;AAQA2C,MAAAA,KAAK,GAAGd,GAAG,CAACe,SAAJ,CAAc,QAAd,EACHhD,IADG,CACEsB,QADF,EACW,UAASlB,CAAT,EAAW;AAAC,eAAOA,CAAC,CAACI,OAAT;AAAiB,OADxC,CAAR,CAzKE,CA4KF;;AACA,UAAIuE,MAAM,GAAGhC,KAAK,CAACqB,KAAN,GACRlC,MADQ,CACD,GADC,EAERC,IAFQ,CAEH,IAFG,EAEE,OAFF,CAAb,CA7KE,CAgLE;;AAEJ,UAAIS,CAAC,GAAGmC,MAAM,CAAC/B,SAAP,CAAiB,YAAjB,EACHhD,IADG,CACE,UAASI,CAAT,EAAW;AAAE,eAAOA,CAAC,CAAC,MAAD,CAAR;AAAiB,OADhC,EACiC,UAASA,CAAT,EAAW;AAAE,eAAOA,CAAC,CAAC,SAAD,CAAR;AAAoB,OADlE,EAEHgE,KAFG,GAGHlC,MAHG,CAGI,MAHJ,EAIHC,IAJG,CAIE,IAJF,EAIO,WAJP,EAKHkC,EALG,CAKA,WALA,EAKa,UAASjE,CAAT,EAAW;AACxBqC,QAAAA,GAAG,CAACX,KAAJ,CAAU,SAAV,EAAqB,EAArB,EACKA,KADL,CACW,SADX,EACqB,EADrB;AAEAW,QAAAA,GAAG,CAAC6B,IAAJ,CAASlE,CAAC,CAACI,OAAF,GAAY,MAAZ,GAAmB,SAAnB,GAA+BpB,OAAO,CAACgB,CAAC,CAACK,KAAH,CAA/C;;AAEA,iBAASrB,OAAT,CAAiBmF,UAAjB,EAA6B;AACzB;AACA,iBAAO7B,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,KAAgC,MAAhC,GAEL7B,IAAI,CAACgC,KAAL,CAAYhC,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,IAA+B,MAAhC,GAAwC,EAAnD,IAAuD,EAAvD,GAA4D,GAFvD,CAGP;AAHO,YAIL7B,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,KAAgC,MAAhC,GAEA7B,IAAI,CAACgC,KAAL,CAAYhC,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,IAA+B,MAAhC,GAAwC,EAAnD,IAAuD,EAAvD,GAA4D,GAF5D,CAGF;AAHE,YAIA7B,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,KAAgC,MAAhC,GAEA7B,IAAI,CAACgC,KAAL,CAAYhC,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,IAA+B,MAAhC,GAAwC,EAAnD,IAAuD,EAAvD,GAA4D,GAF5D,GAIA7B,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,CAZF;AAcH;AACJ,OA3BG,EA4BHF,EA5BG,CA4BA,WA5BA,EA4Ba,YAAI;AACjB5B,QAAAA,GAAG,CAACX,KAAJ,CAAU,MAAV,EAAmBtD,EAAE,CAACmG,KAAH,CAASC,KAAT,GAAiB,EAAlB,GAAwB,IAA1C,EACK9C,KADL,CACW,KADX,EACmBtD,EAAE,CAACmG,KAAH,CAASE,KAAT,GAAiB,EAAlB,GAAwB,IAD1C;AAEH,OA/BG,EAgCHR,EAhCG,CAgCA,YAhCA,EAgCa,UAASjE,CAAT,EAAW;AACxBqC,QAAAA,GAAG,CAACX,KAAJ,CAAU,SAAV,EAAqB,CAArB,EACKA,KADL,CACW,SADX,EACqB,CAAC,EADtB;AAGH,OApCG,CAAR;AAuCAc,MAAAA,CAAC,CAACmB,UAAF,GACKC,QADL,CACc,IADd,EAEK7B,IAFL,CAEU,GAFV,EAEc,UAAS/B,CAAT,EAAW;AAAC,eAAOiD,UAAU,CAACjD,CAAC,CAAC,SAAD,CAAF,CAAjB;AAAgC,OAF1D,EAGK+B,IAHL,CAGU,GAHV,EAGe,UAAC/B,CAAD,EAAIU,CAAJ,EAAS;AAChBI,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,YAAI2B,IAAI,GAAGxB,QAAQ,CAACN,MAAT,CAAgB,UAAAJ,CAAC;AAAA,iBAAEA,CAAC,CAAC,SAAD,CAAD,IAAcR,CAAC,CAAC,SAAD,CAAjB;AAAA,SAAjB,CAAX;AACA,eAAOU,CAAC,GAAGqC,UAAU,CAACL,IAAI,CAAC,CAAD,CAAJ,CAAQ,OAAR,CAAD,CAAV,IAA8Bd,MAAM,GAACmB,UAAU,CAACL,IAAI,CAAC,CAAD,CAAJ,CAAQ,MAAR,EAAgB,CAAhB,EAAmB,OAAnB,CAAD,CAAjB,GAA+C,CAA7E,CAAH,GAAqFK,UAAU,CAACL,IAAI,CAAC,CAAD,CAAJ,CAAQ,OAAR,CAAD,CAAV,GAA6B,CAA1H;AACH,OAPL,EAQKX,IARL,CAQU,QARV,EAQoB,UAAS/B,CAAT,EAAW;AAAE,eAAO4B,MAAM,GAAGmB,UAAU,CAAC/C,CAAC,CAAC,OAAD,CAAF,CAA1B;AAAuC,OARxE,EASK+B,IATL,CASU,OATV,EASmB,UAAS/B,CAAT,EAAYU,CAAZ,EAAc;AAAE,eAAOuC,UAAU,CAACY,SAAX,EAAP;AAA+B,OATlE,EAUK9B,IAVL,CAUU,MAVV,EAUkB,UAAS/B,CAAT,EAAW;AAAE,eAAOiC,WAAW,CAACjC,CAAC,CAAC8D,OAAH,CAAlB;AAA8B,OAV7D,EAzNE,CAsOE;AACA;;AAGJa,MAAAA,MAAM,CAAC7C,MAAP,CAAc,MAAd,EACK6B,UADL,GAEKC,QAFL,CAEc,IAFd,EAGK7B,IAHL,CAGU,IAHV,EAGe,aAHf,EAIKC,IAJL,CAIU,UAAChC,CAAD,EAAK;AAAC,eAAO,MAAI,CAAChB,OAAL,CAAagB,CAAC,CAAC,OAAD,CAAd,CAAP;AAAgC,OAJhD,EAKK+B,IALL,CAKU,GALV,EAKc,UAAS/B,CAAT,EAAW;AAAC,eAAOiD,UAAU,CAACjD,CAAC,CAAC,SAAD,CAAF,CAAV,GAAyBiD,UAAU,CAACY,SAAX,KAAuB,CAAvD;AAAyD,OALnF,EAMK9B,IANL,CAMU,GANV,EAMc,UAAS/B,CAAT,EAAW;AAAC,eAAO+C,UAAU,CAAC/C,CAAC,CAAC,OAAD,CAAF,CAAjB;AAA8B,OANxD,EAOK+B,IAPL,CAOU,IAPV,EAOe,QAPf,EAQKA,IARL,CAQU,WARV,EAQsB,IARtB,EASKA,IATL,CASU,aATV,EASyB,QATzB;AAYAY,MAAAA,KAAK,CAAC+B,IAAN,GACKhB,MADL;AAGA7B,MAAAA,GAAG,CAACJ,MAAJ,CAAW,QAAX,EACKkC,UADL,GAEKC,QAFL,CAEc,IAFd,EAGKgB,IAHL,CAGUtB,KAHV,EAIKV,SAJL,CAIe,MAJf,EAKKZ,IALL,CAKU,UAAChC,CAAD,EAAK;AAAE,eAAO,MAAI,CAAChB,OAAL,CAAagB,CAAb,CAAP;AAAwB,OALzC;AAOA6B,MAAAA,GAAG,CAACJ,MAAJ,CAAW,QAAX,EACKkC,UADL,GAEKC,QAFL,CAEc,IAFd,EAGKgB,IAHL,CAGUpB,KAHV,EAIKzB,IAJL,CAIU,WAJV,EAIuB,iBAAiBH,MAAjB,GAA0B,GAJjD,EAKKgB,SALL,CAKe,MALf,EAMKb,IANL,CAMU,GANV,EAMe,EANf,EAOKA,IAPL,CAOU,GAPV,EAOe,CAPf,EAQKA,IARL,CAQU,IARV,EAQgB,OARhB,EASKA,IATL,CASU,WATV,EASuB,YATvB,EAUKL,KAVL,CAUW,aAVX,EAU0B,OAV1B;AAaAG,MAAAA,GAAG,CAACJ,MAAJ,CAAW,OAAX,EACKM,IADL,CACU,GADV,EACcP,KAAK,GAAC,IADpB,EAEKQ,IAFL,CAEU,KAAKzD,KAAL,CAAWa,IAFrB;AAIAyC,MAAAA,GAAG,CAACJ,MAAJ,CAAW,cAAX,EACKM,IADL,CACU,GADV,EACeP,KAAK,GAAC,IADrB,EAEKO,IAFL,CAEU,SAFV,EAEoB,CAFpB;AAIAF,MAAAA,GAAG,CAACJ,MAAJ,CAAW,cAAX,EACKM,IADL,CACU,GADV,EACcP,KAAK,GAAC,IADpB,EAEKO,IAFL,CAEU,SAFV,EAEoB,CAFpB;AAIAF,MAAAA,GAAG,CAACJ,MAAJ,CAAW,YAAX,EACKM,IADL,CACU,SADV,EACoB,CADpB,EAEKA,IAFL,CAEU,GAFV,EAEcP,KAAK,GAAC,IAAN,GAAa,EAF3B,EAGKQ,IAHL,CAGW,KAAKzD,KAAL,CAAWY,KAAX,IAAoB,QAApB,GAAgC,WAAU,KAAKZ,KAAL,CAAWY,KAArB,GAA6B,QAA7B,GAAwC,KAAKZ,KAAL,CAAWc,OAAnD,GAA4D,mBAA5F,GAAkH,WAAU,KAAKd,KAAL,CAAWY,KAArB,GAA6B,yBAA7B,GAAyD,KAAKZ,KAAL,CAAWc,OAHjM;AAKAwC,MAAAA,GAAG,CAACJ,MAAJ,CAAW,YAAX,EACKM,IADL,CACU,SADV,EACoB,CADpB,EAEKA,IAFL,CAEU,GAFV,EAEcP,KAAK,GAAC,IAAN,GAAa,EAF3B,EAGKQ,IAHL,CAGW,KAAKzD,KAAL,CAAWY,KAAX,IAAoB,QAApB,GAAgC,WAAU,KAAKZ,KAAL,CAAWY,KAArB,GAA6B,QAA7B,GAAwC,KAAKZ,KAAL,CAAWc,OAAnD,GAA4D,WAA5F,GAA0G,WAAU,KAAKd,KAAL,CAAWY,KAArB,GAA6B,iBAA7B,GAAiD,KAAKZ,KAAL,CAAWc,OAHjL;;AAKA,UAAG,KAAKd,KAAL,CAAWc,OAAX,IAAsB,OAAzB,EAAiC;AAC7BwC,QAAAA,GAAG,CAACJ,MAAJ,CAAW,cAAX,EACKM,IADL,CACU,SADV,EACoB,CADpB;AAGAF,QAAAA,GAAG,CAACJ,MAAJ,CAAW,YAAX,EACKM,IADL,CACU,SADV,EACoB,CADpB;AAEH,OAND,MAMM,IAAI,KAAKxD,KAAL,CAAWc,OAAX,IAAsB,eAA1B,EAA0C;AAC5CwC,QAAAA,GAAG,CAACJ,MAAJ,CAAW,cAAX,EACKM,IADL,CACU,SADV,EACoB,CADpB;AAGAF,QAAAA,GAAG,CAACJ,MAAJ,CAAW,YAAX,EACKM,IADL,CACU,SADV,EACoB,CADpB;AAEH;AAEP;;;iCACc;AACR,UAAIF,GAAG,GAAGzD,EAAE,CAACqD,MAAH,CAAU,UAAV,CAAV;AAEA,UAAIN,MAAM,GAAG;AAAEC,QAAAA,GAAG,EAAE,EAAP;AAAWC,QAAAA,MAAM,EAAE,EAAnB;AAAuBC,QAAAA,IAAI,EAAE,EAA7B;AAAiCC,QAAAA,KAAK,EAAE;AAAxC,OAAb;AAAA,UACIC,KAAK,GAAG,CAACpD,EAAE,CAACqD,MAAH,CAAU,WAAV,EAAuBC,KAAvB,CAA6B,OAA7B,EAAsCC,KAAtC,CAA4C,CAA5C,EAA+C,CAAC,CAAhD,CAAD,GAAsDR,MAAM,CAACG,IAA7D,GAAoEH,MAAM,CAACI,KADvF;AAAA,UAEIK,MAAM,GAAG,CAACxD,EAAE,CAACqD,MAAH,CAAU,WAAV,EAAuBC,KAAvB,CAA6B,QAA7B,EAAuCC,KAAvC,CAA6C,CAA7C,EAAgD,CAAC,CAAjD,CAAD,GAAqD,GAArD,GAA2DR,MAAM,CAACC,GAAlE,GAAwED,MAAM,CAACE,MAF5F;AAKAQ,MAAAA,GAAG,CAACC,MAAJ,CAAW,MAAX,EACKC,IADL,CACU,IADV,EACe,aADf,EAEKA,IAFL,CAEU,GAFV,EAEeP,KAAK,GAAC,IAFrB,EAGKO,IAHL,CAGU,GAHV,EAGe,CAHf,EAIKA,IAJL,CAIU,QAJV,EAImB,IAJnB,EAKKA,IALL,CAKU,OALV,EAKkB,IALlB,EAMKA,IANL,CAMU,MANV,EAMkB,SANlB,EAOKA,IAPL,CAOU,SAPV,EAOoB,CAPpB;AASAF,MAAAA,GAAG,CAACC,MAAJ,CAAW,MAAX,EACKC,IADL,CACU,IADV,EACe,aADf,EAEKA,IAFL,CAEU,GAFV,EAEeP,KAAK,GAAC,IAFrB,EAGKO,IAHL,CAGU,GAHV,EAGe,EAHf,EAIKA,IAJL,CAIU,QAJV,EAImB,IAJnB,EAKKA,IALL,CAKU,OALV,EAKkB,IALlB,EAMKA,IANL,CAMU,MANV,EAMkB,SANlB,EAOKA,IAPL,CAOU,SAPV,EAOoB,CAPpB;AASAF,MAAAA,GAAG,CAACC,MAAJ,CAAW,MAAX,EACKC,IADL,CACU,IADV,EACe,WADf,EAEKA,IAFL,CAEU,GAFV,EAEcP,KAAK,GAAC,IAAN,GAAa,EAF3B,EAGKO,IAHL,CAGU,GAHV,EAGc,EAHd,EAIKA,IAJL,CAIU,WAJV,EAIsB,IAJtB,EAKKA,IALL,CAKU,aALV,EAKyB,MALzB,EA1BQ,CAgCJ;;AAGJF,MAAAA,GAAG,CAACC,MAAJ,CAAW,MAAX,EACKC,IADL,CACU,IADV,EACe,WADf,EAEKA,IAFL,CAEU,GAFV,EAEcP,KAAK,GAAC,IAAN,GAAY,EAF1B,EAGKO,IAHL,CAGU,GAHV,EAGc,EAHd,EAIKA,IAJL,CAIU,WAJV,EAIsB,IAJtB,EAKKA,IALL,CAKU,aALV,EAKyB,MALzB,EAMKA,IANL,CAMU,OANV,EAMmB,SANnB,EAnCQ,CA0CJ;;AAEJF,MAAAA,GAAG,CAACC,MAAJ,CAAW,MAAX,EACKC,IADL,CACU,IADV,EACe,MADf,EAEKA,IAFL,CAEU,GAFV,EAEcP,KAAK,GAAC,IAFpB,EAGKO,IAHL,CAGU,GAHV,EAGc,CAHd,EAIKA,IAJL,CAIU,WAJV,EAIsB,IAJtB,EAKKA,IALL,CAKU,aALV,EAKyB,MALzB,EAMKA,IANL,CAMU,OANV,EAMmB,SANnB,EA5CQ,CAmDJ;AACP;;;4BACO8C,C,EAAGC,C,EAAG;AACV;AACA,UAAMC,EAAE,GAAGF,CAAC,CAAC,OAAD,CAAZ;AACA,UAAMG,EAAE,GAAGF,CAAC,CAAC,OAAD,CAAZ;AAEA,UAAIG,UAAU,GAAG,CAAjB;;AACA,UAAIF,EAAE,GAAGC,EAAT,EAAa;AACTC,QAAAA,UAAU,GAAG,CAAC,CAAd;AACH,OAFD,MAEO,IAAIF,EAAE,GAAGC,EAAT,EAAa;AAChBC,QAAAA,UAAU,GAAG,CAAb;AACH;;AACD,aAAOA,UAAP;AACH;;;4BAEOd,U,EAAY;AAChB;AACA,aAAO7B,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,KAAgC,MAAhC,GAEL7B,IAAI,CAACgC,KAAL,CAAYhC,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,IAA+B,MAAhC,GAAwC,EAAnD,IAAuD,EAAvD,GAA4D,GAFvD,CAGP;AAHO,QAIL7B,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,KAAgC,MAAhC,GAEA7B,IAAI,CAACgC,KAAL,CAAYhC,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,IAA+B,MAAhC,GAAwC,EAAnD,IAAuD,EAAvD,GAA4D,GAF5D,CAGF;AAHE,QAIA7B,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,KAAgC,MAAhC,GAEA7B,IAAI,CAACgC,KAAL,CAAYhC,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,IAA+B,MAAhC,GAAwC,EAAnD,IAAuD,EAAvD,GAA4D,GAF5D,GAIA7B,IAAI,CAAC8B,GAAL,CAASC,MAAM,CAACF,UAAD,CAAf,CAZF;AAcH;;;kCAEY;AACT/F,MAAAA,EAAE,CAACqD,MAAH,CAAU,UAAV,EAAsByC,IAAtB,CAA2B,KAAK3F,KAAL,CAAWc,OAAtC;;AACA,UAAG,KAAKd,KAAL,CAAWY,KAAX,IAAmB,QAAtB,EAA+B;AAC3Bf,QAAAA,EAAE,CAACqD,MAAH,CAAU,IAAV,EAAgByC,IAAhB,CAAqB,MAArB;AACH,OAFD,MAEK;AACD9F,QAAAA,EAAE,CAACqD,MAAH,CAAU,IAAV,EAAgByC,IAAhB,CAAqB,IAArB;AACH;AACJ;;;6BAIK;AAAA;;AACR,aACU;AAAK,QAAA,EAAE,EAAC,UAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,EAAE,EAAC,2BAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AAAM,QAAA,EAAE,EAAC,SAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,EAA8B;AAAM,QAAA,EAAE,EAAC,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAmB,KAAK3F,KAAL,CAAWY,KAA9B,CAA9B,gBAAmF;AAAM,QAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAnF,kBADA,EAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ubAJA,EAKA;AAAK,QAAA,EAAE,EAAC,iBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uJAA1B,CALA,CADJ,EAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARJ,EASI;AAAK,QAAA,EAAE,EAAC,cAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACL;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,EAAE,EAAC,MAAzB;AAAgC,QAAA,SAAS,EAAC,mBAA1C;AAA8D,QAAA,OAAO,EAAE,mBAAI;AAAC,UAAA,MAAI,CAAC0B,QAAL,CAAc;AAACjC,YAAAA,WAAW,EAAC;AAAb,WAAd;AAA+B,SAA3G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADK,EAEI;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,EAAE,EAAC,MAAzB;AAAgC,QAAA,SAAS,EAAC,mBAA1C;AAA8D,QAAA,OAAO,EAAE,mBAAI;AAAC,UAAA,MAAI,CAACiC,QAAL,CAAc;AAACjC,YAAAA,WAAW,EAAC;AAAb,WAAd;AAA+B,SAA3G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAFJ,EAGI;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,EAAE,EAAC,OAAzB;AAAiC,QAAA,SAAS,EAAC,mBAA3C;AAA+D,QAAA,OAAO,EAAE,mBAAI;AAAC,UAAA,MAAI,CAACiC,QAAL,CAAc;AAACjC,YAAAA,WAAW,EAAC;AAAb,WAAd;AAA+B,SAA5G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHJ,EAII;AAAK,QAAA,EAAE,EAAC,KAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,CATJ,CADV;AAkBA;;;;EAxiB+BT,S;;SAAZG,G","sourcesContent":["import React, { Component } from 'react';\nimport * as d3 from 'd3'\nimport categoryData from './data/category.csv'\nexport default class Bar extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcount:0,\n            category: [],\n            product: [],\n            stateSelect:1\n\t\t}\n        this.upDate = this.upDate.bind(this);\n        this.drawChart = this.drawChart.bind(this);\n        this.convert = this.convert.bind(this);\n\t}\n\n    shouldComponentUpdate(nextProps,nextState){\n        if(this.props.trade !== nextProps.trade || this.props.year !== nextProps.year || this.props.country !== nextProps.country || this.state.stateSelect !== nextState.stateSelect){\n            return true;\n        }\n        else{\n            return false;\n        }\n    }\n    componentDidMount(){\n        this.setData().then(()=>{\n            this.drawChart()\n            this.drawLegend()\n            //this.drawCategoryChart()\n        })\n        window.addEventListener('resize', this.upDate)\n    }\t\n\tcomponentDidUpdate() {\n        this.setData().then(()=>{\n            this.upDate()\n            this.upDateTitle()\n        })\n\t}\n    setData(data) {\n        return new Promise(resolve=>{\n            d3.csv(categoryData,function(d){\n                var year = this.props.year\n                if(d.Trade == this.props.trade)\n                return {\n                    Reporter : d.Reporter,\n                    Partner : d.Partner,\n                    Product : d.Product,\n                    Trade : d.Trade,\n                    Value : +d[year],\n                    Year: year\n                }\n            }.bind(this)).then(function(category){\n                var flags = [],\n                    product = [], \n                    l = category.length, \n                    i;\n                for( i=0; i<l; i++) {\n                    if( flags[category[i].Product]) continue;\n                    flags[category[i].Product] = true;\n                    product.push(category[i].Product);\n                }\n                product = product.filter(d=> d!='AllProducts')\n                //console.log('product',product)\n\n                this.setState({\n                    category: category,\n                    product: product\n                })\n                resolve('ture')\n            }.bind(this))\n            \n        })\n    }\n\n\tdrawChart() {\n        console.log('draw bar')\n\n        var dataUS = this.state.category.filter(d => d.Reporter == this.props.country && d.Product != 'AllProducts' && d.Partner == \"United-States\")\n        var dataCN = this.state.category.filter(d => d.Reporter == this.props.country && d.Product != 'AllProducts' && d.Partner == \"China\")\n    \n        var cateData = []\n\n        \n        \n        var margin = { top: 30, bottom: 80, left: 80, right: 30 },\n            width = +d3.select('#section3').style('width').slice(0, -2) - margin.left - margin.right,\n            height = +d3.select('#section3').style('height').slice(0, -2)*0.7 - margin.top - margin.bottom;\n        \n        // var width = 1000 - margin.left - margin.right;\n        // var height = 500 - margin.top - margin.bottom;\n\n        var svg = d3.select('#bar')\n            .append('svg')\n            .attr('width',width + margin.left + margin.right)\n            .attr('height',height + margin.top + margin.bottom)\n            .attr('id','bar-svg-svg')\n            .append('g')\n            .attr('id','bar-svg')\n            .attr('transform','translate(' +margin.left+ ',' +margin.top+ ')')\n\n        svg.select('rect')\n            .data(cateData)\n            .append('g')\n\n        svg.append('g')\n            .attr(\"class\", \"yAxis\")\n\n        svg.append('g')\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .attr(\"class\", \"xAxis\")\n\n        svg.append('text')\n            .attr('x', width/2)\n            .attr('y', height/2)\n            .text('Please Select a Country')\n            .attr('font-size','20')\n            .attr(\"text-anchor\", \"middle\")\n\n        /*var max = d3.max(data,function(d){return d['2017_RuralPopulation']})\n\n        var yAxisScale = d3.scaleLinear()\n            .domain([max +20,0])\n            .range([0,height])\n\n        var xBarAxisScale = d3.scaleBand()\n            .domain(countries)\n            .range([0,width])\n            .paddingInner(0.05)\n            .paddingOuter(0.1)*/\n\n        \n\t}\n\n\tupDate() {\n        //console.log('update bar')\n        // var margin = { top: 30, bottom: 80, left: 80, right: 30 }\n        // var width = 1000 - margin.left - margin.right;\n        // var height = 500 - margin.top - margin.bottom;\n        var margin = { top: 30, bottom: 80, left: 80, right: 30 },\n            width = +d3.select('#section3').style('width').slice(0, -2) - margin.left - margin.right,\n            height = +d3.select('#section3').style('height').slice(0, -2)*0.7 - margin.top - margin.bottom;\n        \n        console.log(width,height)\n            //width = +d3.select('#bar').style('width').slice(0, -2) - margin.left - margin.right,\n            //height = +d3.select('#bar').style('height').slice(0, -2) - margin.top - margin.bottom;\n\n\n        var colorExport = d3.scaleOrdinal().domain(['United-States','China']).range([\"#2166CC\",\"#CC5343\"]);\n\n        var dataUS = this.state.category.filter(d => d.Reporter == this.props.country && d.Product != 'AllProducts' && d.Partner == \"United-States\")\n        var dataCN = this.state.category.filter(d => d.Reporter == this.props.country && d.Product != 'AllProducts' && d.Partner == \"China\")\n    \n        var cateData = []\n        var div = d3.select('.tooltip')\n        \n        for(var i=0; i<Math.max(dataUS.length, dataCN.length); i++){\n            var t = {}\n            t['data'] = []\n            var total = 0\n            if(dataUS.length > 0){\n                var temp = {}\n                total = total + dataUS[i].Value\n                t['Product'] = dataUS[i].Product\n                temp['Country'] = dataUS[i].Partner\n                temp['Value'] = dataUS[i].Value\n                temp['Product'] = dataUS[i].Product\n                t['data'].push(temp)\n            }\n            if(dataCN.length > 0){\n                var temp = {}\n                total = total + dataCN[i].Value\n                t['Product'] = dataCN[i].Product\n                temp['Country'] = dataCN[i].Partner\n                temp['Value'] = dataCN[i].Value\n                temp['Product'] = dataCN[i].Product\n                t['data'].push(temp)\n            }\n            t['total'] = total\n            cateData.push(t)\n        }\n        //console.log(cateData)\n\n        d3.select('#bar-svg-svg')\n            .attr('width',width + margin.left + margin.right)\n            .attr('height',height + margin.top + margin.bottom)\n\n        var svg = d3.select('#bar-svg')\n\n        var bar_g = svg.selectAll('#bar-g')\n            .data(cateData,function(d){return d.Product})\n\n        if(this.state.stateSelect == 2){\n            cateData = cateData.sort(this.descNum).slice(0, 10)\n        }\n        if(this.state.stateSelect == 3){\n            cateData = cateData.sort(this.descNum).slice(10, 20)\n        }\n\n        var max = d3.max(cateData,function(d){return d['total']})\n\n        var yAxisScale = d3.scaleLinear()\n            .domain([max +20,0])\n            .range([0,height]);\n\n        var xAxisScale = d3.scaleBand()\n            .domain(cateData.map((d)=>{return d.Product}))\n            .range([0,width])\n            .paddingInner(0.05)\n            .paddingOuter(0.1);\n\n        var yAxis = d3.axisLeft(yAxisScale); \n        var xAxis = d3.axisBottom(xAxisScale); \n\n        var svg = d3.select('#bar-svg')\n\n        var bar_g = svg.selectAll('#bar-g')\n            .data(cateData,function(d){return d.Product})\n\n        \n        \n        console.log('all-update')\n        bar_g.selectAll('#cate-r-text')\n            .remove()\n        bar_g//.attr('transform',function(d){return 'translate(' +xAxisScale(d['Product'])+ ',' +(yAxisScale(d['total']))+ ')'})\n            .selectAll('#cate-rect')\n            .data(function(d){ return d['data']},function(d){ return d['Country']})\n            .transition()\n            .duration(1000)\n            .attr('x',function(d){return xAxisScale(d['Product'])})\n            .attr('y', (d, i )=>{\n                var temp = cateData.filter(l=>l['Product']==d['Product'])\n                //console.log(temp[0]['data'][0],temp[0]['total'], d)\n                return i ? yAxisScale(temp[0]['total'])+(height-yAxisScale(temp[0]['data'][0]['Value'])+1) : yAxisScale(temp[0]['total'])+0\n            })\n            .attr('height', function(d){ return height - yAxisScale(d['Value'])})\n            .attr('width', function(d ,i){ return xAxisScale.bandwidth() })\n            .attr('fill', function(d){ return colorExport(d.Country)})\n\n        var tt = bar_g.selectAll('#cate-rect')\n            .data(function(d){ \n                //console.log('here rect',d)\n                return d['data']},function(d){ return d['Country']})\n            .enter()\n            .append('rect')\n            .attr('id','cate-rect')\n            .on(\"mouseover\", function(d){\n                div.style(\"opacity\", .9)\n                    .style('z-index',10)\n                div.html(d.Product + '<br>'+'Value: ' + convert(d.Value))\n\n                function convert(labelValue) {\n                    // Nine Zeroes for Billions\n                    return Math.abs(Number(labelValue)) >= 1.0e+9\n\n                    ? Math.round((Math.abs(Number(labelValue)) / 1.0e+9)*10)/10 + \"B\"\n                    // Six Zeroes for Millions \n                    : Math.abs(Number(labelValue)) >= 1.0e+6\n\n                    ? Math.round((Math.abs(Number(labelValue)) / 1.0e+6)*10)/10 + \"M\"\n                    // Three Zeroes for Thousands\n                    : Math.abs(Number(labelValue)) >= 1.0e+3\n\n                    ? Math.round((Math.abs(Number(labelValue)) / 1.0e+3)*10)/10 + \"K\"\n\n                    : Math.abs(Number(labelValue));\n\n                }\n            })\n            .on(\"mousemove\", ()=>{\n                div.style(\"left\", (d3.event.pageX + 10) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 10) + \"px\")\n            })              \n            .on(\"mouseleave\",function(d){\n                div.style(\"opacity\", 0)\n                    .style('z-index',-10)\n                \n            })\n\n        tt.attr('x',function(d){return xAxisScale(d['Product'])})\n            .attr('y', (d, i )=>{\n                var temp = cateData.filter(l=>l['Product']==d['Product'])\n                return i ? yAxisScale(temp[0]['total'])+(height-yAxisScale(temp[0]['data'][0]['Value'])+1) : yAxisScale(temp[0]['total'])+0\n            })\n            .transition()\n            .duration(1000)\n            .attr('height', function(d){ return height - yAxisScale(d['Value'])})\n            .attr('width', function(d ,i){ return xAxisScale.bandwidth() })\n            .attr('fill', function(d){ return colorExport(d.Country)})\n\n        bar_g.selectAll('#cate-rect')\n            .data(function(d){ return d['data']},function(d){ return d['Country']})\n            .exit()\n            .remove()\n\n        bar_g.select('#cate-g-text')\n            .transition()\n            .duration(1000)\n            .attr('x',function(d){return xAxisScale(d['Product'])+xAxisScale.bandwidth()/2})\n            .attr('y',function(d){return yAxisScale(d['total'])})\n            .text((d)=>{return this.convert(d['total'])})\n            \n\n        bar_g = svg.selectAll('#bar-g')\n            .data(cateData,function(d){return d.Product})\n\n        //initial\n        var bar_gg = bar_g.enter()\n            .append('g')\n            .attr('id','bar-g')\n            //.attr('transform',function(d){return 'translate(' +xAxisScale(d['Product'])+ ',' +(yAxisScale(d['total']))+ ')'})\n\n        var t = bar_gg.selectAll('#cate-rect')\n            .data(function(d){ return d['data']},function(d){ return d['Country']})\n            .enter()\n            .append('rect')\n            .attr('id','cate-rect')\n            .on(\"mouseover\", function(d){\n                div.style(\"opacity\", .9)\n                    .style('z-index',10)\n                div.html(d.Product + '<br>'+'Value: ' + convert(d.Value))\n\n                function convert(labelValue) {\n                    // Nine Zeroes for Billions\n                    return Math.abs(Number(labelValue)) >= 1.0e+9\n\n                    ? Math.round((Math.abs(Number(labelValue)) / 1.0e+9)*10)/10 + \"B\"\n                    // Six Zeroes for Millions \n                    : Math.abs(Number(labelValue)) >= 1.0e+6\n\n                    ? Math.round((Math.abs(Number(labelValue)) / 1.0e+6)*10)/10 + \"M\"\n                    // Three Zeroes for Thousands\n                    : Math.abs(Number(labelValue)) >= 1.0e+3\n\n                    ? Math.round((Math.abs(Number(labelValue)) / 1.0e+3)*10)/10 + \"K\"\n\n                    : Math.abs(Number(labelValue));\n\n                }\n            })\n            .on(\"mousemove\", ()=>{\n                div.style(\"left\", (d3.event.pageX + 10) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 10) + \"px\")\n            })              \n            .on(\"mouseleave\",function(d){\n                div.style(\"opacity\", 0)\n                    .style('z-index',-10)\n                \n            })\n\n\n        t.transition()\n            .duration(1000)\n            .attr('x',function(d){return xAxisScale(d['Product'])})\n            .attr('y', (d, i )=>{ \n                console.log('init')\n                var temp = cateData.filter(l=>l['Product']==d['Product'])\n                return i ? yAxisScale(temp[0]['total'])+(height-yAxisScale(temp[0]['data'][0]['Value'])+1) : yAxisScale(temp[0]['total'])+0\n            })\n            .attr('height', function(d){ return height - yAxisScale(d['Value'])})\n            .attr('width', function(d ,i){ return xAxisScale.bandwidth() })\n            .attr('fill', function(d){ return colorExport(d.Country)})\n            \n            \n            //.on('mouseover', tip.show)\n            //.on('mouseout', tip.hide)\n\n        \n        bar_gg.append('text')\n            .transition()\n            .duration(1000)\n            .attr('id','cate-g-text')\n            .text((d)=>{return this.convert(d['total'])})\n            .attr('x',function(d){return xAxisScale(d['Product'])+xAxisScale.bandwidth()/2})\n            .attr('y',function(d){return yAxisScale(d['total'])})\n            .attr('dy','-0.2em')\n            .attr('font-size','12')\n            .attr(\"text-anchor\", \"middle\")\n\n\n        bar_g.exit()\n            .remove()\n\n        svg.select('.yAxis')\n            .transition()\n            .duration(1000)\n            .call(yAxis)\n            .selectAll(\"text\")\n            .text((d)=>{ return this.convert(d) })\n\n        svg.select('.xAxis')\n            .transition()\n            .duration(1000)\n            .call(xAxis)\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .selectAll(\"text\")\n            .attr(\"y\", 10)\n            .attr(\"x\", 7)\n            .attr(\"dy\", \".35em\")\n            .attr(\"transform\", \"rotate(45)\")\n            .style(\"text-anchor\", \"start\");\n\n\n        svg.select('#year')\n            .attr('x',width*0.65)\n            .text(this.props.year)\n\n        svg.select('#us-r-legend')\n            .attr('x', width*0.65)\n            .attr('opacity',1)\n\n        svg.select('#cn-r-legend')\n            .attr('x',width*0.65)\n            .attr('opacity',1)\n\n        svg.select('#us-legend')\n            .attr('opacity',1)\n            .attr('x',width*0.65 + 30)\n            .text( this.props.trade == 'Export' ?  'Value '+ this.props.trade + ' from ' + this.props.country +' to United-States' : 'Value '+ this.props.trade + ' from United-States to ' + this.props.country )\n\n        svg.select('#cn-legend')\n            .attr('opacity',1)\n            .attr('x',width*0.65 + 30)\n            .text( this.props.trade == 'Export' ?  'Value '+ this.props.trade + ' from ' + this.props.country +' to China' : 'Value '+ this.props.trade + ' from China to ' + this.props.country )\n\n        if(this.props.country == \"China\"){\n            svg.select('#cn-r-legend')\n                .attr('opacity',0)\n            \n            svg.select('#cn-legend')\n                .attr('opacity',0)\n        }else if (this.props.country == \"United-States\"){\n            svg.select('#us-r-legend')\n                .attr('opacity',0)\n            \n            svg.select('#us-legend')\n                .attr('opacity',0)\n        }\n\n\t}\n    drawLegend(){\n        var svg = d3.select('#bar-svg')\n\n        var margin = { top: 30, bottom: 80, left: 80, right: 30 },\n            width = +d3.select('#section3').style('width').slice(0, -2) - margin.left - margin.right,\n            height = +d3.select('#section3').style('height').slice(0, -2)*0.7 - margin.top - margin.bottom;\n        \n\n        svg.append('rect')\n            .attr('id','us-r-legend')\n            .attr('x', width*0.65)\n            .attr('y', 7)\n            .attr('height','25')\n            .attr('width','25')\n            .attr('fill', \"#2166CC\")\n            .attr('opacity',0)\n        \n        svg.append('rect')\n            .attr('id','cn-r-legend')\n            .attr('x', width*0.65)\n            .attr('y', 35)\n            .attr('height','25')\n            .attr('width','25')\n            .attr('fill', \"#CC5343\")\n            .attr('opacity',0)\n        \n        svg.append('text')\n            .attr('id','us-legend')\n            .attr('x',width*0.65 + 30)\n            .attr('y',21)\n            .attr('font-size','12')\n            .attr(\"text-anchor\", \"left\")\n            //.text('Value '+ this.props.trade + ' from ' + this.props.country +' to United-States')\n\n        \n        svg.append('text')\n            .attr('id','cn-legend')\n            .attr('x',width*0.65 +30)\n            .attr('y',50)\n            .attr('font-size','12')\n            .attr(\"text-anchor\", \"left\")\n            .attr('color', '#CC5343')\n            //.text('Value '+ this.props.trade + ' from ' + this.props.country +' to China')\n        \n        svg.append('text')\n            .attr('id','year')\n            .attr('x',width*0.65)\n            .attr('y',0)\n            .attr('font-size','40')\n            .attr(\"text-anchor\", \"left\")\n            .attr('color', '#CC5343')\n            //.text('2016')\n    }\n    descNum(a, b) {\n        // Use toUpperCase() to ignore character casing\n        const ca = a['total']\n        const cb = b['total']\n\n        let comparison = 0;\n        if (ca > cb) {\n            comparison = -1;\n        } else if (ca < cb) {\n            comparison = 1;\n        }\n        return comparison;\n    }\n\n    convert(labelValue) {\n        // Nine Zeroes for Billions\n        return Math.abs(Number(labelValue)) >= 1.0e+9\n\n        ? Math.round((Math.abs(Number(labelValue)) / 1.0e+9)*10)/10 + \"B\"\n        // Six Zeroes for Millions \n        : Math.abs(Number(labelValue)) >= 1.0e+6\n\n        ? Math.round((Math.abs(Number(labelValue)) / 1.0e+6)*10)/10 + \"M\"\n        // Three Zeroes for Thousands\n        : Math.abs(Number(labelValue)) >= 1.0e+3\n\n        ? Math.round((Math.abs(Number(labelValue)) / 1.0e+3)*10)/10 + \"K\"\n\n        : Math.abs(Number(labelValue));\n\n    }\n\n    upDateTitle(){\n        d3.select('#country').html(this.props.country)\n        if(this.props.trade =='Import'){\n            d3.select('#d').html('from')\n        }else{\n            d3.select('#d').html('to')\n        }\n    }\n    \n\n\n\trender() {\n\t\treturn (\n            <div id='barchart'>\n                <div id='bar-discription-container'>\n                <h2><span id='country'></span><span id='trade'> {this.props.trade}</span> Category <span id='d'>to</span> U.S. & China</h2>\n                \n                    \n                <p>This bar chart shows the total trade value from the top 10 countries (with the highest trade value) to the U.S. and China by category. Three buttons provide detailed information about the top 10 categories with the highest trade value, the bottom 10 categories with the lowest trade value, and trade value by all 20 categories. The blue bars represent trade value to the U.S., while the red ones represent trade value to China.</p>\n                <div id='instruction-box'><p>Instruction: Choose Year, Trade(Export/Import), Country at the sidebar on the left, categorical trade value will be shown in the bar chart.</p></div>\n                </div>\n                <br></br>\n                <div id='barContainer'>\n        \t\t\t<button type=\"button\" id='top5' className=\"btn btn-secondary\" onClick={()=>{this.setState({stateSelect:2})}}>TOP 10</button>\n                    <button type=\"button\" id='bot5' className=\"btn btn-secondary\" onClick={()=>{this.setState({stateSelect:3})}}>BOTTOM 10</button>\n                    <button type=\"button\" id='all10' className=\"btn btn-secondary\" onClick={()=>{this.setState({stateSelect:1})}}>ALL 20</button>\n                    <div id='bar'></div>\n                </div>\n            </div>\n\t\t)\n\t}\n\n}"]},"metadata":{},"sourceType":"module"}